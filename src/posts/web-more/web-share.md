---
title:      ã€åˆ†äº«ã€‘åœ¨é˜¿é‡ŒDTå®Œæˆä¸€ç³»åˆ—äº§å“åï¼Œåˆ†äº«ä¸‹å›¢é˜Ÿå‰ç«¯éƒ¨åˆ†çš„æŠ€æœ¯é€‰å‹ï½
subtitle:   ä¸»è¦æ˜¯åˆ†äº«è¿™æ®µæ—¶é—´ï¼Œå¼€å‘æ‰€è¿ç”¨çš„æŠ€æœ¯æ ˆï¼Œä¸ªäººè§‰å¾—æ¯”è¾ƒå®ç”¨ï¼Œåˆ†äº«ç»™å¤§å®¶å‚è€ƒä¸‹ï½
keyword:    React.js, TypeScript, Antd, Umi.js, Pont
date: 2020-05-17 14:08:52
catalog: true
header-img:
tags:
    - Share
categories: 
    - More
---


# å¼€å‘ç¯å¢ƒå‡†å¤‡

## node

### å®‰è£… node.js / npm

å°½é‡å®‰è£… 10.x ä»¥ä¸Šç‰ˆæœ¬ã€‚å¦‚æœå·²ç»å®‰è£…å¥½äº† node.jsï¼Œé‚£ä¹ˆå…¶ä¸­å·²ç»è‡ªå¸¦**npm**ï¼ˆåŒ…ç®¡ç†å·¥å…·ï¼‰ã€‚

---

## vscode ä»£ç ç¼–è¾‘å™¨

å‰ç«¯ä»£ç æ¨èä½¿ç”¨ vscode å¼€å‘ï¼Œå› ä¸ºéœ€è¦é…åˆåé¢ç”¨åˆ°çš„**pont**æ¥å£å±‚ç”Ÿæˆå·¥å…·ï¼Œè¿˜æœ‰å°±æ˜¯å¯¹ `typescript` æ¯”è¾ƒå‹å¥½ã€‚

å¯ä»¥å»å®˜ç½‘è‡ªè¡Œä¸‹è½½å®‰è£… [å®˜æ–¹ç«™ç‚¹](https://code.visualstudio.com/)ã€‚

åœ¨æ’ä»¶æ‹“å±•é‡Œï¼Œå¯ä»¥æœç´¢å®‰è£…éœ€è¦çš„æ’ä»¶ã€‚æ¥å¯¹ `React.js` ã€`typescript` ç­‰æ›´åŠ å‹å¥½çš„æ”¯æŒã€‚

å¸¸è§çš„æ’ä»¶æœ‰å¦‚ä¸‹ï¼š

- è½¯ä»¶ä¸­æ–‡åŒ…ï¼šChinese (Simplified) Language Pack for Visual Studio Code
- ä»£ç  lintï¼šESLint
- è·¯å¾„è¡¥å…¨ï¼šPath Autocomplete
- ä»£ç ç¾åŒ–ï¼šprettier
- æ¥å£å·¥å…·ï¼šPont
- React æ”¯æŒï¼š ES7 React/Redux/GraphQL/React-Native snippets
- Git æ‹“å±•ï¼š GitLens â€” Git supercharged
- å¼€å‘è¾…åŠ©ï¼š Visual Studio IntelliCode
- â€¦â€¦

---

# å‰ç«¯è¯­è¨€å’Œæ¡†æ¶

---

## ES6

å¯¹äº `javascript` ï¼Œæˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œè¿™é‡Œè¯´çš„ `ES6`ï¼Œç”šè‡³ ES7ã€ES8 ç­‰åˆæ˜¯ä»€ä¹ˆå›äº‹ï¼Ÿ

> ECMAScript 6.0ï¼ˆç®€ç§° ES6ï¼‰æ˜¯ JavaScript è¯­è¨€çš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œå·²ç»åœ¨ 2015 å¹´ 6 æœˆæ­£å¼å‘å¸ƒã€‚å®ƒçš„ç›®æ ‡ï¼Œæ˜¯ä½¿å¾— JavaScript è¯­è¨€å¯ä»¥ç”¨æ¥ç¼–å†™å¤æ‚çš„å¤§å‹åº”ç”¨ç¨‹åºï¼Œæˆä¸ºä¼ä¸šçº§å¼€å‘è¯­è¨€ã€‚

è¿™é‡Œç‰¹åˆ«è¯´åˆ° ES6ï¼Œæ˜¯å› ä¸ºä» ES5 åˆ° ES6ï¼Œæœ‰äº†å¾ˆå¤§çš„å˜åŒ–ï¼Œä¸”æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œéƒ½æ˜¯ä»¥ ES6 ä¸ºæ ‡å‡†ä¹¦å†™çš„ä»£ç ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç®€å•ä»‹ç»å°‘ ES6 ä¸­çš„å¸¸ç”¨å†™æ³•ï¼Œæ–¹ä¾¿åç»­ä»£ç çš„ç†è§£å’Œä¹¦å†™ã€‚

### constã€let å’Œ var

`const`ã€`let`å’Œ`var`éƒ½æ˜¯ç”¨æ¥å£°æ˜å˜é‡çš„ä½œç”¨ã€‚`const`å’Œ`let`æ˜¯ ES6 å¼€å§‹å¼•å…¥çš„æ¦‚å¿µã€‚ `const` ç”¨æ¥è¡¨ç¤ºå¸¸é‡ï¼Œä¸€æ—¦å£°æ˜å°±æ— æ³•æ”¹å˜å€¼ã€‚ ä½†è¿™æ˜¯æŒ‡åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯¹æ•°ç»„å’Œå¯¹è±¡ä¿®æ”¹å±æ€§å’Œæ•°ç»„é¡¹å¹¶ä¸å—å½±å“ã€‚  
`let` ç”¨æ³•ç›¸å½“ä¸`var`ï¼Œåªæ˜¯`let`åªåœ¨å—çº§ä½œç”¨åŸŸèµ·ä½œç”¨ï¼Œä¸å­˜åœ¨å˜é‡æå‡ã€‚åœ¨é¡¹ç›®ä¸­ï¼Œå°½é‡ä¸è¦ä½¿ç”¨`var`ã€‚ç”¨`let`å’Œ`const`å°±è¶³å¤Ÿäº†ã€‚

### è§£æ„

> ES6 å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„

```javascript
let a = 1;
let b = 2;
let c = 3;
// å˜é‡èµ‹å€¼å¯ä»¥å†™æˆè§£æ„å½¢å¼
let [a, b, c] = [1, 2, 3];

let [foo, [[bar], baz]] = [1, [[2], 3]];
foo; // 1
bar; // 2
baz; // 3

let [, , third] = ['foo', 'bar', 'baz'];
third; // "baz"

let [x, , y] = [1, 2, 3];
x; // 1
y; // 3

let [head, ...tail] = [1, 2, 3, 4];
head; // 1
tail; // [2, 3, 4]

let [x, y, ...z] = ['a'];
x; // "a"
y; // undefined
z; // []

// è§£æ„ä¸ä»…å¯ä»¥ç”¨äºæ•°ç»„ï¼Œè¿˜å¯ä»¥ç”¨äºå¯¹è±¡
let { bar, foo } = { foo: 'aaa', bar: 'bbb' };
foo; // "aaa"
bar; // "bbb"

let { baz } = { foo: 'aaa', bar: 'bbb' };
baz; // undefined
```

é¡¹ç›®ä¸­ï¼Œä¼šé¢‘ç¹çš„ç”¨åˆ°è§£æ„èµ‹å€¼ï¼Œæ‰€ä»¥è¿™ä¸ªéå¸¸é‡è¦ï¼Œéœ€è¦ç†è§£è§£æ„çš„è¯­æ³•ã€‚

### ç®­å¤´å‡½æ•°

> ES6 å…è®¸ä½¿ç”¨â€œç®­å¤´â€ï¼ˆ=>ï¼‰å®šä¹‰å‡½æ•°ã€‚

```js
var f = (v) => v;

// ç­‰åŒäº
var f = function (v) {
  return v;
};
```

å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé¡¹ç›®ä¸­ï¼Œæ¶‰åŠåˆ° `class` ç»„ä»¶æ—¶ï¼Œä¼šæœ‰ `this` æŒ‡é’ˆçš„é—®é¢˜ï¼Œæ‰€ä»¥èƒ½ç”¨ç®­å¤´å‡½æ•°ï¼Œ**å°½é‡ç”¨ç®­å¤´å‡½æ•°å®šä¹‰å‡½æ•°**ã€‚

### å¯¹è±¡çš„æ‹“å±•

> ES6 å…è®¸ç›´æ¥å†™å…¥å˜é‡å’Œå‡½æ•°ï¼Œä½œä¸ºå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™æ ·çš„ä¹¦å†™æ›´åŠ ç®€æ´ã€‚

```js
const foo = 'bar';
const baz = { foo };
baz; // {foo: "bar"}
// ç­‰åŒäº
const baz = { foo: foo };
```

è¿™é‡Œå¯¹è±¡çš„æ‹“å±•ç”¨æ³•ï¼Œåœ¨é¡¹ç›®ç”¨çš„æ¯”è¾ƒæ™®éã€‚

### Promise å¯¹è±¡

> Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆï¼ˆå›è°ƒå‡½æ•°å’Œäº‹ä»¶ï¼‰æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚ Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ Promise å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ã€‚ï¼ˆ1ï¼‰å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼špendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€fulfilledï¼ˆå·²æˆåŠŸï¼‰å’Œ rejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯ Promise è¿™ä¸ªåå­—çš„ç”±æ¥ï¼Œå®ƒçš„è‹±è¯­æ„æ€å°±æ˜¯â€œæ‰¿è¯ºâ€ï¼Œè¡¨ç¤ºå…¶ä»–æ‰‹æ®µæ— æ³•æ”¹å˜ã€‚ï¼ˆ2ï¼‰ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä» pending å˜ä¸º fulfilled å’Œä» pending å˜ä¸º rejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœï¼Œè¿™æ—¶å°±ç§°ä¸º resolvedï¼ˆå·²å®šå‹ï¼‰ã€‚å¦‚æœæ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚è¿™ä¸äº‹ä»¶ï¼ˆEventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœä½ é”™è¿‡äº†å®ƒï¼Œå†å»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æœçš„ã€‚ Promise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Promise å®ä¾‹ã€‚

```js
// åˆ›å»ºä¸€ä¸ªPromiseå‡½æ•°
const promise = new Promise(function(resolve, reject) {
  // ... some code
  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){
    resolve(value);
  } else {
    reject(error);
  }
});

// å¯ä»¥ç”¨thenæ–¹æ³•åˆ†åˆ«æŒ‡å®šresolvedçŠ¶æ€å’ŒrejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚
promise.then(function(value) {
  // resolve(value);
}, function(error) {
  // reject(error);
});
```

é¡¹ç›®å¤§é‡ç”¨åˆ°è¿™ä¸ªï¼Œå°±æ˜¯ fetch è¯·æ±‚äº†ã€‚

### async / await

> ES2017 æ ‡å‡†å¼•å…¥äº† async å‡½æ•°ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ï¼Œå®ƒå°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚ async å‡½æ•°çš„è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œè¿™æ¯” Generator å‡½æ•°çš„è¿”å›å€¼æ˜¯ Iterator å¯¹è±¡æ–¹ä¾¿å¤šäº†ã€‚ä½ å¯ä»¥ç”¨ then æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚async å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ await å‘½ä»¤å°±æ˜¯å†…éƒ¨ then å‘½ä»¤çš„è¯­æ³•ç³–ã€‚

è¿™æ˜¯ä¸€ç§å¼‚æ­¥è½¬åŒæ­¥çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­å¯èƒ½éœ€è¦ç•™æ„çš„æ˜¯ï¼ŒGenerator å‡½æ•°ï¼Œåœ¨ dva å®šä¹‰çš„ modal ä¸­ï¼Œ`yield` å…³é”®è¯çš„ä½œç”¨ï¼Œå°±ç±»ä¼¼è¿™é‡Œçš„å¼‚æ­¥è½¬åŒæ­¥ã€‚

### Class çš„è¯­æ³•

> ES6 æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€çš„å†™æ³•ï¼Œå¼•å…¥äº† Classï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ã€‚é€šè¿‡ class å…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚ES6 çš„ class å¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5 éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„ class å†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚

æ¦‚å¿µç±»æ¯” java ä¸­çš„ `class`ï¼Œè¿™é‡Œæˆ‘ä»¬å¯èƒ½æ›´éœ€è¦å…³æ³¨çš„æ˜¯ React ç±»ç»„ä»¶

```js
import React, { Component } from 'react';

class Page extends Component {
  render() {
    return <div>page</div>;
  }
}
export default Page;
```

è¿™é‡Œå®šä¹‰çš„ Page ç±»ï¼Œç»§æ‰¿è‡ª React çš„ Componentã€‚æ‹¥æœ‰ React ç»„ä»¶æä¾›çš„å„ç§é’©å­ã€‚

### Module çš„è¯­æ³•

> ES6 æ¨¡å—çš„è®¾è®¡æ€æƒ³æ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼šexport å’Œ importã€‚export å‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œimport å‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚

```js
// a.js
export const appName = 'Fz\'Blog';
export default const SystemName = 'cloud-blog';
```

ä½¿ç”¨ `export` å‘½ä»¤å®šä¹‰äº†æ¨¡å—çš„å¯¹å¤–æ¥å£ä»¥åï¼Œå…¶ä»– JS æ–‡ä»¶å°±å¯ä»¥é€šè¿‡`import`å‘½ä»¤åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚

```js
import { appName } from './a.js';
import SystemName from './a.js';
```

æ›´å¤šè¯¦ç»†çš„å†…å®¹å¯ä»¥çœ‹è¿™ä¸ªâ€”â€”[ECMAScript 6 å…¥é—¨æ•™ç¨‹](https://es6.ruanyifeng.com/)

---

## TypeScript

`typescript` é¢å¯¹ `javascript` æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©å‰è€…ï¼Œæ¯”è¾ƒä¸‹ä¸¤è€…çš„ä¸åŒã€‚

> Typescript æ˜¯ Javascript çš„è¶…é›†ã€‚ï¼ˆTypescript = Type + Javascriptï¼‰

æ›´åŠ è¯¦ç»†çš„æ–‡æ¡£ï¼Œå¯ä»¥[æŸ¥çœ‹è¿™é‡Œ](https://ts.xcatliu.com/introduction/what-is-typescript) åœ¨çº¿ç¤ºä¾‹å¯ä»¥[æŸ¥çœ‹è¿™é‡Œ](https://www.typescriptlang.org/play/)

### åŸºæœ¬è¯­æ³•

å‰é¢æåˆ°äº†ï¼Œ`Typescript` å°±æ˜¯åœ¨ `Javascript` åŠ äº†ä¸€å±‚**type**ã€‚ å¤§å®¶å¯¹ java æ¯”è¾ƒç†Ÿæ‚‰ï¼Œjava æ˜¯ä¸€ä¸ªå…¸å‹çš„å¼ºç±»å‹è¯­è¨€ï¼Œä»»ä½•å˜é‡éƒ½éœ€è¦æœ‰è‡ªå·±çš„ç±»å‹å£°æ˜ï¼Œä½†æ˜¯ `Javascript` å´æ˜¯ä¸€ä¸ªå¼±ç±»å‹è¯­è¨€ã€‚ ä¸€ä¸ª `number` ç±»å‹çš„å˜é‡å¯ä»¥è¢«èµ‹å€¼ä¸º `string` ç±»å‹ï¼Œè¿™å°±å¸¦æ¥äº†è¯¸å¤šçš„éº»çƒ¦ã€‚  
`Typescript` å°±æ˜¯è§£å†³ç±»å‹åŒ¹é…å¾ˆå¥½çš„æ–¹æ¡ˆã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹é¢ä¸€æ®µ java ä»£ç å’Œ typescript ä»£ç ã€‚

Javaï¼š

```java
String str = "æˆ‘æ˜¯å­—ç¬¦ä¸²";

public class Cat {
  private String name = "biubiu";

  public String cry() {
    return "å–µå–µå–µï½";
  }
}
```

TypeScript:

```typescript
const str: string = 'æˆ‘æ˜¯å­—ç¬¦ä¸²';

class Cat {
  private name: string = 'biubiu';

  // ? è¡¨ç¤ºè¯¥å±æ€§å¯èƒ½ä¸å­˜åœ¨ å³ undefined
  age?: number;

  cry(): string {
    console.log(this.name);
    return 'å–µå–µå–µï½';
  }
}
```

ç±»å‹å£°æ˜æ—¶ï¼Œ`Typescript` ä¸ `Java` åˆšå¥½ç›¸åï¼Œ`Java` çš„ç±»å‹å®šä¹‰åœ¨å˜é‡å‰ï¼Œ`Typescript` çš„ç±»å‹å®šä¹‰åœ¨å˜é‡åã€‚

### åŸºæœ¬ç±»å‹

Java => Typescript  
Java: Float, Integer, Double ==> Typescriptï¼šnumber  
Java: String ==> Typescript: string  
Java: Boolean ==> Typescript: boolean

ç¤ºä¾‹ï¼š  
Javaï¼š

```java
boolean userMan = true;
int userAge = 81;
float userAverage = 10.5;
String userName = "æ¡äºº";
```

Typescriptï¼š

```typescript
let userMan: boolean = true;
let userAge: number = 81;
let userAverage: number = 10.5;
let userName: string = 'æ¡äºº';
```

### ä»»æ„å€¼

> ç”±äºå‰ç«¯æ•°æ®æ¥æºæ¯”è¾ƒå¹¿è€Œè„†å¼±ï¼Œå¯¹æ•°æ®ç±»å‹çš„çµæ´»æ€§è¦æ±‚ä¹Ÿæ¯”è¾ƒé«˜ï¼ŒTypescript å‘æ˜äº† any ç±»å‹ï¼Œæ¥åº”å¯¹å„ç§ç±»å‹ä¸åŒ¹é…çš„ edge caseï¼Œå¿«é€Ÿè§£å†³ç±»å‹é—®é¢˜æ— æ³•ç¼–è¯‘é€šè¿‡çš„é—®é¢˜ã€‚

åœ¨ä¸æ¸…æ¥šæ•°æ®ç±»å‹æ—¶ï¼Œå¯ä»¥ç”¨`any`æ¥å®šä¹‰ã€‚ä¸è¿‡ä¸å»ºè®®å¤§é‡ä½¿ç”¨ã€‚ä¸ç„¶ä½¿ç”¨ `typescript` å°±æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚

### å¤åˆç±»å‹

enum è¯­æ³•æ¯”è¾ƒä¸€è‡´

```typescript
// Java
enum WeekDayEnum {
  Mon,
  Tue,
  Wed,
  Thu,
  Fri,
  Sat,
  Sun,
}

// Typescript
enum WeekDayEnum {
  Mon,
  Tue,
  Wed,
  Thu,
  Fri,
  Sat,
  Sun,
}

// é™„ä¸Šåˆå§‹å€¼ï¼š
enum WeekDayEnum {
  Mon = 1,
  Tue = 2,
  Wed = 3,
  Thu = 4,
  Fri = 5,
  Sat = 6,
  Sun = 7,
}
```

### interfaceã€type å’Œ class

`interface`æ¥å£ï¼Œç±»æ¯” java ä¸­çš„ interfaceï¼Œæ¥å£æ˜¯ä¸€ç³»åˆ—æŠ½è±¡æ–¹æ³•çš„å£°æ˜ï¼Œæ˜¯ä¸€äº›æ–¹æ³•ç‰¹å¾çš„é›†åˆï¼Œè¿™äº›æ–¹æ³•éƒ½åº”è¯¥æ˜¯æŠ½è±¡çš„ï¼Œéœ€è¦ç”±å…·ä½“çš„ç±»å»å®ç°ï¼Œç„¶åç¬¬ä¸‰æ–¹å°±å¯ä»¥é€šè¿‡è¿™ç»„æŠ½è±¡æ–¹æ³•è°ƒç”¨ï¼Œè®©å…·ä½“çš„ç±»æ‰§è¡Œå…·ä½“çš„æ–¹æ³•ã€‚ `type` ç”¨æ¥å®šä¹‰æ•°æ®ç»“æ„ã€‚ `class` ç±»æ¯” javaï¼Œæœ‰ç§æœ‰å’Œé™æ€å±æ€§ï¼Œå¯ä»¥ç»§æ‰¿ï¼Œæ„é€ æ–¹æ³•â€¦â€¦

```typescript
interface Person {
    firstName:string,
    lastName:string,
    sayHi: ()=>string
}

type User = {
	name: string;
}

class Cat = {
  name: string;
  age: number;
}
```

ä¸‰è€…éƒ½å¯ä»¥ç”¨æ¥å®šä¹‰æ•°æ®ç»“æ„ï¼Œä½†æ˜¯æ„ä¹‰ä¸åŒï¼Œä½¿ç”¨åœºæ™¯ä¹Ÿä¸åŒã€‚

ç”±äº typescript çš„å®—æ—¨æ˜¯å…¼å®¹ jsï¼Œè¿è¡Œæ—¶è¦æ“¦é™¤æ‰€æœ‰ç±»å‹ä¿¡æ¯ï¼Œå› æ­¤`interface`å’Œ`type`åœ¨è¿è¡Œæ—¶æ˜¯ä¼šè¢«å®Œå…¨æ¶ˆé™¤çš„ã€‚è€Œ`class`ç»è¿‡ç¼–è¯‘åï¼Œåœ¨è¿è¡Œæ—¶ä¾ç„¶å­˜åœ¨ã€‚å› æ­¤å¦‚æœè¦å£°æ˜çš„ç±»å‹åªæ˜¯çº¯ç²¹çš„ç±»å‹ä¿¡æ¯ï¼Œåªéœ€è¦å£°æ˜`interface`å³å¯ã€‚

### ç±»å‹æ¨å¯¼

> Typescript èƒ½å¤Ÿåœ¨é™æ€åˆ†æä¸­æ¨å¯¼å‡ºç±»å‹ï¼Œä¸éœ€è¦åƒ Java é‚£æ ·å¤„å¤„å®šä¹‰ã€‚è¿™ä¹Ÿæ˜¯ Typescript æŠŠç±»å‹å®šä¹‰æ”¾åœ¨å˜é‡åï¼Œè€Œ Java æŠŠç±»å‹å®šä¹‰æ”¾åœ¨å˜é‡å‰çš„åŸå› ã€‚

```js
// å¯¹äºè¿™é‡Œçš„å˜é‡ï¼Œtypescriptå¯ä»¥é€šè¿‡èµ‹å€¼è·å–å˜é‡çš„ç±»å‹ï¼Œå’Œä¸Šé¢çš„å®šä¹‰æ•ˆæœæ˜¯ç›¸åŒçš„
let userMan = true;
let userAge = 81;
let userAverage = 10.5;
let userName = 'æ¡äºº';
```

### å‡½æ•°å®šä¹‰

ä¸Šé¢ä¾‹å­ä¸­å·²ç»æœ‰å‡½æ•°çš„ä¾‹å­äº†ï¼Œjava åœ¨å®šä¹‰æ—¶ï¼Œè¿”å›å€¼ä»¥å‚æ•°ç±»å‹éƒ½éœ€è¦å†™ã€‚å¹¶ä¸”å†™åœ¨å˜é‡ä¹‹å‰ã€‚è€Œ typescript åˆ™æ˜¯ä¹‹åã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ ğŸŒ°ï¼š

```typescript
const multiply: (a: number, b: number) => number = (a, b) => a * b;
```

### æ–‡ä»¶ç±»å‹

- .ts Typescript æ–‡ä»¶
- .tsx Typescript + JSXï¼Œæ”¯æŒ JSX è¯­æ³•
- .d.ts ç›¸å½“äº C++ .h æ–‡ä»¶ï¼Œåªæœ‰ç±»å‹å£°æ˜ï¼Œæ²¡æœ‰å®ç°ä»£ç ã€‚

æ›´å¤šçš„å†…å®¹å¯ä»¥æŸ¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://www.tslang.cn/docs/handbook/basic-types.html)

---

## React.js

ä»€ä¹ˆæ˜¯ react.js? ä¸ºä»€ä¹ˆé€‰æ‹© react.jsï¼Ÿ

> React ä½¿åˆ›å»ºäº¤äº’å¼ UI å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ä¸ºä½ åº”ç”¨çš„æ¯ä¸€ä¸ªçŠ¶æ€è®¾è®¡ç®€æ´çš„è§†å›¾ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ React èƒ½æœ‰æ•ˆåœ°æ›´æ–°å¹¶æ­£ç¡®åœ°æ¸²æŸ“ç»„ä»¶ã€‚åˆ›å»ºæ‹¥æœ‰å„è‡ªçŠ¶æ€çš„ç»„ä»¶ï¼Œå†ç”±è¿™äº›ç»„ä»¶æ„æˆæ›´åŠ å¤æ‚çš„ UIã€‚ç»„ä»¶é€»è¾‘ä½¿ç”¨ JavaScript ç¼–å†™è€Œéæ¨¡ç‰ˆï¼Œå› æ­¤ä½ å¯ä»¥è½»æ¾åœ°åœ¨åº”ç”¨ä¸­ä¼ é€’æ•°æ®ï¼Œå¹¶ä½¿å¾—çŠ¶æ€ä¸ DOM åˆ†ç¦»ã€‚ä¸€ä¸ªé€šè¿‡ react æ¡†æ¶æ„æˆçš„å‰ç«¯åº”ç”¨ï¼Œå…¶æ„æˆç»“æ„ä¸ºï¼šå…ƒç´  -> ç»„ä»¶ -> æ¨¡å— -> é¡µé¢ -> ç«™ç‚¹ï¼› **ç‰¢è®°é‡ç‚¹ï¼šçŠ¶æ€ã€ç»„ä»¶ã€å•å‘æ•°æ®æµã€‚**

`React.js` æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ æ„å»ºé¡µé¢ UI çš„åº“ã€‚å¦‚æœä½ ç†Ÿæ‚‰ MVC æ¦‚å¿µçš„è¯ï¼Œé‚£ä¹ˆ React çš„ç»„ä»¶å°±ç›¸å½“äº MVC é‡Œé¢çš„ Viewã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰ä¹Ÿæ²¡å…³ç³»ï¼Œä½ å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºï¼Œ`React.js` å°†å¸®åŠ©æˆ‘ä»¬å°†ç•Œé¢åˆ†æˆäº†å„ä¸ªç‹¬ç«‹çš„å°å—ï¼Œæ¯ä¸€ä¸ªå—å°±æ˜¯ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œå°±æˆäº†æˆ‘ä»¬çš„é¡µé¢ã€‚ä¸€ä¸ªç»„ä»¶çš„æ˜¾ç¤ºå½¢æ€å’Œè¡Œä¸ºæœ‰å¯èƒ½æ˜¯ç”±æŸäº›æ•°æ®å†³å®šçš„ã€‚è€Œæ•°æ®æ˜¯å¯èƒ½å‘ç”Ÿæ”¹å˜çš„ï¼Œè¿™æ—¶å€™ç»„ä»¶çš„æ˜¾ç¤ºå½¢æ€å°±ä¼šå‘ç”Ÿç›¸åº”çš„æ”¹å˜ã€‚è€Œ `React.js` ä¹Ÿæä¾›äº†ä¸€ç§éå¸¸é«˜æ•ˆçš„æ–¹å¼å¸®åŠ©æˆ‘ä»¬åšåˆ°äº†æ•°æ®å’Œç»„ä»¶æ˜¾ç¤ºå½¢æ€ä¹‹é—´çš„åŒæ­¥ã€‚ `React.js` ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªåº“ã€‚**å®ƒåªæä¾› UI ï¼ˆviewï¼‰å±‚é¢çš„è§£å†³æ–¹æ¡ˆ**ã€‚åœ¨å®é™…çš„é¡¹ç›®å½“ä¸­ï¼Œå®ƒå¹¶ä¸èƒ½è§£å†³æˆ‘ä»¬æ‰€æœ‰çš„é—®é¢˜ï¼Œéœ€è¦ç»“åˆå…¶å®ƒçš„åº“ï¼Œä¾‹å¦‚ `Redux`ã€`React-router` ç­‰æ¥ååŠ©æä¾›å®Œæ•´çš„è§£å†³æ–¹æ³•ã€‚

ä¸€ä¸ªå° `Demo` å¸®ä½ ç†è§£ react åœ¨åšä»€ä¹ˆï¼Ÿ

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>What's Reactjs?</title>
    <style media="screen">
      .like-btn {
        font-size: 50px;
      }
    </style>
  </head>

  <body>
    <div class="wrapper"></div>
  </body>

  <script type="text/javascript">
    /* Component */
    class Component {
      constructor(props = {}) {
        this.props = props;
      }

      setState(state) {
        const oldEl = this.el;
        this.state = state;
        this.el = this.renderDOM();
        if (this.onStateChange) this.onStateChange(oldEl, this.el);
      }

      renderDOM() {
        this.el = createDOMFromString(this.render());
        if (this.onClick) {
          this.el.addEventListener('click', this.onClick.bind(this), false);
        }
        return this.el;
      }
    }

    const createDOMFromString = (domString) => {
      const div = document.createElement('div');
      div.innerHTML = domString;
      return div;
    };

    const mount = (component, wrapper) => {
      wrapper.appendChild(component.renderDOM());
      component.onStateChange = (oldEl, newEl) => {
        wrapper.insertBefore(newEl, oldEl);
        wrapper.removeChild(oldEl);
      };
    };

    /* ========================================= */
    class LikeButton extends Component {
      constructor(props) {
        super(props);
        this.state = { isLiked: false };
      }

      onClick() {
        this.setState({
          isLiked: !this.state.isLiked,
        });
      }

      render() {
        return `
          <button class='like-btn' style="background-color: ${this.props.bgColor}">
            <span class='like-text'>
              ${this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'}
            </span>
            <span>ğŸ‘</span>
          </button>
        `;
      }
    }

    class RedBlueButton extends Component {
      constructor(props) {
        super(props);
        this.state = {
          color: 'red',
        };
      }

      onClick() {
        this.setState({
          color: 'blue',
        });
      }

      render() {
        return `
          <div style='color: ${this.state.color};'>${this.state.color}</div>
        `;
      }
    }

    const wrapper = document.querySelector('.wrapper');
    mount(new LikeButton({ bgColor: 'red' }), wrapper);
    mount(new LikeButton(), wrapper);
    mount(new RedBlueButton(), wrapper);
  </script>
</html>
```

**æ›´è¯¦ç»†çš„ç†è§£ React.js å¯ä»¥æŸ¥çœ‹[è¿™é‡Œ](http://fangzhioooo.gitee.io);**

### jsx

è¿™ç§çœ‹èµ·æ¥â€œåœ¨ JavaScript å†™çš„æ ‡ç­¾çš„â€è¯­æ³•å« JSXã€‚ä½†æ³¨æ„çš„æ˜¯ï¼Œåœ¨å†™ç»„ä»¶çš„æ—¶å€™ï¼Œéœ€è¦å¼•å…¥ reactã€‚

```jsx
import React, { Component } from 'react';
import ReactDOM from 'react-dom';

class Page extends Component {
  render() {
    return (
      <div>
        <h1>Hello World</h1>
      </div>
    );
  }
}

ReactDOM.render(<Page />, document.getElementById('root'));
```

æƒ³äº†è§£æ›´å¤šå¯ä»¥æŸ¥çœ‹[jsx çš„åŸç†](http://fangzhioooo.gitee.io)

ä» jsx åˆ°é¡µé¢çš„è¿‡ç¨‹ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š

![jsxç¼–è¯‘è¿‡ç¨‹](https://images.gitee.com/uploads/images/2020/0525/162108_2554daa9_2106937.png)

æ‰€ä»¥ä¸ºå•¥ä¸å¯ä»¥ç›´æ¥ä» jsx ç›´æ¥è§£æä¸º domï¼Œè€Œæ˜¯å…ˆè§£æä¸º js å¯¹è±¡åï¼Œå†ç»è¿‡`react-dom`ï¼Œè§£æä¸º domï¼Ÿç¬¬ä¸€ç‚¹ï¼Œåœ¨äºå¯ä»¥å¤ç”¨ç»“æ„ï¼Œæˆ‘ä»¬ä¸ä¸€å®šä»…ä»…æ¸²æŸ“æˆ domï¼Œä¹Ÿå¯ä»¥å»æ¸²æŸ“æˆå…¶ä»–çš„ç»“æ„ã€‚æ¯”å¦‚ï¼Œæƒ³è±¡æœ‰ä¸ª`react-dingding`ï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ª js å¯¹è±¡è§£ææˆé’‰é’‰å°ç¨‹åºéœ€è¦çš„é¡µé¢ï¼Ÿ  
ç¬¬äºŒç‚¹ï¼Œåœ¨äºæ–¹ä¾¿åš diff ç®—æ³•ã€‚

æ€»ç»“ï¼š

1. JSX æ˜¯ JavaScript è¯­è¨€çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œé•¿å¾—åƒ HTMLï¼Œä½†å¹¶ä¸æ˜¯ HTMLã€‚
2. React.js å¯ä»¥ç”¨ JSX æ¥æè¿°ä½ çš„ç»„ä»¶é•¿ä»€ä¹ˆæ ·çš„ã€‚
3. JSX åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šå˜æˆç›¸åº”çš„ JavaScript å¯¹è±¡æè¿°ã€‚
4. react-dom è´Ÿè´£æŠŠè¿™ä¸ªç”¨æ¥æè¿° UI ä¿¡æ¯çš„ JavaScript å¯¹è±¡å˜æˆ DOM å…ƒç´ ï¼Œå¹¶ä¸”æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚

### ç»„ä»¶

React.js ä¸­ä¸€åˆ‡çš†ç»„ä»¶ï¼Œç”¨ React.js å†™çš„å…¶å®å°±æ˜¯ React.js ç»„ä»¶ã€‚æˆ‘ä»¬åœ¨ç¼–å†™ React.js ç»„ä»¶çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½éœ€è¦ç»§æ‰¿ React.js çš„ `Component`ã€‚ä¸€ä¸ªç»„ä»¶ç±»å¿…é¡»è¦å®ç°ä¸€ä¸ª render æ–¹æ³•ï¼Œè¿™ä¸ª render æ–¹æ³•å¿…é¡»è¦è¿”å›ä¸€ä¸ª JSX å…ƒç´ ã€‚å¹¶ä¸”ä¸èƒ½å¹¶æ’è¿”å›å¤šä¸ªå…ƒç´ ï¼Œåªèƒ½åŒ…è£¹åœ¨ä¸€ä¸ªå…ƒç´ ä¸­ã€‚è‹¥æœ‰è¿”å›å¤šä¸ªçš„éœ€æ±‚ï¼ŒReact.js æä¾›`Fragment`æ ‡ç­¾ï¼Œå¯ä»¥å®ç°ã€‚

```jsx
import React, { Component } from 'react'

class Header extends Component {
  static defaultProps = {
    title: 'è¯¦æƒ…',
  }
  render () {
    return (
			<div>é¦–é¡µ / { this.props.title }</div>
    )
  }
}

class Page extends Component {
  const renderContent = () => `æˆ‘æ˜¯ä¸€ç¯‡æ–‡ç« ï¼`;
  render () {
	const title = <h1>æˆ‘æ˜¯æ ‡é¢˜</h1>;
	const divClass = 'page-wapper';
	const isSuccess = true;
    return (
      <div className={divClass}>
		<Header title="xxè¯¦æƒ…" />
		{ title }
        <p> 1 + 2 = {1+2} </p>
		<p> { this.renderContent() } </p>
		<p> { isSuccess===true ? 'æˆåŠŸ' : 'å¤±è´¥'  } </p>
      </div>
    )
  }
}

```

ç»„ä»¶ä¸­ï¼Œå¯ä»¥å®šä¹‰ jsx å˜é‡ï¼Œç»„ä»¶ä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥åµŒå¥—ã€ç»„åˆçš„ã€‚ `{}`å†…å¯ä»¥æ”¾ä»»ä½• JavaScript çš„ä»£ç ï¼ŒåŒ…æ‹¬å˜é‡ã€è¡¨è¾¾å¼è®¡ç®—ã€å‡½æ•°æ‰§è¡Œç­‰ç­‰ã€‚  
render ä¼šæŠŠè¿™äº›ä»£ç è¿”å›çš„å†…å®¹å¦‚å®åœ°æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œéå¸¸çš„çµæ´»ã€‚ âš ï¸ æ³¨æ„è¿™é‡Œçš„ç±»åï¼Œç”¨çš„æ˜¯`className`ï¼Œå› ä¸º`class`æ˜¯ js çš„å…³é”®å­—ï¼Œç±»ä¼¼çš„æ¯”å¦‚`htmlFor`ç”¨æ¥æ›¿ä»£`label`çš„`for`å±æ€§ã€‚

### Props

ç»„ä»¶æ˜¯ç›¸äº’ç‹¬ç«‹ã€å¯å¤ç”¨çš„å•å…ƒï¼Œä¸€ä¸ªç»„ä»¶å¯èƒ½åœ¨ä¸åŒåœ°æ–¹è¢«ç”¨åˆ°ã€‚ä½†æ˜¯åœ¨ä¸åŒçš„åœºæ™¯ä¸‹å¯¹è¿™ä¸ªç»„ä»¶çš„éœ€æ±‚å¯èƒ½ä¼šæ ¹æ®æƒ…å†µæœ‰æ‰€ä¸åŒã€‚React.js çš„ props å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚ âš ï¸ æ³¨æ„æ— æ³•åœ¨ç»„ä»¶å†…ä¿®æ”¹ç»„ä»¶çš„ propsã€‚åªèƒ½æ˜¯çˆ¶ç»„ä»¶ä¿®æ”¹ propsï¼Œä¼ å…¥å­ç»„ä»¶è§¦å‘æ›´æ–°ã€‚

é‚£ä¹ˆæ€ä¹ˆæŠŠ props ä¼ è¿›å»å‘¢ï¼Ÿåœ¨ä½¿ç”¨ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå‚æ•°æ”¾åœ¨æ ‡ç­¾çš„å±æ€§å½“ä¸­ï¼Œæ‰€æœ‰çš„å±æ€§éƒ½ä¼šä½œä¸º props å¯¹è±¡çš„é”®å€¼ã€‚æ¯”å¦‚ä¸Šé¢çš„`<Header />` ä¼ å…¥çš„å‚æ•°`title`ã€‚

æ€»ç»“ï¼š

1. ä¸ºäº†ä½¿å¾—ç»„ä»¶çš„å¯å®šåˆ¶æ€§æ›´å¼ºï¼Œåœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨æ ‡ç­¾ä¸ŠåŠ å±æ€§æ¥ä¼ å…¥é…ç½®å‚æ•°ã€‚
2. ç»„ä»¶å¯ä»¥åœ¨å†…éƒ¨é€šè¿‡ this.props è·å–åˆ°é…ç½®å‚æ•°ï¼Œç»„ä»¶å¯ä»¥æ ¹æ® props çš„ä¸åŒæ¥ç¡®å®šè‡ªå·±çš„æ˜¾ç¤ºå½¢æ€ï¼Œè¾¾åˆ°å¯é…ç½®çš„æ•ˆæœã€‚
3. å¯ä»¥é€šè¿‡ç»™ç»„ä»¶æ·»åŠ ç±»å±æ€§ defaultProps æ¥é…ç½®é»˜è®¤å‚æ•°ã€‚
4. props ä¸€æ—¦ä¼ å…¥ï¼Œä½ å°±ä¸å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨å¯¹å®ƒè¿›è¡Œä¿®æ”¹ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡çˆ¶ç»„ä»¶ä¸»åŠ¨é‡æ–°æ¸²æŸ“çš„æ–¹å¼æ¥ä¼ å…¥æ–°çš„ propsï¼Œä»è€Œè¾¾åˆ°æ›´æ–°çš„æ•ˆæœã€‚

### State

ä¸€ä¸ªç»„ä»¶çš„æ˜¾ç¤ºå½¢æ€æ˜¯å¯ä»¥ç”±å®ƒæ•°æ®çŠ¶æ€`state`å’Œé…ç½®å‚æ•°`props`å†³å®šçš„ã€‚ä¸€ä¸ªç»„ä»¶å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€`state`ã€‚ä½†æ˜¯çŠ¶æ€ä¸èƒ½ç›´æ¥èµ‹å€¼ä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡`setState`è¿›è¡Œä¿®æ”¹ã€‚

```jsx
import React, { Component } from 'react';

class Page extends Component {
  state = {
    count: 0,
  };

  handleBtnClick = () => {
    setState({
      count: this.state.count + 1,
    });
  };

  render() {
    return (
      <div>
        <p>å½“å‰æ•°é‡ï¼š{this.state.count} </p>
        <p>
          <button onClick={this.handleBtnClick}>åŠ ä¸€</button>
        </p>
      </div>
    );
  }
}
```

### ç”Ÿå‘½å‘¨æœŸ

å¯ä»¥ä¸º class ç»„ä»¶å£°æ˜ä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•ï¼Œå½“ç»„ä»¶æŒ‚è½½æˆ–æ›´æ–°æˆ–å¸è½½æ—¶å°±ä¼šå»æ‰§è¡Œè¿™äº›æ–¹æ³•ï¼Œç§°ä¸ºç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚å½“ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥ DOM ä¸­æ—¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š â€¢ `constructor()` â€¢ `static getDerivedStateFromProps()` â€¢ `render()` â€¢ `componentDidMount()` å½“ç»„ä»¶çš„ props æˆ– state å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘æ›´æ–°ã€‚ç»„ä»¶æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š â€¢ `static getDerivedStateFromProps()` â€¢ `shouldComponentUpdate()` â€¢ `render()` â€¢ `getSnapshotBeforeUpdate()` â€¢ `componentDidUpdate()` å½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶ä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š â€¢ `componentWillUnmount()` å½“æ¸²æŸ“è¿‡ç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸï¼Œæˆ–å­ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š â€¢ `static getDerivedStateFromError()` â€¢ `componentDidCatch()`

âš ï¸ æ³¨æ„ï¼Œè¿™é‡Œçš„ç”Ÿå‘½å‘¨æœŸæŒ‡çš„æ˜¯ï¼ŒReact@17+ç‰ˆæœ¬ï¼Œå¯¹æ¯”ä¹‹å‰ç‰ˆæœ¬ï¼Œåˆ å»äº†`componentWillMount`, `componentWillReceiveProps`å’Œ`componentWillUpdate`ä¸‰ä¸ªç”Ÿå‘½é’©å­ã€‚

![react ç”Ÿå‘½å‘¨æœŸ](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/5144/1556372331485-d7c09d5c-a9fa-4301-9d36-8a7f7cfef7e6.png?x-oss-process=image/resize,w_746)

### äº‹ä»¶å¤„ç†

åœ¨ React.js é‡Œé¢ç›‘å¬äº‹ä»¶æ˜¯å¾ˆå®¹æ˜“çš„äº‹æƒ…ï¼Œä½ åªéœ€è¦ç»™éœ€è¦ç›‘å¬äº‹ä»¶çš„å…ƒç´ åŠ ä¸Šå±æ€§ç±»ä¼¼äº `onClick`ã€`onKeyDown` è¿™æ ·çš„å±æ€§ã€‚å»ºè®®åœ¨ä¹¦å†™ç›‘å¬å‡½æ•°æ—¶ï¼Œä¹Ÿä½¿ç”¨é©¼å³°å¼å†™æ³•ã€‚å‚è€ƒä¸Šé¢çš„ä¾‹å­ã€‚

âš ï¸ æ³¨æ„ï¼Œä¸Šé¢çš„ä¾‹å­`handleBtnClick`ä½¿ç”¨çš„æ˜¯ç®­å¤´å‡½æ•°ã€‚æ˜¯å› ä¸ºå…¶ä¸­ä½¿ç”¨äº†`this`æŒ‡é’ˆï¼Œåªæœ‰ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæ‰èƒ½ä¿è¯å‡½æ•°å†…éƒ¨çš„`this`æŒ‡å‘è¿™ä¸ªç»„ä»¶ã€‚å¦‚æœä¸ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œåˆ™éœ€è¦ä½¿ç”¨`bind`æ¥æŒ‡å®š`this`çš„æŒ‡å‘ã€‚

```jsx
import React, { Component } from 'react';

class Page extends Component {
  state = {
    count: 0,
  };

  // è¿™é‡Œä½¿ç”¨ä¸æ˜¯ç®­å¤´å‡½æ•°ï¼Œå¦‚æœæœªç»‘å®šthisï¼Œå†…éƒ¨çš„thisä¼šæ˜¯ undefined
  handleBtnClick() {
    setState({
      count: this.state.count + 1,
    });
  }

  render() {
    return (
      <div>
        <p>å½“å‰æ•°é‡ï¼š{this.state.count} </p>
        <p>
          <button onClick={this.handleBtnClick.bind(this)}>åŠ ä¸€</button>
        </p>
      </div>
    );
  }
}
```

å¦‚æœéœ€è¦å‘äº‹ä»¶å‡½æ•°ä¸­ä¼ é€’å‚æ•°ï¼Œåˆ™åº”è¯¥å¦‚ä¸‹å†™æ³•ï¼š

```jsx
<button onClick={this.handleBtnClick.bind(this, 'param')}>åŠ ä¸€</button>
```

### åˆ—è¡¨å’Œ key

åˆ—è¡¨æ•°æ®åœ¨å‰ç«¯éå¸¸å¸¸è§ï¼Œæˆ‘ä»¬ç»å¸¸è¦å¤„ç†è¿™ç§ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚æ–‡ç« åˆ—è¡¨ã€è¯„è®ºåˆ—è¡¨ã€ç”¨æˆ·åˆ—è¡¨â€¦ React.js å½“ç„¶ä¹Ÿå…è®¸æˆ‘ä»¬å¤„ç†åˆ—è¡¨æ•°æ®ï¼Œä½†åœ¨ä½¿ç”¨ React.js å¤„ç†åˆ—è¡¨æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æŒæ¡ä¸€äº›è§„åˆ™ã€‚

1. ä½¿ç”¨ map æ¸²æŸ“åˆ—è¡¨æ•°æ®

```jsx
const users = [
  { username: 'Jerry', age: 21, gender: 'male' },
  { username: 'Tomy', age: 22, gender: 'male' },
  { username: 'Lily', age: 19, gender: 'female' },
  { username: 'Lucy', age: 20, gender: 'female' },
];

class Index extends Component {
  render() {
    return (
      <div>
        {users.map((user) => {
          return (
            <div>
              <div>å§“åï¼š{user.username}</div>
              <div>å¹´é¾„ï¼š{user.age}</div>
              <div>æ€§åˆ«ï¼š{user.gender}</div>
              <hr />
            </div>
          );
        })}
      </div>
    );
  }
}

ReactDOM.render(<Index />, document.getElementById('root'));
```

ä»¥ä¸Šä»£ç è™½ç„¶å¯ä»¥æ­£ç¡®åœ°æ¸²æŸ“å‡ºç»“æœï¼Œä½†æ˜¯æ‰“å¼€æ§åˆ¶å°å°±å‘ç°ï¼ŒæŠ¥å‡ºäº†å¾ˆå¤šé”™è¯¯`a key should be provided for list items`ã€‚æ„æ€æ˜¯ï¼Œåˆ—è¡¨çš„æ¯ä¸€é¡¹ï¼Œåº”è¯¥è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„`**key**`æ¥æ ‡è®°ï¼Œè¿™å’Œ diff ç®—æ³•æœ‰å…³ã€‚ React.js çš„æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œå®ƒé«˜æ•ˆä¾èµ–äºæ‰€è°“çš„ Virtual-DOM ç­–ç•¥ã€‚ç®€å•æ¥è¯´ï¼Œèƒ½å¤ç”¨çš„è¯ React.js å°±ä¼šå°½é‡å¤ç”¨ï¼Œæ²¡æœ‰å¿…è¦çš„è¯ç»å¯¹ä¸ç¢° DOMã€‚å¯¹äºåˆ—è¡¨å…ƒç´ æ¥è¯´ä¹Ÿæ˜¯è¿™æ ·ï¼Œä½†æ˜¯å¤„ç†åˆ—è¡¨å…ƒç´ çš„å¤ç”¨æ€§ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå…ƒç´ å¯èƒ½ä¼šåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­æ”¹å˜ä½ç½®ã€‚ä½†æ˜¯å¦‚æœè®¾ç½®äº†å”¯ä¸€çš„ keyï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±çŸ¥é“å“ªäº›å…ƒç´ æ”¹å˜äº†ï¼Œéœ€è¦é‡æ–°æ¸²æŸ“ã€‚ âš ï¸ æ³¨æ„ï¼Œä¸è¦ä½¿ç”¨`index`ä½œä¸ºå…ƒç´ çš„ keyï¼Œå°½é‡æ˜¯åå°è¿”å›æ•°æ®çš„ id ä½œä¸ºå”¯ä¸€ keyã€‚

### çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶é€šä¿¡

**çˆ¶çº§ç»„ä»¶é€šè¿‡ props ä¼ é€’ä¸å­çº§ç»„ä»¶è¿›è¡Œæ•°æ®&çŠ¶æ€çš„é€šä¿¡ï¼Œå­çº§ç»„ä»¶é€šè¿‡å›è°ƒå‡½æ•°ä¸çˆ¶å­ç»„ä»¶è¿›è¡Œé€šä¿¡ã€‚**

```jsx
class Parent extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: 1,
    };
  }

  // çˆ¶çº§ç»„ä»¶è§¦å‘å›è°ƒå‡½æ•°åè·å–åˆ°ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œå˜æ›´ stateï¼Œé‡æ–°æ¸²æŸ“
  handleChange = (data) => {
    this.setState({
      value: data,
    });
  };

  render() {
    return (
      <div>
        <h1>{this.state.value}</h1>
        <Child data={value} onChange={this.handleChange} />
      </div>
    );
  }
}

// å­çº§ç»„ä»¶é€šè¿‡ onChange å›è°ƒå‡½æ•°ä¼ é€’æ•°æ®
class Child extends React.Component {
  handleClick = () => {
    this.props.onChange(2);
  };

  render() {
    return <div onClick={this.handleClick}>{this.props.data}</div>;
  }
}
```

---

# å·¥å…·å’Œ UI

## Umi.js

> umiï¼Œä¸­æ–‡å¯å‘éŸ³ä¸ºä¹Œç±³ï¼Œæ˜¯ä¸€ä¸ªå¯æ’æ‹”çš„ä¼ä¸šçº§ react åº”ç”¨æ¡†æ¶ã€‚umi ä»¥è·¯ç”±ä¸ºåŸºç¡€çš„ï¼Œæ”¯æŒç±» next.js çš„çº¦å®šå¼è·¯ç”±ï¼Œä»¥åŠå„ç§è¿›é˜¶çš„è·¯ç”±åŠŸèƒ½ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œæ¯”å¦‚æ”¯æŒè·¯ç”±çº§çš„æŒ‰éœ€åŠ è½½ã€‚ç„¶åé…ä»¥å®Œå–„çš„æ’ä»¶ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ï¼Œç›®å‰å†…å¤–éƒ¨åŠ èµ·æ¥å·²æœ‰ 50+ çš„æ’ä»¶ã€‚

ä¸ºä»€ä¹ˆä½¿ç”¨ umi.js?

### âœ¨ ç‰¹æ€§

- ğŸ“¦ å¼€ç®±å³ç”¨ï¼Œå†…ç½® reactã€react-router ç­‰
- ğŸˆ ç±» next.js ä¸”åŠŸèƒ½å®Œå¤‡çš„è·¯ç”±çº¦å®šï¼ŒåŒæ—¶æ”¯æŒé…ç½®çš„è·¯ç”±æ–¹å¼
- ğŸ‰ å®Œå–„çš„æ’ä»¶ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸ
- ğŸš€ é«˜æ€§èƒ½ï¼Œé€šè¿‡æ’ä»¶æ”¯æŒ PWAã€ä»¥è·¯ç”±ä¸ºå•å…ƒçš„ code splitting ç­‰
- ğŸ’ˆ æ”¯æŒé™æ€é¡µé¢å¯¼å‡ºï¼Œé€‚é…å„ç§ç¯å¢ƒï¼Œæ¯”å¦‚ä¸­å°ä¸šåŠ¡ã€æ— çº¿ä¸šåŠ¡ã€eggã€æ”¯ä»˜å®é’±åŒ…ã€äº‘å‡¤è¶ç­‰
- ğŸš„ å¼€å‘å¯åŠ¨å¿«ï¼Œæ”¯æŒä¸€é”®å¼€å¯ dll ç­‰
- ğŸ  ä¸€é”®å…¼å®¹åˆ° IE9ï¼ŒåŸºäº umi-plugin-polyfills
- ğŸ å®Œå–„çš„ TypeScript æ”¯æŒï¼ŒåŒ…æ‹¬ d.ts å®šä¹‰å’Œ umi test
- ğŸŒ´ ä¸ dva æ•°æ®æµçš„æ·±å…¥èåˆï¼Œæ”¯æŒ duck directoryã€model çš„è‡ªåŠ¨åŠ è½½ã€code splitting ç­‰ç­‰

å…³äº roadhog ä¸ umi.js çš„å…³ç³»ï¼Ÿ

> roadhog æ˜¯åŸºäº webpack çš„å°è£…å·¥å…·ï¼Œç›®çš„æ˜¯ç®€åŒ– webpack çš„é…ç½®ã€‚ umi å¯ä»¥ç®€å•åœ°ç†è§£ä¸º roadhog + è·¯ç”±ï¼Œæ€è·¯ç±»ä¼¼`next.js/nuxt.js`ï¼Œè¾…ä»¥ä¸€å¥—æ’ä»¶æœºåˆ¶ï¼Œç›®çš„æ˜¯é€šè¿‡æ¡†æ¶çš„æ–¹å¼ç®€åŒ– React å¼€å‘ã€‚

umi æ¶æ„å›¾

![umiæ¶æ„å›¾](https://gw.alipayobjects.com/zos/rmsportal/zvfEXesXdgTzWYZCuHLe.png)

æ„å»ºæµç¨‹å›¾

![umiç”Ÿå‘½å‘¨æœŸ](https://gw.alipayobjects.com/zos/rmsportal/NKsqmTAttwTzYVMJMcnB.png)

åœ¨ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šè¯¦ç»†è®²åˆ°ä»é›¶æ­å»ºä¸€ä¸ª umi çš„åº”ç”¨ã€‚

è¿™é‡Œæ˜¯[å®˜æ–¹æ–‡æ¡£](https://umijs.org/zh/guide/)ï¼Œä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šçš„å…³æ³¨æ˜¯ [é…ç½®](https://umijs.org/zh/config/)

DT å‰ç«¯æ¨è¡Œä½¿ç”¨çš„å·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆâ€”â€”[pri](https://prijs.github.io/pri-docs/usage/)ã€‚å…¶å‘è‡ª umi.js

## Dva

> dva é¦–å…ˆæ˜¯ä¸€ä¸ªåŸºäº redux å’Œ redux-saga çš„æ•°æ®æµæ–¹æ¡ˆï¼Œç„¶åä¸ºäº†ç®€åŒ–å¼€å‘ä½“éªŒï¼Œdva è¿˜é¢å¤–å†…ç½®äº† react-router å’Œ fetchï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„åº”ç”¨æ¡†æ¶ã€‚

dva å°±æ˜¯ä¸€ç§ react çŠ¶æ€ç®¡ç†çš„è§£å†³æ–¹æ¡ˆï¼Œå…³äº reduxï¼Œä½ å¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„å‚è€ƒæ–‡æ¡£å­¦ä¹ æ›´å¤šã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸‹ã€‚

â€¢ [å®˜æ–¹æ–‡æ¡£](https://www.redux.org.cn/)

æœ€å¸¸è§çš„ Web ç±»ç¤ºä¾‹ä¹‹ä¸€: TodoList = Todo list + Add todo button

react æ­£å¸¸å†™æ³•ï¼š

![react](https://cdn.yuque.com/yuque/0/2018/png/103904/1528436560812-2586a0b5-7a6a-4a07-895c-f822fa85d5de.png)

redux çš„å·¥ä½œæµç¨‹ï¼š

![redux.gif](https://cdn.yuque.com/yuque/0/2018/png/103904/1528436134375-4c15f63d-72f1-4c73-94a6-55b220d2547c.png)

redux-saga çš„ç»“æ„ï¼š

![redux-saga](https://cdn.yuque.com/yuque/0/2018/png/103904/1528436167824-7fa834ea-aa6c-4f9f-bab5-b8c5312bcf7e.png)

dva æµç¨‹ï¼š

![dvaæµç¨‹å›¾.png](https://cdn.yuque.com/yuque/0/2018/png/103904/1528436195004-cd3800f2-f13d-40ba-bb1f-4efba99cfe0d.png)

åŸä½œè€…å…³äºè¿™å—çš„ä»‹ç»ï¼Œ[è¯·æŸ¥çœ‹](https://www.yuque.com/flying.ni/the-tower/tvzasn)ã€‚

## Ant Design

> antd æ˜¯åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚

ä¸ºå•¥ç”¨ Ant Designï¼Ÿ

### âœ¨ ç‰¹æ€§

- ğŸŒˆ æç‚¼è‡ªä¼ä¸šçº§ä¸­åå°äº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰é£æ ¼ã€‚
- ğŸ“¦ å¼€ç®±å³ç”¨çš„é«˜è´¨é‡ React ç»„ä»¶ã€‚
- ğŸ›¡ ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚
- âš™ï¸ å…¨é“¾è·¯å¼€å‘å’Œè®¾è®¡å·¥å…·ä½“ç³»ã€‚
- ğŸŒ æ•°åä¸ªå›½é™…åŒ–è¯­è¨€æ”¯æŒã€‚
- ğŸ¨ æ·±å…¥æ¯ä¸ªç»†èŠ‚çš„ä¸»é¢˜å®šåˆ¶èƒ½åŠ›ã€‚

è¿™é‡Œ UI ç»„ä»¶ï¼Œåœ¨é¡¹ç›®ä¸­ä¼šå¤§é‡ç”¨åˆ°ï¼Œå…·ä½“çš„ç”¨æ³•å¯ä»¥æŸ¥çœ‹[ç»„ä»¶åº“](https://ant-design.gitee.io/components/button-cn/)ï¼Œæœ‰è¯¦ç»†çš„ä½¿ç”¨ Demo å’Œæ–‡æ¡£è¯´æ˜ã€‚

âš ï¸ è¿™é‡Œä¸»è¦è¯´æ˜çš„æ˜¯ï¼Œç›®å‰é¡¹ç›®ç”¨çš„ Ant ç‰ˆæœ¬æ˜¯ 4.0+ ã€‚è€Œä¹‹å‰é¡¹ç›®ä¸­ä½¿ç”¨çš„ä¸€ç›´æ˜¯ 3+ç‰ˆæœ¬ã€‚ åœ¨ 4+ç‰ˆæœ¬ä¸­ï¼Œæ›´æ”¹äº†è®¸å¤šçš„ Apiã€‚æ¶‰åŠå¸¸ç”¨çš„ç»„ä»¶æœ‰ï¼šå›¾æ ‡ï¼ˆIconï¼‰ã€è¡¨å•ï¼ˆFormï¼‰ç­‰ã€‚å¦‚æœä½ ä¹‹å‰æœ‰ä½¿ç”¨è¿‡ Ant@3+ç‰ˆæœ¬ï¼Œåœ¨ä½¿ç”¨æ—¶ï¼Œéœ€è¦ç•™æ„ Api çš„æ”¹å˜ã€‚è¿™é‡Œæ¨èä½¿ç”¨æ–°çš„ 4+ç‰ˆæœ¬ï¼Œå› ä¸ºè§£å†³äº†è®¸å¤šä¹‹å‰ç‰ˆæœ¬çš„é—®é¢˜ï¼Œå¦‚ï¼Œicon åŠ è½½å¯¼è‡´æ‰“åŒ…æ–‡ä»¶ä½“ç§¯è¿‡å¤§ã€‚å…·ä½“è¯¦æƒ…æŸ¥çœ‹[ä» v3 åˆ° v4](https://ant-design.gitee.io/docs/react/migration-v4-cn)ã€‚

## Pont

> pont åœ¨æ³•è¯­ä¸­æ˜¯â€œæ¡¥â€çš„æ„æ€ï¼Œå¯“æ„ç€å‰åç«¯ä¹‹é—´çš„æ¡¥æ¢ Pont æŠŠ swaggerã€rapã€dip ç­‰å¤šç§æ¥å£æ–‡æ¡£å¹³å°ï¼Œè½¬æ¢æˆ Pont å…ƒæ•°æ®ã€‚Pont åˆ©ç”¨æ¥å£å…ƒæ•°æ®ï¼Œå¯ä»¥é«˜åº¦å®šåˆ¶åŒ–ç”Ÿæˆå‰ç«¯æ¥å£å±‚ä»£ç ï¼Œæ¥å£ mock å¹³å°å’Œæ¥å£æµ‹è¯•å¹³å°ã€‚

å…³äº pont æ›´å¤šçš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://github.com/alibaba/pont)

![pont.png](https://camo.githubusercontent.com/bbb2dc0083048244d9ab8bf651a31082630f99c4dd2134d20c6c08fd8414009b/68747470733a2f2f696d672e616c6963646e2e636f6d2f7466732f54423135705a47493654704b31526a535a4b5058586133557058612d313538342d313039302e706e67)

# å¼€å‘å’Œå‘å¸ƒ

## ä»é›¶å¼€å§‹æ„å»ºé¡¹ç›®

ç°æœ‰çš„ OneData ç³»åˆ—çš„ä¸‰ä¸ªäº§å“ï¼Œå‡é‡‡ç”¨çš„å‰ç«¯ä¹Ÿæ˜¯ç›®å‰è¿™ä¸€å¥—æŠ€æœ¯æ ˆï¼›æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œä»¥ `OneData` ä¸ºåŸºç¡€ã€‚

### ä½¿ç”¨ create-umi è„šæ‰‹æ¶åˆ›å»ºåŸºç¡€é¡¹ç›®

å¯ä»¥å‚çœ‹[å®˜æ–¹æ–‡æ¡£](https://umijs.org/zh/guide/create-umi-app.html),

> ä½ å¯ä»¥é€šè¿‡ `yarn create umi` æˆ– `npm create umi` ä½¿ç”¨ `create-umi`ã€‚æ¨èä½¿ç”¨ `yarn create` å‘½ä»¤ï¼Œèƒ½ç¡®ä¿æ¯æ¬¡ä½¿ç”¨æœ€æ–°çš„è„šæ‰‹æ¶ã€‚

```sh
$ yarn create umi
$ ...
$ ...
$ curl --compressed -o- -L https://yarnpkg.com/install.sh | bash
success Installed "create-umi@0.21.2" with binaries:
      - create-umi
? Select the boilerplate type ant-design-pro
? ğŸ¤“ Which language do you want to use? TypeScript
? ğŸš€ Do you need all the blocks or a simple scaffold? simple
? ğŸ¦„ Time to use better, faster and latest antd@4! Yes
Cloning into '/Users/fz/Desktop/Project/onedefine/onedefine-ts'...
remote: Enumerating objects: 189, done.
remote: Counting objects: 100% (189/189), done.
remote: Compressing objects: 100% (174/174), done.
remote: Total 189 (delta 21), reused 67 (delta 8), pack-reused 0
Receiving objects: 100% (189/189), 297.17 KiB | 31.00 KiB/s, done.
Resolving deltas: 100% (21/21), done.
> ğŸšš clone success
> Clean up...
âœ¨ File Generate Done
âœ¨  Done in 196.52s.
```

âš ï¸ æ³¨æ„è¿™é‡Œé€‰æ‹©é€‰é¡¹ï¼Œ é€‰æ‹© _ant-design-pro_ ã€_TypeScript_ã€*simple*å’Œ*Yes*ï¼Œä¸»è¦æ˜¯é€‰æ‹©ä½¿ç”¨ Typescript å’Œä½¿ç”¨ antd@4 ä»¥ä¸Šç‰ˆæœ¬ã€‚

è¿™æ˜¯åˆ›å»ºçš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š

```
root
â”œâ”€â”€ config                                      # umi é…ç½®ï¼ŒåŒ…å«è·¯ç”±ï¼Œæ„å»ºç­‰é…ç½®
â”œâ”€â”€ dist                                        # æ„å»ºé¡¹ç›®ç›®æ ‡ä½ç½® buildååˆ›å»º
â”œâ”€â”€ public                                      # å…¬å…±é™æ€èµ„æº å¦‚favicon
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ components                              # ä¸šåŠ¡é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ layouts                                 # é€šç”¨å¸ƒå±€
â”‚   â”œâ”€â”€ locales                                 # å›½é™…åŒ–èµ„æº
â”‚   â”œâ”€â”€ models                                  # å…¨å±€ dva model
â”‚   â”‚   â”œâ”€â”€ ....                                    # æ‰€æœ‰çš„modelå®šä¹‰
â”‚   â”‚   â””â”€â”€ global.ts                               # å…¨å±€å±æ€§ç›¸å…³ å¦‚ï¼Œå¯¼èˆªå±•å¼€æ§åˆ¶
â”‚   â”œâ”€â”€ pages                                   # ä¸šåŠ¡é¡µé¢å…¥å£å’Œå¸¸ç”¨æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ ...                                     # å„ç§é¡µé¢
â”‚   â”‚   â”œâ”€â”€ 404.tsx                                  # 404é¡µé¢
â”‚   â”‚   â””â”€â”€ document.ejs                            # index.html
â”‚   â”œâ”€â”€ services                                # åå°æ¥å£æœåŠ¡ è‡ªå®šä¹‰çš„æ¥å£è¯·æ±‚
â”‚   â”œâ”€â”€ pont                                    # åå°æ¥å£æœåŠ¡ä»¥åŠBO pontæ¥å£è‡ªåŠ¨åŒ–ç”Ÿæˆæ¥å£
â”‚   â”œâ”€â”€ utils                                   # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ request.ts                              # è¯·æ±‚æ–¹æ³•å‡½æ•° åŸºäºumi-request/fetch
â”‚   â”‚   â”œâ”€â”€ utils.ts                                # å·¥å…·ç±»å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ utils.less                              # å·¥å…·ç±»æ ·å¼
â”‚   â”‚   â””â”€â”€ utils.test.ts                          # å·¥å…·ç±»å‡½æ•°æµ‹è¯•æ–¹æ³•
â”‚   â”œâ”€â”€ global.less                             # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ global.tsx                              # å…¨å±€JS ä¸»è¦æ˜¯serviceWorkerç›¸å…³é…ç½®
â”‚   â””â”€â”€ typings.d.ts                            # tså£°æ˜æ–‡ä»¶
â”œâ”€â”€ tests                                       # æµ‹è¯•å·¥å…·
â”œâ”€â”€ README.md
â”œâ”€â”€ pont-config.json                                # pontçš„é…ç½®æ–‡ä»¶
â””â”€â”€ package.json                                    # npmé…ç½®æ–‡ä»¶

```

ç»§ç»­ä¿®æ”¹ä¸‹é¡¹ç›®ï¼Œåˆ é™¤ä¸éœ€è¦çš„æ¨¡å—ï¼Œå¦‚ç”¨æˆ·ç™»é™†ç•Œé¢ã€æƒé™è·¯ç”±æ§åˆ¶ç­‰ã€‚

### æ¥å…¥æ¥å£å±‚è‡ªåŠ¨ç”Ÿæˆå·¥å…· pont

**è¿™é‡Œéœ€è¦åç«¯æä¾›çš„æ¥å£å°½é‡æ ‡å‡†ï¼ˆopenapiï¼‰ï¼Œå…³äº api æ–‡æ¡£ï¼Œå®˜æ–¹æ¨è swagger2+ç‰ˆæœ¬ï¼Œè¯·æ±‚æ–¹æ³•æ˜ç¡®ï¼›è™½ç„¶ç†è®ºä¸Šå¯ä»¥å®ç° RESTful é£æ ¼çš„æ¥å£ï¼Œä½†æ˜¯æš‚æ—¶ä¸å¤ªå¥½å®è·µ ï¼Œåç«¯æš‚æ—¶ä¸è¦ä½¿ç”¨ã€‚**

1. åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ `pont-config.json`å’Œå…¶ä¸­æŒ‡å®šçš„`templatePath`æ–‡ä»¶`pontTemplate.ts`.

åˆ«å¿˜äº†åœ¨ global.tsx ä¸­æ·»åŠ 

```js
import '@/pont';
```

pont-config.json

```json
{
  "outDir": "./src/pont",
  "originUrl": "http://localhost:7001/v2/api-docs",
  "templatePath": "./pontTemplate"
}
```

pontTemplate.ts

```js
import { CodeGenerator, Interface } from 'pont-engine';

export default class MyGenerator extends CodeGenerator {
  getInterfaceContentInDeclaration(inter: Interface) {
    const paramsCode = inter.getParamsCode();
    const bodyParamsCode = inter.getBodyParamsCode();
    const hasGetParams = !!inter.parameters.filter((param) => param.in !== 'body').length;
    const requestParams = bodyParamsCode
      ? `{ ${hasGetParams ? 'params, ' : ''}data }:{ params${
          hasGetParams ? '' : '?'
        }: Params, data: ${bodyParamsCode} }`
      : `{ ${hasGetParams ? 'params' : ''} }:{ params${hasGetParams ? '' : '?'}: Params }`;

    return `
      export ${paramsCode}

      export type Response = ${inter.responseType}

      export const init: Response;

      export function request(${requestParams}): Promise<Response>;

      `;
  }

  getInterfaceContent(inter: Interface) {
    const paramsCode = inter.getParamsCode();
    const bodyParamsCode = inter.getBodyParamsCode();
    const method = inter.method.toUpperCase();
    const requestParams = bodyParamsCode
      ? `{params={},data}:{params: Params,data: ${bodyParamsCode}}`
      : `{params={}}:{params: Params}`;

    return `
      /**
      * @description ${inter.description}
      */

    import Request from '@/utils/request';
    import * as defs from '../../baseClass';

    export ${paramsCode};

    export const init = ${inter.response.initialValue};

    export async function request(${requestParams}): Promise<any> {
      return Request('${inter.path}',{
        method: '${method}',
        params,
        ${bodyParamsCode ? 'data,' : ''}
      });
    }

   `;
  }
}
```

2. æ·»åŠ é¡¹ç›®å¯¹ pont çš„æ”¯æŒï¼Œè¿™é‡Œçš„`pont-engine`,éœ€è¦æ‰§è¡Œ

```sh
npm install pont-engine --save-dev
```

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒpontTemplate.ts ä¸­çš„`getInterfaceContent`ï¼Œè¡¨ç¤ºäº†ä½ è¯¥å¦‚ä½•è°ƒç”¨ä½ çš„ fetch ä»¥åŠå…¥å‚æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯`umi-request`,ä½ å¯ä»¥æŸ¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://github.com/umijs/umi-request),äº†è§£ fetch çš„è¯¦ç»†ç”¨æ³•ã€‚

ç›®å‰æ„å»ºçš„é¡¹ç›®ä¸­ï¼Œæ´¾å‘è¯·æ±‚ä¼ é€’å‚æ•°æ–¹æ³•å¦‚ä¸‹ï¼š

```js
dispatch({
  type: 'global/fetchMicroData',
  payload: {
    // queryå‚æ•°æ”¾åœ¨paramsä¸­ï¼Œ å¦‚getè¯·æ±‚
    params: {
      id: 1,
      name: 'test',
    },
    // bodyå‚æ•°æ”¾åœ¨dataä¸­ï¼Œ å¦‚postè¯·æ±‚
    data: {
      username: 'biubiu',
      age: 10,
    },
  },
});
```

âš ï¸ æ³¨æ„ quary å‚æ•°å’Œ body å‚æ•°ä¼ é€’å¹¶ä¸å†²çªï¼Œå¯ä»¥ä¸¤è€…åŒæ—¶ä¼ é€’ã€‚

è¿™é‡Œéœ€è¦åç«¯é…åˆæ¥å…¥ openapi æ¥å£æ–‡æ¡£æ‰èƒ½ä½¿ç”¨ pont è‡ªåŠ¨ç”Ÿæˆï¼Œå¦‚è¿™é‡Œä½¿ç”¨çš„ swaggerï¼Œæ¥å…¥åï¼Œä¼šåœ¨æŒ‡å®šçš„æ–‡ä»¶å¤¹ï¼ˆæˆ‘ä»¬è¿™é‡ŒæŒ‡å®šçš„æ˜¯`pont`ï¼‰ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º`api-lock.json`çš„æ–‡ä»¶ï¼Œå°±æ˜¯ç”¨æ¥æè¿°åç«¯`æ¥å£`å’Œ`BOå¯¹è±¡`ã€‚

3. å‰ç«¯éœ€è¦é…åˆ vscode çš„æ’ä»¶ï¼Œæ‰èƒ½ç”Ÿæˆå¯¹åº”çš„ serviceã€‚ç”Ÿæˆçš„ pont æ¥å£æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š

```
pont
â”œâ”€â”€ mods                            # è‡ªåŠ¨åŒ–ç”Ÿæˆçš„æ¥å£è¯·æ±‚æ–¹æ³•
â”œâ”€â”€ api-lock.json                          # æ ¹æ®swaggeræ–‡æ¡£ï¼Œç”Ÿæˆçš„pontæ¥å£æè¿°æ–‡ä»¶
â”œâ”€â”€ api.d.ts                               # pontå£°æ˜æ–‡ä»¶ï¼Œæè¿°BOå¯¹è±¡å’ŒAPIè¯·æ±‚
â”œâ”€â”€ baseClass.ts                           # BOå¯¹è±¡ç»“æ„
â””â”€â”€ index.ts
```

### ä»£ç†è¯·æ±‚

å‰ç«¯éœ€è¦è¿æ¥åç«¯æœåŠ¡è°ƒè¯•æ—¶ï¼Œå°±ä¼šé‡åˆ°è·¨åŸŸç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚è¿™é‡Œä»‹ç»ä¸‹é¡¹ç›®ä¸­å¦‚ä½•è§£å†³å‰åç«¯è”è°ƒé—®é¢˜çš„ã€‚

ç›®å‰è¿™é‡Œæœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆã€‚

1. ä¿®æ”¹ host  
   è®¿é—®çº¿ä¸Šé¡¹ç›®ï¼Œè·å–åˆ° cookie åï¼Œä¿®æ”¹ hostï¼Œè®©çº¿ä¸Šåœ°å€æŒ‡å‘æœ¬åœ° localhostã€‚  
   å¦‚è®¿é—® `yourdomain.com`åï¼Œä¿®æ”¹ hostï¼Œ å°†`yourdomain.com`æŒ‡å‘ `localhost`.è¿™ç§æ–¹æ³•å¾ˆéº»çƒ¦ã€‚ä¸”éœ€è¦é¢‘ç¹ä¿®æ”¹ hostã€‚æ‰€ä»¥ä¸€èˆ¬ä¸è¿™æ ·åšã€‚

2. ä»£ç†è¯·æ±‚åœ¨åº”å¯¹è¿™ç§æƒ…å†µæ—¶ï¼Œå‰ç«¯å¼€å‘å·²ç»æœ‰äº†å¥½çš„è§£å†³æ–¹æ³•ï¼Œé€šè¿‡æä¾›çš„ umi æ’ä»¶ï¼Œå®ç°ä»£ç†è¯·æ±‚ã€‚  
   åœ¨ `config` ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ª `proxy.ts` æ–‡ä»¶ï¼Œç”¨æ¥å®šä¹‰æ¥å£ä»£ç†çš„é…ç½®ã€‚è¿™ä¸ªåŠŸèƒ½åªåœ¨`dev`ç¯å¢ƒç”Ÿæ•ˆï¼Œçº¿ä¸Šéœ€è¦è‡ªå·±é…ç½®å®ç°ï¼Œå¦‚`nginxåå‘ä»£ç†`ã€‚

```js
export default {
  dev: {
    '/commonapi': {
      target: 'http://localhost:7001/commonapi',
      changeOrigin: true,
      pathRewrite: { '^/commonapi': '' },
    },
    '/serachapi': {
      target: 'http://localhost:7001/serachapi',
      changeOrigin: true,
      pathRewrite: { '^/serachapi': '' },
    },
  },
  pre: {
    '/': {
      target: 'http://localhost:7001/',
      changeOrigin: true,
      pathRewrite: { '^': '' },
    },
  },
};
```

ä¸Šé¢æ˜¯æ­¤é¡¹ç›®ä¸­çš„é…ç½®ï¼Œæ­£åˆ™åŒ¹é…è·¯ç”±ï¼Œä»£ç†åˆ°æŒ‡å®šçš„åœ°å€ä¸‹ï¼Œè¿™é‡Œçš„é…ç½®åªæ·»åŠ äº†`/commonapi`å’Œ`/searchapi`å¼€å¤´çš„é…ç½®ã€‚åç»­éœ€è¦ï¼Œå¯ä»¥å†æ­¤æ·»åŠ ã€‚

### åˆ›å»ºä¸€ä¸ªé¡µé¢

ä»¥ onedefine ä¸ºä¾‹ï¼Œæ·»åŠ ä¸€ä¸ªé¡µé¢ã€‚æ·»åŠ `æ•°æ®å¤§ç›˜`è¿™ä¸ªç•Œé¢ï¼›

1. åœ¨ `page` ä¸­æ·»åŠ æ–‡ä»¶å¤¹ `dashboard`,åœ¨å…¶ä¸‹æ·»åŠ é¡µé¢`index.tsx`ï¼›

2. åœ¨ `config/router.config.ts` ä¸­æ·»åŠ ä¸Šè·¯ç”±é…ç½®ï¼Œå¹¶åœ¨`src/locales`ä¸­ï¼Œé…ç½®å›½é™…åŒ–æ”¯æŒï¼›  
   å…·ä½“æ·»åŠ é¡µé¢å’Œé…ç½® router å¯ä»¥æŸ¥çœ‹æœ¬æ¬¡æäº¤

3. åœ¨ `models` ä¸­æ–°å»º `dashboard.ts` ï¼Œä½œä¸ºæ•°æ®å¤§ç›˜é¡µé¢çš„ stateï¼›

4. åœ¨ model ä¸­å®šä¹‰éœ€è¦çš„å‰ç«¯å¯¹è±¡ï¼Œè¿™é‡Œå»ºè®®ä¸è¦ç›´æ¥ä½¿ç”¨ pont ä¸­å®šä¹‰å¥½çš„å¯¹è±¡ï¼›ç”¨ä¸‹é¢è¿™æ ·ç»§æ‰¿çš„æ–¹å¼ï¼Œæ–¹ä¾¿åé¢è°ƒè¯•å’Œæ›´æ”¹ï¼›å‘½åæ–¹å¼å¯ä»¥å°† BO æ”¹ä¸º VOã€‚

```js
// è¿™é‡Œå®šä¹‰å‰ç«¯éœ€è¦ä½¿ç”¨çš„VO å¦‚è¿™é‡Œçš„å¤§ç›˜å±•ç¤ºéœ€è¦çš„æ•°æ®å¯¹è±¡ã€‚
export class AnalysisVO extends IndexPageCountBO {}
```

5. ç¼–å†™ model æ¨¡å—çš„`effects`å’Œ`reducers`ã€‚

```js
{
effects: {
      *fetchDashboardAnalysis({payload={}},{call,put}){
            const response:CustomWebResult<AnalysisVO> = yield call(API.commonApiRpc.getDefineCount.request,payload);
            if(response){
            yield put({
                  type: 'SAVE_STATE',
                  payload: {
                        analysis: response.data || new AnalysisVO
                  }
            })
            }
      }
},
reducers: {
      SAVE_STATE(state, action) {
            return {
            ...state,
            ...action.payload,
            };
      },
},
}

```

6. åœ¨`connect.d.ts`ä¸­,å£°æ˜ dashboard çš„ state ç»“æ„ï¼›

7. åœ¨é¡µé¢ä¸­ç”¨ dva æä¾›çš„é«˜é˜¶å‡½æ•°åŒ…è£…é¡µé¢ç»„ä»¶ï¼›

```js
export default connect(({ dashboard, loading }: ConnectState) => ({
  analysisData: dashboard.analysis,
  loading: loading.effects['dashboard/fetchDashboardAnalysis'],
}))(Analysis);
```

8. é¡µé¢æ­£ç¡®çš„ä½ç½®æ´¾å‘è¯·æ±‚ï¼Œå¹¶è·å–æ•°æ®å±•ç¤ºï¼›

```js
useEffect(() => {
  if (dispatch) {
    dispatch({
      type: 'dashboard/fetchDashboardAnalysis',
    });
  }
}, []);
```

ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªæ¨¡å—ä»é›¶æ­å»ºçš„è¿‡ç¨‹ï¼Œè¿™è¾¹å»ºè®®ï¼Œpage å’Œ model å°½é‡æ˜¯ä¸€ä¸€å¯¹åº”ä¸Šçš„ã€‚å½“ç„¶å…¶ä¸­ä¼šæœ‰ä¸€äº›å¦‚`global`,`common`ç­‰ç”¨æ¥ç®¡ç†å…¨å±€çŠ¶æ€å’Œé€šç”¨çŠ¶æ€çš„ modelã€‚

## å‘å¸ƒ

### å¦‚ä½•éƒ¨ç½²

å¯¹äº`umi.js`çš„é¡¹ç›®è€Œè¨€ï¼Œé¡¹ç›®æ„å»ºåªéœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ `npm run build`ï¼Œå°±å¯ä»¥æ‰“åŒ…æ„å»ºé¡¹ç›®äº†ï¼Œä¼šåœ¨æ ¹ç›®å½•ä¸‹ç”Ÿæˆ`dist`æ–‡ä»¶å¤¹ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®æŒ‰éœ€åŠ è½½ï¼Œé‚£ä¹ˆåªä¼šæ‰“åŒ…å‡º `index.html`ã€`umi.js`å’Œ`umi.css` ä¸‰ä¸ªæ–‡ä»¶ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œåªéœ€è¦å°†è¿™äº›é™æ€èµ„æºå‘å¸ƒåˆ° web æœåŠ¡å™¨å³å¯ã€‚

å› ä¸ºç›®å‰é¡¹ç›®ä½¿ç”¨çš„æ˜¯`volecity`çš„æ¨¡ç‰ˆå¼•æ“ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œæ˜¯å‰åç«¯ä¸åˆ†ç¦»çš„å†™æ³•ã€‚åœ¨å·²ç»æä¾›äº†`index.html`çš„æƒ…å†µï¼Œæˆ‘ä»¬åªéœ€è¦å‘æ¨¡ç‰ˆé¡µé¢æä¾›**js**å’Œ**css**ï¼Œå¹¶åœ¨é¡µé¢ä¸­æ·»åŠ  `react çš„æ ¹èŠ‚ç‚¹å…ƒç´ `å³å¯ã€‚é‚£æˆ‘ä»¬éƒ¨ç½²çš„æµç¨‹å¦‚ä¸‹ï¼š

1. å‰ç«¯æ‰“åŒ…;
2. å°†æ‰“åŒ…å¥½çš„`umi.js`å’Œ`umi.css`æ–‡ä»¶ç§»åŠ¨åˆ°å·¥ç¨‹é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹;
3. `volecity`æ¨¡ç‰ˆä¸­å¼•å…¥ js å’Œ css;
4. åç«¯ aone å‘å¸ƒã€‚

æ³¨æ„å‰ç«¯éœ€è¦é…ç½®ä¸ºç¦æ­¢æ‰“åŒ… hash å’Œä½¿ç”¨ hash è·¯ç”±ï¼Œå¦‚æœé™æ€èµ„æºæœªé…ç½®ï¼Œé‚£ä¹ˆå»ºè®®ä¹Ÿä¸è¦é¡µé¢æŒ‰éœ€åŠ è½½æ‰“åŒ…äº†ã€‚  
å½“ç„¶ä¹Ÿæœ‰é€šè¿‡é…ç½® `config.ts`ä¸­çš„`base`ï¼Œéƒ¨ç½²åˆ°éæ ¹ç›®å½•ï¼Œå†åœ¨`controller`ä¸­ï¼Œæ·»åŠ å¯¹åº”çš„è·¯å¾„æ˜ å°„ï¼Œé¿å…äº†é¡µé¢è·¯ç”±å’Œ api è¯·æ±‚å†²çªã€‚

### ç‰ˆæœ¬æ§åˆ¶

ç›®å‰é€šè¿‡é™æ€èµ„æºæ–‡ä»¶å¤¹åå®ç°ç‰ˆæœ¬æ§åˆ¶ã€‚

å‰ç«¯é¡¹ç›®çš„`package.json`ä¸­ï¼Œä¼šé…ç½®ä¸€æ¡å‘½ä»¤`deploy`,å½“ä½ è¿è¡Œ`npm run deploy`ï¼Œå°±ä¼šæŒ‰ç…§ç‰ˆæœ¬å·ä½œä¸ºæ–‡ä»¶å¤¹åï¼Œæ‰“åŒ…é™æ€èµ„æºåˆ°ç±»è·¯å¾„ä¸‹çš„`static`æ–‡ä»¶å¤¹ä¸‹ã€‚

```json
{
  "name": "xxxx",
  "version": "0.0.2",
  "private": true,
  "description": "xxxå‰ç«¯é¡¹ç›®",
  "scripts": {
    "build": "umi build",
    "deploy": "umi build && mkdir ../onedefine-start/src/main/resources/static/${npm_package_version} &&  cp  -r dist/* ../onedefine-start/src/main/resources/static/${npm_package_version}",
    "dev": "npm run start:dev"
  },
  â€¦â€¦
}
```

java ä»£ç å¦‚ä¸‹ï¼š

```java
 	@Value("${front.version}")
    private String projectFrontVersion;
	/**
     * é¦–é¡µé¡µé¢
     **/
    @GetMapping("/")
    public ModelAndView root() throws Exception {
        ModelAndView mav = new ModelAndView("index");
        mav.addObject("projectfrontversion", projectFrontVersion);
        return mav;
    }
```

`index.vm`å¦‚ä¸‹ï¼š

```html
	## åˆ¤æ–­å‰ç«¯ç‰ˆæœ¬
  #if(!$!projectfrontversion)
    <h1>å‰ç«¯ç‰ˆæœ¬è·å–å¤±è´¥</h1>
  #else
    <link rel="stylesheet" href="/static/$!projectfrontversion/umi.css"/>
    <script type="text/javascript" src="/static/$!projectfrontversion/umi.js"></script>
  #end
```

ä»¥ä¸Šéƒ¨ç½²æ–¹æ³•æ¯”è¾ƒæ­»æ¿ï¼Œéœ€è¦ä¿®æ”¹å¾ˆå¤šæ–‡ä»¶ã€‚æŒ‰ç…§ä¹‹å‰çš„ def å‘å¸ƒç»éªŒï¼Œå³ä½¿ä¸ä½¿ç”¨ diamond çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ä¸­å¿ƒçš„æ–¹å¼æ§åˆ¶ç‰ˆæœ¬ã€‚è¿™é‡Œä¸å¤šä»‹ç»ã€‚

# ç›¸å…³é“¾æ¥

- [Umi.js](https://umijs.org/zh/guide/)
- [Ant Design](https://ant.design/docs/react/introduce-cn)
- [Pont](https://github.com/alibaba/pont)
- [React.js](https://react.docschina.org/docs/getting-started.html)
- [Typescript](https://www.tslang.cn/docs/home.html)
- ...
