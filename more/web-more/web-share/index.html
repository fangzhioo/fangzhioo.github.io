<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="方志的个人博客,fangzhioo,blog">
    <meta name="keyword"  content="方志,fangzhioo,Fz&#39;s Blog,Kirito,桐人,博客,互联网,Web,JavaScript,Html,Css,Vue.js,React.js,前端,设计,React.js, TypeScript, Antd, Umi.js, Pont">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          【分享】在DT完成一系列产品后，分享下团队前端部分的技术选型～ - 方志 | fangzhioo
        
    </title>

    <link rel="canonical" href="https://fangzhioo.github.io/more/web-more/web-share/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
<link rel="stylesheet" href="/css/beantech.min.css">


    
<link rel="stylesheet" href="/css/donate.css">

    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/toc.css">


    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>

    <!--不蒜子-->
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- jQuery -->
    <!-- 
<script src="/js/jquery.min.js"></script>
 -->
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <!-- 
<script src="/js/bootstrap.min.js"></script>
 -->
    <script src="https://cdn.bootcss.com/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <!-- google ad -->
    <script data-ad-client="ca-pub-3409699730406381" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('//www.talklee.com/api/bing?rand=true')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Share" title="Share">Share</a>
                            
                        </div>
                        <h1>【分享】在DT完成一系列产品后，分享下团队前端部分的技术选型～</h1>
                        <h2 class="subheading">主要是分享这段时间，开发所运用的技术栈，个人觉得比较实用，分享给大家参考下～</h2>

                        <!--文章访问量统计-->
                        
                            <span id="busuanzi_container_page_pv">本文已被阅读过<span id="busuanzi_value_page_pv"></span>次</span>
                        
                        <!--文章访问量统计-->

                        <span class="meta">
                            Posted by 方志 on
                            2020-05-17
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Fz Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    
                        <li>
                            <a href="/archive/" >Archives</a>
                        </li>
                    
                        <li>
                            <a href="/tags/" >Tags</a>
                        </li>
                    
                        <li>
                            <a href="/about/" >About</a>
                        </li>
                    

                    <!-- 

                        
                    

                        
                    

                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                    

                        
                    

                        
                        <li>
                            <a href="/love/">✨致我的小可爱💕～</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                     -->
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h1><span id="kai-fa-huan-jing-zhun-bei">开发环境准备</span></h1><h2><span id="node">node</span></h2><h3><span id="an-zhuang-node-js-npm">安装 node.js / npm</span></h3><p>尽量安装 10.x 以上版本。如果已经安装好了 node.js，那么其中已经自带<strong>npm</strong>（包管理工具）。</p>
<hr>
<h2><span id="vscode-dai-ma-bian-ji-qi">vscode 代码编辑器</span></h2><p>前端代码推荐使用 vscode 开发，因为需要配合后面用到的<strong>pont</strong>接口层生成工具，还有就是对 <code>typescript</code> 比较友好。</p>
<p>可以去官网自行下载安装 <a target="_blank" rel="noopener" href="https://code.visualstudio.com/">官方站点</a>。</p>
<p>在插件拓展里，可以搜索安装需要的插件。来对 <code>React.js</code> 、<code>typescript</code> 等更加友好的支持。</p>
<p>常见的插件有如下：</p>
<ul>
<li>软件中文包：Chinese (Simplified) Language Pack for Visual Studio Code</li>
<li>代码 lint：ESLint</li>
<li>路径补全：Path Autocomplete</li>
<li>代码美化：prettier</li>
<li>接口工具：Pont</li>
<li>React 支持： ES7 React/Redux/GraphQL/React-Native snippets</li>
<li>Git 拓展： GitLens — Git supercharged</li>
<li>开发辅助： Visual Studio IntelliCode</li>
<li>……</li>
</ul>
<hr>
<h1><span id="qian-duan-yu-yan-he-kuang-jia">前端语言和框架</span></h1><hr>
<h2><span id="es6">ES6</span></h2><p>对于 <code>javascript</code> ，我们并不陌生，这里说的 <code>ES6</code>，甚至 ES7、ES8 等又是什么回事？</p>
<blockquote>
<p>ECMAScript 6.0（简称 ES6）是 JavaScript 语言的下一代标准，已经在 2015 年 6 月正式发布。它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言。</p>
</blockquote>
<p>这里特别说到 ES6，是因为从 ES5 到 ES6，有了很大的变化，且我们的项目中，都是以 ES6 为标准书写的代码。所以我们这里简单介绍少 ES6 中的常用写法，方便后续代码的理解和书写。</p>
<h3><span id="const-let-he-var">const、let 和 var</span></h3><p><code>const</code>、<code>let</code>和<code>var</code>都是用来声明变量的作用。<code>const</code>和<code>let</code>是 ES6 开始引入的概念。 <code>const</code> 用来表示常量，一旦声明就无法改变值。 但这是指基本数据类型，对数组和对象修改属性和数组项并不受影响。<br><code>let</code> 用法相当与<code>var</code>，只是<code>let</code>只在块级作用域起作用，不存在变量提升。在项目中，尽量不要使用<code>var</code>。用<code>let</code>和<code>const</code>就足够了。</p>
<h3><span id="jie-gou">解构</span></h3><blockquote>
<p>ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br><span class="line"><span class="comment">// 变量赋值可以写成解构形式</span></span><br><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [foo, [[bar], baz]] = [<span class="number">1</span>, [[<span class="number">2</span>], <span class="number">3</span>]];</span><br><span class="line">foo; <span class="comment">// 1</span></span><br><span class="line">bar; <span class="comment">// 2</span></span><br><span class="line">baz; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [, , third] = [<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;baz&#x27;</span>];</span><br><span class="line">third; <span class="comment">// &quot;baz&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, , y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">x; <span class="comment">// 1</span></span><br><span class="line">y; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">head; <span class="comment">// 1</span></span><br><span class="line">tail; <span class="comment">// [2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y, ...z] = [<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">x; <span class="comment">// &quot;a&quot;</span></span><br><span class="line">y; <span class="comment">// undefined</span></span><br><span class="line">z; <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构不仅可以用于数组，还可以用于对象</span></span><br><span class="line"><span class="keyword">let</span> &#123; bar, foo &#125; = &#123; <span class="attr">foo</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">bar</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line">foo; <span class="comment">// &quot;aaa&quot;</span></span><br><span class="line">bar; <span class="comment">// &quot;bbb&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">bar</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;;</span><br><span class="line">baz; <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>项目中，会频繁的用到解构赋值，所以这个非常重要，需要理解解构的语法。</p>
<h3><span id="jian-tou-han-shu">箭头函数</span></h3><blockquote>
<p>ES6 允许使用“箭头”（=&gt;）定义函数。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function">(<span class="params">v</span>) =&gt;</span> v;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> v;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>值得一提的是，项目中，涉及到 <code>class</code> 组件时，会有 <code>this</code> 指针的问题，所以能用箭头函数，<strong>尽量用箭头函数定义函数</strong>。</p>
<h3><span id="dui-xiang-de-tuo-zhan">对象的拓展</span></h3><blockquote>
<p>ES6 允许直接写入变量和函数，作为对象的属性和方法。这样的书写更加简洁。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="string">&#x27;bar&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> baz = &#123; foo &#125;;</span><br><span class="line">baz; <span class="comment">// &#123;foo: &quot;bar&quot;&#125;</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="keyword">const</span> baz = &#123; <span class="attr">foo</span>: foo &#125;;</span><br></pre></td></tr></table></figure>

<p>这里对象的拓展用法，在项目用的比较普遍。</p>
<h3><span id="promise-dui-xiang">Promise 对象</span></h3><blockquote>
<p>Promise 是异步编程的一种解决方案，比传统的解决方案（回调函数和事件）更合理和更强大。 Promise，简单说就是一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果。从语法上说，Promise 是一个对象，从它可以获取异步操作的消息。Promise 提供统一的 API，各种异步操作都可以用同样的方法进行处理。 Promise 对象有以下两个特点。（1）对象的状态不受外界影响。Promise 对象代表一个异步操作，有三种状态：pending（进行中）、fulfilled（已成功）和 rejected（已失败）。只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。这也是 Promise 这个名字的由来，它的英语意思就是“承诺”，表示其他手段无法改变。（2）一旦状态改变，就不会再变，任何时候都可以得到这个结果。Promise 对象的状态改变，只有两种可能：从 pending 变为 fulfilled 和从 pending 变为 rejected。只要这两种情况发生，状态就凝固了，不会再变了，会一直保持这个结果，这时就称为 resolved（已定型）。如果改变已经发生了，你再对 Promise 对象添加回调函数，也会立即得到这个结果。这与事件（Event）完全不同，事件的特点是，如果你错过了它，再去监听，是得不到结果的。 Promise 对象是一个构造函数，用来生成 Promise 实例。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个Promise函数</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... some code</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* 异步操作成功 */</span>)&#123;</span><br><span class="line">    resolve(value);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以用then方法分别指定resolved状态和rejected状态的回调函数。</span></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// resolve(value);</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// reject(error);</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>项目大量用到这个，就是 fetch 请求了。</p>
<h3><span id="async-await">async / await</span></h3><blockquote>
<p>ES2017 标准引入了 async 函数，使得异步操作变得更加方便，它就是 Generator 函数的语法糖。 async 函数的返回值是 Promise 对象，这比 Generator 函数的返回值是 Iterator 对象方便多了。你可以用 then 方法指定下一步的操作。async 函数完全可以看作多个异步操作，包装成的一个 Promise 对象，而 await 命令就是内部 then 命令的语法糖。</p>
</blockquote>
<p>这是一种异步转同步的方案，我们项目中可能需要留意的是，Generator 函数，在 dva 定义的 modal 中，<code>yield</code> 关键词的作用，就类似这里的异步转同步。</p>
<h3><span id="class-de-yu-fa">Class 的语法</span></h3><blockquote>
<p>ES6 提供了更接近传统语言的写法，引入了 Class（类）这个概念，作为对象的模板。通过 class 关键字，可以定义类。ES6 的 class 可以看作只是一个语法糖，它的绝大部分功能，ES5 都可以做到，新的 class 写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已。</p>
</blockquote>
<p>概念类比 java 中的 <code>class</code>，这里我们可能更需要关注的是 React 类组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Page</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>page<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Page;</span><br></pre></td></tr></table></figure>

<p>这里定义的 Page 类，继承自 React 的 Component。拥有 React 组件提供的各种钩子。</p>
<h3><span id="module-de-yu-fa">Module 的语法</span></h3><blockquote>
<p>ES6 模块的设计思想是尽量的静态化，使得编译时就能确定模块的依赖关系，以及输入和输出的变量。模块功能主要由两个命令构成：export 和 import。export 命令用于规定模块的对外接口，import 命令用于输入其他模块提供的功能。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> appName = <span class="string">&#x27;Fz\&#x27;Blog&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">const</span> SystemName = <span class="string">&#x27;cloud-blog&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>使用 <code>export</code> 命令定义了模块的对外接口以后，其他 JS 文件就可以通过<code>import</code>命令加载这个模块。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; appName &#125; <span class="keyword">from</span> <span class="string">&#x27;./a.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> SystemName <span class="keyword">from</span> <span class="string">&#x27;./a.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>更多详细的内容可以看这个——<a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/">ECMAScript 6 入门教程</a></p>
<hr>
<h2><span id="typescript">TypeScript</span></h2><p><code>typescript</code> 面对 <code>javascript</code> 有什么优势？为什么选择前者，比较下两者的不同。</p>
<blockquote>
<p>Typescript 是 Javascript 的超集。（Typescript = Type + Javascript）</p>
</blockquote>
<p>更加详细的文档，可以<a target="_blank" rel="noopener" href="https://ts.xcatliu.com/introduction/what-is-typescript">查看这里</a> 在线示例可以<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/play/">查看这里</a></p>
<h3><span id="ji-ben-yu-fa">基本语法</span></h3><p>前面提到了，<code>Typescript</code> 就是在 <code>Javascript</code> 加了一层<strong>type</strong>。 大家对 java 比较熟悉，java 是一个典型的强类型语言，任何变量都需要有自己的类型声明，但是 <code>Javascript</code> 却是一个弱类型语言。 一个 <code>number</code> 类型的变量可以被赋值为 <code>string</code> 类型，这就带来了诸多的麻烦。<br><code>Typescript</code> 就是解决类型匹配很好的方案。我们可以看下面一段 java 代码和 typescript 代码。</p>
<p>Java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">&quot;我是字符串&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String name = <span class="string">&quot;biubiu&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">cry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;喵喵喵～&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TypeScript:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str: <span class="built_in">string</span> = <span class="string">&#x27;我是字符串&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> name: <span class="built_in">string</span> = <span class="string">&#x27;biubiu&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ? 表示该属性可能不存在 即 undefined</span></span><br><span class="line">  age?: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  cry(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;喵喵喵～&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类型声明时，<code>Typescript</code> 与 <code>Java</code> 刚好相反，<code>Java</code> 的类型定义在变量前，<code>Typescript</code> 的类型定义在变量后。</p>
<h3><span id="ji-ben-lei-xing">基本类型</span></h3><p>Java =&gt; Typescript<br>Java: Float, Integer, Double ==&gt; Typescript：number<br>Java: String ==&gt; Typescript: string<br>Java: Boolean ==&gt; Typescript: boolean</p>
<p>示例：<br>Java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> userMan = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">int</span> userAge = <span class="number">81</span>;</span><br><span class="line"><span class="keyword">float</span> userAverage = <span class="number">10.5</span>;</span><br><span class="line">String userName = <span class="string">&quot;桐人&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>Typescript：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> userMan: <span class="built_in">boolean</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> userAge: <span class="built_in">number</span> = <span class="number">81</span>;</span><br><span class="line"><span class="keyword">let</span> userAverage: <span class="built_in">number</span> = <span class="number">10.5</span>;</span><br><span class="line"><span class="keyword">let</span> userName: <span class="built_in">string</span> = <span class="string">&#x27;桐人&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3><span id="ren-yi-zhi">任意值</span></h3><blockquote>
<p>由于前端数据来源比较广而脆弱，对数据类型的灵活性要求也比较高，Typescript 发明了 any 类型，来应对各种类型不匹配的 edge case，快速解决类型问题无法编译通过的问题。</p>
</blockquote>
<p>在不清楚数据类型时，可以用<code>any</code>来定义。不过不建议大量使用。不然使用 <code>typescript</code> 就没有什么意义了。</p>
<h3><span id="fu-he-lei-xing">复合类型</span></h3><p>enum 语法比较一致</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java</span></span><br><span class="line"><span class="built_in">enum</span> WeekDayEnum &#123;</span><br><span class="line">  Mon,</span><br><span class="line">  Tue,</span><br><span class="line">  Wed,</span><br><span class="line">  Thu,</span><br><span class="line">  Fri,</span><br><span class="line">  Sat,</span><br><span class="line">  Sun,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Typescript</span></span><br><span class="line"><span class="built_in">enum</span> WeekDayEnum &#123;</span><br><span class="line">  Mon,</span><br><span class="line">  Tue,</span><br><span class="line">  Wed,</span><br><span class="line">  Thu,</span><br><span class="line">  Fri,</span><br><span class="line">  Sat,</span><br><span class="line">  Sun,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 附上初始值：</span></span><br><span class="line"><span class="built_in">enum</span> WeekDayEnum &#123;</span><br><span class="line">  Mon = <span class="number">1</span>,</span><br><span class="line">  Tue = <span class="number">2</span>,</span><br><span class="line">  Wed = <span class="number">3</span>,</span><br><span class="line">  Thu = <span class="number">4</span>,</span><br><span class="line">  Fri = <span class="number">5</span>,</span><br><span class="line">  Sat = <span class="number">6</span>,</span><br><span class="line">  Sun = <span class="number">7</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="interface-type-he-class">interface、type 和 class</span></h3><p><code>interface</code>接口，类比 java 中的 interface，接口是一系列抽象方法的声明，是一些方法特征的集合，这些方法都应该是抽象的，需要由具体的类去实现，然后第三方就可以通过这组抽象方法调用，让具体的类执行具体的方法。 <code>type</code> 用来定义数据结构。 <code>class</code> 类比 java，有私有和静态属性，可以继承，构造方法……</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">    firstName:<span class="built_in">string</span>,</span><br><span class="line">    lastName:<span class="built_in">string</span>,</span><br><span class="line">    sayHi: <span class="function">()=&gt;</span><span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User = &#123;</span><br><span class="line">	name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> </span>= &#123;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>三者都可以用来定义数据结构，但是意义不同，使用场景也不同。</p>
<p>由于 typescript 的宗旨是兼容 js，运行时要擦除所有类型信息，因此<code>interface</code>和<code>type</code>在运行时是会被完全消除的。而<code>class</code>经过编译后，在运行时依然存在。因此如果要声明的类型只是纯粹的类型信息，只需要声明<code>interface</code>即可。</p>
<h3><span id="lei-xing-tui-dao">类型推导</span></h3><blockquote>
<p>Typescript 能够在静态分析中推导出类型，不需要像 Java 那样处处定义。这也是 Typescript 把类型定义放在变量后，而 Java 把类型定义放在变量前的原因。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对于这里的变量，typescript可以通过赋值获取变量的类型，和上面的定义效果是相同的</span></span><br><span class="line"><span class="keyword">let</span> userMan = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> userAge = <span class="number">81</span>;</span><br><span class="line"><span class="keyword">let</span> userAverage = <span class="number">10.5</span>;</span><br><span class="line"><span class="keyword">let</span> userName = <span class="string">&#x27;桐人&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3><span id="han-shu-ding-yi">函数定义</span></h3><p>上面例子中已经有函数的例子了，java 在定义时，返回值以参数类型都需要写。并且写在变量之前。而 typescript 则是之后。看下面的例子 🌰：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> multiply: <span class="function">(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a * b;</span><br></pre></td></tr></table></figure>

<h3><span id="wen-jian-lei-xing">文件类型</span></h3><ul>
<li>.ts Typescript 文件</li>
<li>.tsx Typescript + JSX，支持 JSX 语法</li>
<li>.d.ts 相当于 C++ .h 文件，只有类型声明，没有实现代码。</li>
</ul>
<p>更多的内容可以查看<a target="_blank" rel="noopener" href="https://www.tslang.cn/docs/handbook/basic-types.html">官方文档</a></p>
<hr>
<h2><span id="react-js">React.js</span></h2><p>什么是 react.js? 为什么选择 react.js？</p>
<blockquote>
<p>React 使创建交互式 UI 变得轻而易举。为你应用的每一个状态设计简洁的视图，当数据改变时 React 能有效地更新并正确地渲染组件。创建拥有各自状态的组件，再由这些组件构成更加复杂的 UI。组件逻辑使用 JavaScript 编写而非模版，因此你可以轻松地在应用中传递数据，并使得状态与 DOM 分离。一个通过 react 框架构成的前端应用，其构成结构为：元素 -&gt; 组件 -&gt; 模块 -&gt; 页面 -&gt; 站点； <strong>牢记重点：状态、组件、单向数据流。</strong></p>
</blockquote>
<p><code>React.js</code> 是一个帮助你构建页面 UI 的库。如果你熟悉 MVC 概念的话，那么 React 的组件就相当于 MVC 里面的 View。如果你不熟悉也没关系，你可以简单地理解为，<code>React.js</code> 将帮助我们将界面分成了各个独立的小块，每一个块就是组件，这些组件之间可以组合、嵌套，就成了我们的页面。一个组件的显示形态和行为有可能是由某些数据决定的。而数据是可能发生改变的，这时候组件的显示形态就会发生相应的改变。而 <code>React.js</code> 也提供了一种非常高效的方式帮助我们做到了数据和组件显示形态之间的同步。 <code>React.js</code> 不是一个框架，它只是一个库。<strong>它只提供 UI （view）层面的解决方案</strong>。在实际的项目当中，它并不能解决我们所有的问题，需要结合其它的库，例如 <code>Redux</code>、<code>React-router</code> 等来协助提供完整的解决方法。</p>
<p>一个小 <code>Demo</code> 帮你理解 react 在做什么？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>What&#x27;s Reactjs?<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">media</span>=<span class="string">&quot;screen&quot;</span>&gt;</span></span><br><span class="line">      .like-btn &#123;</span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="comment">/* Component */</span></span></span><br><span class="line"><span class="javascript">    <span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">constructor</span>(<span class="params">props = &#123;&#125;</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.props = props;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">setState</span>(<span class="params">state</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> oldEl = <span class="built_in">this</span>.el;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.state = state;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.el = <span class="built_in">this</span>.renderDOM();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.onStateChange) <span class="built_in">this</span>.onStateChange(oldEl, <span class="built_in">this</span>.el);</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">renderDOM</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.el = createDOMFromString(<span class="built_in">this</span>.render());</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.onClick) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.el.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="built_in">this</span>.onClick.bind(<span class="built_in">this</span>), <span class="literal">false</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="built_in">this</span>.el;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> createDOMFromString = <span class="function">(<span class="params">domString</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span></span><br><span class="line">      div.innerHTML = domString;</span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> div;</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> mount = <span class="function">(<span class="params">component, wrapper</span>) =&gt;</span> &#123;</span></span><br><span class="line">      wrapper.appendChild(component.renderDOM());</span><br><span class="line"><span class="javascript">      component.onStateChange = <span class="function">(<span class="params">oldEl, newEl</span>) =&gt;</span> &#123;</span></span><br><span class="line">        wrapper.insertBefore(newEl, oldEl);</span><br><span class="line">        wrapper.removeChild(oldEl);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="comment">/* ========================================= */</span></span></span><br><span class="line"><span class="javascript">    <span class="class"><span class="keyword">class</span> <span class="title">LikeButton</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">super</span>(props);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.state = &#123; <span class="attr">isLiked</span>: <span class="literal">false</span> &#125;;</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">onClick</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.setState(&#123;</span></span><br><span class="line"><span class="javascript">          isLiked: !<span class="built_in">this</span>.state.isLiked,</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="string">`</span></span></span><br><span class="line"><span class="javascript">          &lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">&#x27;like-btn&#x27;</span> style=<span class="string">&quot;background-color: $&#123;this.props.bgColor&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&#x27;like-text&#x27;</span>&gt;</span></span><br><span class="line"><span class="javascript">              $&#123;<span class="built_in">this</span>.state.isLiked ? <span class="string">&#x27;取消&#x27;</span> : <span class="string">&#x27;点赞&#x27;</span>&#125;</span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>👍<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line">        `;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="class"><span class="keyword">class</span> <span class="title">RedBlueButton</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">super</span>(props);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.state = &#123;</span></span><br><span class="line"><span class="javascript">          color: <span class="string">&#x27;red&#x27;</span>,</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">onClick</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.setState(&#123;</span></span><br><span class="line"><span class="javascript">          color: <span class="string">&#x27;blue&#x27;</span>,</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="string">`</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#x27;color: $&#123;this.state.color&#125;;&#x27;</span>&gt;</span>$&#123;this.state.color&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">        `;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> wrapper = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.wrapper&#x27;</span>);</span></span><br><span class="line"><span class="javascript">    mount(<span class="keyword">new</span> LikeButton(&#123; <span class="attr">bgColor</span>: <span class="string">&#x27;red&#x27;</span> &#125;), wrapper);</span></span><br><span class="line"><span class="javascript">    mount(<span class="keyword">new</span> LikeButton(), wrapper);</span></span><br><span class="line"><span class="javascript">    mount(<span class="keyword">new</span> RedBlueButton(), wrapper);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>更详细的理解 React.js 可以查看<a target="_blank" rel="noopener" href="http://fangzhioooo.gitee.io/">这里</a>;</strong></p>
<h3><span id="jsx">jsx</span></h3><p>这种看起来“在 JavaScript 写的标签的”语法叫 JSX。但注意的是，在写组件的时候，需要引入 react。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Page</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello World&lt;/h1&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Page</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>想了解更多可以查看<a target="_blank" rel="noopener" href="http://fangzhioooo.gitee.io/">jsx 的原理</a></p>
<p>从 jsx 到页面的过程，大致如下：</p>
<p><img src="https://images.gitee.com/uploads/images/2020/0525/162108_2554daa9_2106937.png" alt="jsx编译过程"></p>
<p>所以为啥不可以直接从 jsx 直接解析为 dom，而是先解析为 js 对象后，再经过<code>react-dom</code>，解析为 dom？第一点，在于可以复用结构，我们不一定仅仅渲染成 dom，也可以去渲染成其他的结构。比如，想象有个<code>react-dingding</code>，那我们也可以把这个 js 对象解析成钉钉小程序需要的页面？<br>第二点，在于方便做 diff 算法。</p>
<p>总结：</p>
<ol>
<li>JSX 是 JavaScript 语言的一种语法扩展，长得像 HTML，但并不是 HTML。</li>
<li>React.js 可以用 JSX 来描述你的组件长什么样的。</li>
<li>JSX 在编译的时候会变成相应的 JavaScript 对象描述。</li>
<li>react-dom 负责把这个用来描述 UI 信息的 JavaScript 对象变成 DOM 元素，并且渲染到页面上。</li>
</ol>
<h3><span id="zu-jian">组件</span></h3><p>React.js 中一切皆组件，用 React.js 写的其实就是 React.js 组件。我们在编写 React.js 组件的时候，一般都需要继承 React.js 的 <code>Component</code>。一个组件类必须要实现一个 render 方法，这个 render 方法必须要返回一个 JSX 元素。并且不能并排返回多个元素，只能包裹在一个元素中。若有返回多个的需求，React.js 提供<code>Fragment</code>标签，可以实现。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    title: <span class="string">&#x27;详情&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">			&lt;div&gt;首页 / &#123; <span class="built_in">this</span>.props.title &#125;&lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Page</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> renderContent = <span class="function">() =&gt;</span> <span class="string">`我是一篇文章！`</span>;</span><br><span class="line">  render () &#123;</span><br><span class="line">	<span class="keyword">const</span> title = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">	<span class="keyword">const</span> divClass = <span class="string">&#x27;page-wapper&#x27;</span>;</span><br><span class="line">	<span class="keyword">const</span> isSuccess = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=&#123;divClass&#125;&gt;</span><br><span class="line">		&lt;Header title=<span class="string">&quot;xx详情&quot;</span> /&gt;</span><br><span class="line">		&#123; title &#125;</span><br><span class="line">        &lt;p&gt; <span class="number">1</span> + <span class="number">2</span> = &#123;<span class="number">1</span>+<span class="number">2</span>&#125; &lt;/p&gt;</span><br><span class="line">		&lt;p&gt; &#123; <span class="built_in">this</span>.renderContent() &#125; &lt;/p&gt;</span><br><span class="line">		&lt;p&gt; &#123; isSuccess===<span class="literal">true</span> ? <span class="string">&#x27;成功&#x27;</span> : <span class="string">&#x27;失败&#x27;</span>  &#125; &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>组件中，可以定义 jsx 变量，组件之间也是可以嵌套、组合的。 <code>&#123;&#125;</code>内可以放任何 JavaScript 的代码，包括变量、表达式计算、函数执行等等。<br>render 会把这些代码返回的内容如实地渲染到页面上，非常的灵活。 ⚠️ 注意这里的类名，用的是<code>className</code>，因为<code>class</code>是 js 的关键字，类似的比如<code>htmlFor</code>用来替代<code>label</code>的<code>for</code>属性。</p>
<h3><span id="props">Props</span></h3><p>组件是相互独立、可复用的单元，一个组件可能在不同地方被用到。但是在不同的场景下对这个组件的需求可能会根据情况有所不同。React.js 的 props 就可以帮助我们达到这个效果。 ⚠️ 注意无法在组件内修改组件的 props。只能是父组件修改 props，传入子组件触发更新。</p>
<p>那么怎么把 props 传进去呢？在使用一个组件的时候，可以把参数放在标签的属性当中，所有的属性都会作为 props 对象的键值。比如上面的<code>&lt;Header /&gt;</code> 传入的参数<code>title</code>。</p>
<p>总结：</p>
<ol>
<li>为了使得组件的可定制性更强，在使用组件的时候，可以在标签上加属性来传入配置参数。</li>
<li>组件可以在内部通过 this.props 获取到配置参数，组件可以根据 props 的不同来确定自己的显示形态，达到可配置的效果。</li>
<li>可以通过给组件添加类属性 defaultProps 来配置默认参数。</li>
<li>props 一旦传入，你就不可以在组件内部对它进行修改。但是你可以通过父组件主动重新渲染的方式来传入新的 props，从而达到更新的效果。</li>
</ol>
<h3><span id="state">State</span></h3><p>一个组件的显示形态是可以由它数据状态<code>state</code>和配置参数<code>props</code>决定的。一个组件可以拥有自己的状态<code>state</code>。但是状态不能直接赋值修改，只能通过<code>setState</code>进行修改。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Page</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleBtnClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setState(&#123;</span><br><span class="line">      count: <span class="built_in">this</span>.state.count + <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;当前数量：&#123;<span class="built_in">this</span>.state.count&#125; &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">          &lt;button onClick=&#123;<span class="built_in">this</span>.handleBtnClick&#125;&gt;加一&lt;/button&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="sheng-ming-zhou-qi">生命周期</span></h3><p>可以为 class 组件声明一些特殊的方法，当组件挂载或更新或卸载时就会去执行这些方法，称为组件生命周期方法。当组件实例被创建并插入 DOM 中时，其生命周期调用顺序如下： • <code>constructor()</code> • <code>static getDerivedStateFromProps()</code> • <code>render()</code> • <code>componentDidMount()</code> 当组件的 props 或 state 发生变化时会触发更新。组件更新的生命周期调用顺序如下： • <code>static getDerivedStateFromProps()</code> • <code>shouldComponentUpdate()</code> • <code>render()</code> • <code>getSnapshotBeforeUpdate()</code> • <code>componentDidUpdate()</code> 当组件从 DOM 中移除时会调用如下方法： • <code>componentWillUnmount()</code> 当渲染过程，生命周期，或子组件的构造函数中抛出错误时，会调用如下方法： • <code>static getDerivedStateFromError()</code> • <code>componentDidCatch()</code></p>
<p>⚠️ 注意，这里的生命周期指的是，React@17+版本，对比之前版本，删去了<code>componentWillMount</code>, <code>componentWillReceiveProps</code>和<code>componentWillUpdate</code>三个生命钩子。</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2019/png/5144/1556372331485-d7c09d5c-a9fa-4301-9d36-8a7f7cfef7e6.png?x-oss-process=image/resize,w_746" alt="react 生命周期"></p>
<h3><span id="shi-jian-chu-li">事件处理</span></h3><p>在 React.js 里面监听事件是很容易的事情，你只需要给需要监听事件的元素加上属性类似于 <code>onClick</code>、<code>onKeyDown</code> 这样的属性。建议在书写监听函数时，也使用驼峰式写法。参考上面的例子。</p>
<p>⚠️ 注意，上面的例子<code>handleBtnClick</code>使用的是箭头函数。是因为其中使用了<code>this</code>指针，只有使用箭头函数，才能保证函数内部的<code>this</code>指向这个组件。如果不使用箭头函数，则需要使用<code>bind</code>来指定<code>this</code>的指向。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Page</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 这里使用不是箭头函数，如果未绑定this，内部的this会是 undefined</span></span><br><span class="line">  <span class="function"><span class="title">handleBtnClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    setState(&#123;</span><br><span class="line">      count: <span class="built_in">this</span>.state.count + <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;当前数量：&#123;<span class="built_in">this</span>.state.count&#125; &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">          &lt;button onClick=&#123;<span class="built_in">this</span>.handleBtnClick.bind(<span class="built_in">this</span>)&#125;&gt;加一&lt;/button&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果需要向事件函数中传递参数，则应该如下写法：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="built_in">this</span>.handleBtnClick.bind(<span class="built_in">this</span>, <span class="string">&#x27;param&#x27;</span>)&#125;&gt;加一&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h3><span id="lie-biao-he-key">列表和 key</span></h3><p>列表数据在前端非常常见，我们经常要处理这种类型的数据，例如文章列表、评论列表、用户列表… React.js 当然也允许我们处理列表数据，但在使用 React.js 处理列表数据的时候，需要掌握一些规则。</p>
<ol>
<li>使用 map 渲染列表数据</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">&#x27;Jerry&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">&#x27;Tomy&#x27;</span>, <span class="attr">age</span>: <span class="number">22</span>, <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">&#x27;Lily&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">gender</span>: <span class="string">&#x27;female&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">username</span>: <span class="string">&#x27;Lucy&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">gender</span>: <span class="string">&#x27;female&#x27;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;users.map(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;div&gt;姓名：&#123;user.username&#125;&lt;/div&gt;</span><br><span class="line">              &lt;div&gt;年龄：&#123;user.age&#125;&lt;/div&gt;</span><br><span class="line">              &lt;div&gt;性别：&#123;user.gender&#125;&lt;/div&gt;</span><br><span class="line">              &lt;hr /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          );</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Index</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>));</span><br></pre></td></tr></table></figure>

<p>以上代码虽然可以正确地渲染出结果，但是打开控制台就发现，报出了很多错误<code>a key should be provided for list items</code>。意思是，列表的每一项，应该设置一个唯一的<code>**key**</code>来标记，这和 diff 算法有关。 React.js 的是非常高效的，它高效依赖于所谓的 Virtual-DOM 策略。简单来说，能复用的话 React.js 就会尽量复用，没有必要的话绝对不碰 DOM。对于列表元素来说也是这样，但是处理列表元素的复用性会有一个问题：元素可能会在一个列表中改变位置。但是如果设置了唯一的 key，那么我们就知道哪些元素改变了，需要重新渲染。 ⚠️ 注意，不要使用<code>index</code>作为元素的 key，尽量是后台返回数据的 id 作为唯一 key。</p>
<h3><span id="fu-zu-jian-he-zi-zu-jian-tong-xin">父组件和子组件通信</span></h3><p><strong>父级组件通过 props 传递与子级组件进行数据&amp;状态的通信，子级组件通过回调函数与父子组件进行通信。</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      value: <span class="number">1</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 父级组件触发回调函数后获取到传递过来的数据，变更 state，重新渲染</span></span><br><span class="line">  handleChange = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      value: data,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;<span class="built_in">this</span>.state.value&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;Child data=&#123;value&#125; onChange=&#123;<span class="built_in">this</span>.handleChange&#125; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子级组件通过 onChange 回调函数传递数据</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.props.onChange(<span class="number">2</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>&#123;this.props.data&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1><span id="gong-ju-he-ui">工具和 UI</span></h1><h2><span id="umi-js">Umi.js</span></h2><blockquote>
<p>umi，中文可发音为乌米，是一个可插拔的企业级 react 应用框架。umi 以路由为基础的，支持类 next.js 的约定式路由，以及各种进阶的路由功能，并以此进行功能扩展，比如支持路由级的按需加载。然后配以完善的插件体系，覆盖从源码到构建产物的每个生命周期，支持各种功能扩展和业务需求，目前内外部加起来已有 50+ 的插件。</p>
</blockquote>
<p>为什么使用 umi.js?</p>
<h3><span id="te-xing">✨ 特性</span></h3><ul>
<li>📦 开箱即用，内置 react、react-router 等</li>
<li>🏈 类 next.js 且功能完备的路由约定，同时支持配置的路由方式</li>
<li>🎉 完善的插件体系，覆盖从源码到构建产物的每个生命周期</li>
<li>🚀 高性能，通过插件支持 PWA、以路由为单元的 code splitting 等</li>
<li>💈 支持静态页面导出，适配各种环境，比如中台业务、无线业务、egg、支付宝钱包、云凤蝶等</li>
<li>🚄 开发启动快，支持一键开启 dll 等</li>
<li>🐠 一键兼容到 IE9，基于 umi-plugin-polyfills</li>
<li>🍁 完善的 TypeScript 支持，包括 d.ts 定义和 umi test</li>
<li>🌴 与 dva 数据流的深入融合，支持 duck directory、model 的自动加载、code splitting 等等</li>
</ul>
<p>关于 roadhog 与 umi.js 的关系？</p>
<blockquote>
<p>roadhog 是基于 webpack 的封装工具，目的是简化 webpack 的配置。 umi 可以简单地理解为 roadhog + 路由，思路类似<code>next.js/nuxt.js</code>，辅以一套插件机制，目的是通过框架的方式简化 React 开发。</p>
</blockquote>
<p>umi 架构图</p>
<p><img src="https://images.gitee.com/uploads/images/2020/0525/162104_2e7f58cb_2106937.png" alt="umi架构图"></p>
<p>构建流程图</p>
<p><img src="https://images.gitee.com/uploads/images/2020/0525/162104_3ade4825_2106937.png" alt="umi生命周期"></p>
<p>在下面，我们会详细讲到从零搭建一个 umi 的应用。</p>
<p>这里是<a target="_blank" rel="noopener" href="https://umijs.org/zh/guide/">官方文档</a>，使用中，我们更多的关注是 <a target="_blank" rel="noopener" href="https://umijs.org/zh/config/">配置</a></p>
<p>DT 前端推行使用的工程化解决方案——<a target="_blank" rel="noopener" href="https://prijs.github.io/pri-docs/usage/">pri</a>。其发自 umi.js</p>
<h2><span id="dva">Dva</span></h2><blockquote>
<p>dva 首先是一个基于 redux 和 redux-saga 的数据流方案，然后为了简化开发体验，dva 还额外内置了 react-router 和 fetch，所以也可以理解为一个轻量级的应用框架。</p>
</blockquote>
<p>dva 就是一种 react 状态管理的解决方案，关于 redux，你可以查看下面的参考文档学习更多。这里简单介绍下。</p>
<p>• <a target="_blank" rel="noopener" href="https://www.redux.org.cn/">官方文档</a></p>
<p>redux 的工作流程：</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2020/gif/230467/1587026376535-d2289729-eb1b-4e89-9428-d2cab4278a6c.gif" alt="redux.gif"></p>
<p>dva 流程：</p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2020/png/230467/1587464638140-a0d96fe2-ce4c-4beb-900f-fc94ce695891.png" alt="dva流程图.png"></p>
<p>图源来自 DT 前端关于 redux 的介绍。</p>
<h2><span id="ant-design">Ant Design</span></h2><blockquote>
<p>antd 是基于 Ant Design 设计体系的 React UI 组件库，主要用于研发企业级中后台产品。</p>
</blockquote>
<p>为啥用 Ant Design？</p>
<h3><span id="te-xing">✨ 特性</span></h3><ul>
<li>🌈 提炼自企业级中后台产品的交互语言和视觉风格。</li>
<li>📦 开箱即用的高质量 React 组件。</li>
<li>🛡 使用 TypeScript 开发，提供完整的类型定义文件。</li>
<li>⚙️ 全链路开发和设计工具体系。</li>
<li>🌍 数十个国际化语言支持。</li>
<li>🎨 深入每个细节的主题定制能力。</li>
</ul>
<p>这里 UI 组件，在项目中会大量用到，具体的用法可以查看<a target="_blank" rel="noopener" href="https://ant-design.gitee.io/components/button-cn/">组件库</a>，有详细的使用 Demo 和文档说明。</p>
<p>⚠️ 这里主要说明的是，目前项目用的 Ant 版本是 4.0+ 。而之前项目中使用的一直是 3+版本。 在 4+版本中，更改了许多的 Api。涉及常用的组件有：图标（Icon）、表单（Form）等。如果你之前有使用过 Ant@3+版本，在使用时，需要留意 Api 的改变。这里推荐使用新的 4+版本，因为解决了许多之前版本的问题，如，icon 加载导致打包文件体积过大。具体详情查看<a target="_blank" rel="noopener" href="https://ant-design.gitee.io/docs/react/migration-v4-cn">从 v3 到 v4</a>。</p>
<h2><span id="pont">Pont</span></h2><blockquote>
<p>pont 在法语中是“桥”的意思，寓意着前后端之间的桥梁 Pont 把 swagger、rap、dip 等多种接口文档平台，转换成 Pont 元数据。Pont 利用接口元数据，可以高度定制化生成前端接口层代码，接口 mock 平台和接口测试平台。</p>
</blockquote>
<p>关于 pont 更多的信息，可以查看<a target="_blank" rel="noopener" href="https://github.com/alibaba/pont">官方文档</a></p>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2020/png/230467/1587031222725-71bac55a-5ae0-47ba-beef-79ee131fbed0.png" alt="pont.png"></p>
<h1><span id="kai-fa-he-fa-bu">开发和发布</span></h1><h2><span id="cong-ling-kai-shi-gou-jian-xiang-mu">从零开始构建项目</span></h2><p>现有的 OneData 系列的三个产品，均采用的前端也是目前这一套技术栈；接下来，我们从零开始搭建一个前端项目，以 <code>OneData</code> 为基础。</p>
<h3><span id="shi-yong-create-umi-jiao-shou-jia-chuang-jian-ji-chu-xiang-mu">使用 create-umi 脚手架创建基础项目</span></h3><p>可以参看<a target="_blank" rel="noopener" href="https://umijs.org/zh/guide/create-umi-app.html">官方文档</a>,</p>
<blockquote>
<p>你可以通过 <code>yarn create umi</code> 或 <code>npm create umi</code> 使用 <code>create-umi</code>。推荐使用 <code>yarn create</code> 命令，能确保每次使用最新的脚手架。</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ yarn create umi</span><br><span class="line">$ ...</span><br><span class="line">$ ...</span><br><span class="line">$ curl --compressed -o- -L https://yarnpkg.com/install.sh | bash</span><br><span class="line">success Installed <span class="string">&quot;create-umi@0.21.2&quot;</span> with binaries:</span><br><span class="line">      - create-umi</span><br><span class="line">? Select the boilerplate <span class="built_in">type</span> ant-design-pro</span><br><span class="line">? 🤓 Which language <span class="keyword">do</span> you want to use? TypeScript</span><br><span class="line">? 🚀 Do you need all the blocks or a simple scaffold? simple</span><br><span class="line">? 🦄 Time to use better, faster and latest antd@4! Yes</span><br><span class="line">Cloning into <span class="string">&#x27;/Users/fz/Desktop/Project/onedefine/onedefine-ts&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: 189, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (189/189), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (174/174), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 189 (delta 21), reused 67 (delta 8), pack-reused 0</span><br><span class="line">Receiving objects: 100% (189/189), 297.17 KiB | 31.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (21/21), <span class="keyword">done</span>.</span><br><span class="line">&gt; 🚚 <span class="built_in">clone</span> success</span><br><span class="line">&gt; Clean up...</span><br><span class="line">✨ File Generate Done</span><br><span class="line">✨  Done <span class="keyword">in</span> 196.52s.</span><br></pre></td></tr></table></figure>

<p>⚠️ 注意这里选择选项， 选择 <em>ant-design-pro</em> 、_TypeScript_、<em>simple</em>和<em>Yes</em>，主要是选择使用 Typescript 和使用 antd@4 以上版本。</p>
<p>这是创建的文件结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">root</span><br><span class="line">├── config                                      # umi 配置，包含路由，构建等配置</span><br><span class="line">├── dist                                        # 构建项目目标位置 build后创建</span><br><span class="line">├── public                                      # 公共静态资源 如favicon</span><br><span class="line">├── src</span><br><span class="line">│   ├── components                              # 业务通用组件</span><br><span class="line">│   ├── layouts                                 # 通用布局</span><br><span class="line">│   ├── locales                                 # 国际化资源</span><br><span class="line">│   ├── models                                  # 全局 dva model</span><br><span class="line">│   │   ├── ....                                    # 所有的model定义</span><br><span class="line">│   │   └── global.ts                               # 全局属性相关 如，导航展开控制</span><br><span class="line">│   ├── pages                                   # 业务页面入口和常用模板</span><br><span class="line">│   │   ├── ...                                     # 各种页面</span><br><span class="line">│   │   ├── 404.tsx                                  # 404页面</span><br><span class="line">│   │   └── document.ejs                            # index.html</span><br><span class="line">│   ├── services                                # 后台接口服务 自定义的接口请求</span><br><span class="line">│   ├── pont                                    # 后台接口服务以及BO pont接口自动化生成接口</span><br><span class="line">│   ├── utils                                   # 工具库</span><br><span class="line">│   │   ├── request.ts                              # 请求方法函数 基于umi-request&#x2F;fetch</span><br><span class="line">│   │   ├── utils.ts                                # 工具类函数</span><br><span class="line">│   │   ├── utils.less                              # 工具类样式</span><br><span class="line">│   │   └── utils.test.ts                          # 工具类函数测试方法</span><br><span class="line">│   ├── global.less                             # 全局样式</span><br><span class="line">│   ├── global.tsx                              # 全局JS 主要是serviceWorker相关配置</span><br><span class="line">│   └── typings.d.ts                            # ts声明文件</span><br><span class="line">├── tests                                       # 测试工具</span><br><span class="line">├── README.md</span><br><span class="line">├── pont-config.json                                # pont的配置文件</span><br><span class="line">└── package.json                                    # npm配置文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>继续修改下项目，删除不需要的模块，如用户登陆界面、权限路由控制等。</p>
<h3><span id="jie-ru-jie-kou-ceng-zi-dong-sheng-cheng-gong-ju-pont">接入接口层自动生成工具 pont</span></h3><p><strong>这里需要后端提供的接口尽量标准（openapi），关于 api 文档，官方推荐 swagger2+版本，请求方法明确；虽然理论上可以实现 RESTful 风格的接口，但是暂时不太好实践 ，后端暂时不要使用。</strong></p>
<ol>
<li>在根目录下添加<code>pont-config.json</code>和其中指定的<code>templatePath</code>文件<code>pontTemplate.ts</code>.</li>
</ol>
<p>别忘了在 global.tsx 中添加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/pont&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>pont-config.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;outDir&quot;</span>: <span class="string">&quot;./src/pont&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;originUrl&quot;</span>: <span class="string">&quot;http://localhost:7001/v2/api-docs&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;templatePath&quot;</span>: <span class="string">&quot;./pontTemplate&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>pontTemplate.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; CodeGenerator, Interface &#125; <span class="keyword">from</span> <span class="string">&#x27;pont-engine&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">MyGenerator</span> <span class="keyword">extends</span> <span class="title">CodeGenerator</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">getInterfaceContentInDeclaration</span>(<span class="params">inter: Interface</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> paramsCode = inter.getParamsCode();</span><br><span class="line">    <span class="keyword">const</span> bodyParamsCode = inter.getBodyParamsCode();</span><br><span class="line">    <span class="keyword">const</span> hasGetParams = !!inter.parameters.filter(<span class="function">(<span class="params">param</span>) =&gt;</span> param.in !== <span class="string">&#x27;body&#x27;</span>).length;</span><br><span class="line">    <span class="keyword">const</span> requestParams = bodyParamsCode</span><br><span class="line">      ? <span class="string">`&#123; <span class="subst">$&#123;hasGetParams ? <span class="string">&#x27;params, &#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;</span>data &#125;:&#123; params<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="string"><span class="subst">          hasGetParams ? <span class="string">&#x27;&#x27;</span> : <span class="string">&#x27;?&#x27;</span></span></span></span><br><span class="line"><span class="string"><span class="subst">        &#125;</span>: Params, data: <span class="subst">$&#123;bodyParamsCode&#125;</span> &#125;`</span></span><br><span class="line">      : <span class="string">`&#123; <span class="subst">$&#123;hasGetParams ? <span class="string">&#x27;params&#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;</span> &#125;:&#123; params<span class="subst">$&#123;hasGetParams ? <span class="string">&#x27;&#x27;</span> : <span class="string">&#x27;?&#x27;</span>&#125;</span>: Params &#125;`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">      export <span class="subst">$&#123;paramsCode&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      export type Response = <span class="subst">$&#123;inter.responseType&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      export const init: Response;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      export function request(<span class="subst">$&#123;requestParams&#125;</span>): Promise&lt;Response&gt;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">getInterfaceContent</span>(<span class="params">inter: Interface</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> paramsCode = inter.getParamsCode();</span><br><span class="line">    <span class="keyword">const</span> bodyParamsCode = inter.getBodyParamsCode();</span><br><span class="line">    <span class="keyword">const</span> method = inter.method.toUpperCase();</span><br><span class="line">    <span class="keyword">const</span> requestParams = bodyParamsCode</span><br><span class="line">      ? <span class="string">`&#123;params=&#123;&#125;,data&#125;:&#123;params: Params,data: <span class="subst">$&#123;bodyParamsCode&#125;</span>&#125;`</span></span><br><span class="line">      : <span class="string">`&#123;params=&#123;&#125;&#125;:&#123;params: Params&#125;`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">      /**</span></span><br><span class="line"><span class="string">      * @description <span class="subst">$&#123;inter.description&#125;</span></span></span><br><span class="line"><span class="string">      */</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    import Request from &#x27;@/utils/request&#x27;;</span></span><br><span class="line"><span class="string">    import * as defs from &#x27;../../baseClass&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    export <span class="subst">$&#123;paramsCode&#125;</span>;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    export const init = <span class="subst">$&#123;inter.response.initialValue&#125;</span>;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    export async function request(<span class="subst">$&#123;requestParams&#125;</span>): Promise&lt;any&gt; &#123;</span></span><br><span class="line"><span class="string">      return Request(&#x27;<span class="subst">$&#123;inter.path&#125;</span>&#x27;,&#123;</span></span><br><span class="line"><span class="string">        method: &#x27;<span class="subst">$&#123;method&#125;</span>&#x27;,</span></span><br><span class="line"><span class="string">        params,</span></span><br><span class="line"><span class="string">        <span class="subst">$&#123;bodyParamsCode ? <span class="string">&#x27;data,&#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="string">      &#125;);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>添加项目对 pont 的支持，这里的<code>pont-engine</code>,需要执行</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pont-engine --save-dev</span><br></pre></td></tr></table></figure>

<p>值得注意的是，pontTemplate.ts 中的<code>getInterfaceContent</code>，表示了你该如何调用你的 fetch 以及入参方式，这里我使用的是<code>umi-request</code>,你可以查看<a target="_blank" rel="noopener" href="https://github.com/umijs/umi-request">官方文档</a>,了解 fetch 的详细用法。</p>
<p>目前构建的项目中，派发请求传递参数方法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">dispatch(&#123;</span><br><span class="line">  type: <span class="string">&#x27;global/fetchMicroData&#x27;</span>,</span><br><span class="line">  payload: &#123;</span><br><span class="line">    <span class="comment">// query参数放在params中， 如get请求</span></span><br><span class="line">    params: &#123;</span><br><span class="line">      id: <span class="number">1</span>,</span><br><span class="line">      name: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// body参数放在data中， 如post请求</span></span><br><span class="line">    data: &#123;</span><br><span class="line">      username: <span class="string">&#x27;biubiu&#x27;</span>,</span><br><span class="line">      age: <span class="number">10</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>⚠️ 注意 quary 参数和 body 参数传递并不冲突，可以两者同时传递。</p>
<p>这里需要后端配合接入 openapi 接口文档才能使用 pont 自动生成，如这里使用的 swagger，接入后，会在指定的文件夹（我们这里指定的是<code>pont</code>）下生成一个名为<code>api-lock.json</code>的文件，就是用来描述后端<code>接口</code>和<code>BO对象</code>。</p>
<ol start="3">
<li>前端需要配合 vscode 的插件，才能生成对应的 service。生成的 pont 接口文件结构如下：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pont</span><br><span class="line">├── mods                            # 自动化生成的接口请求方法</span><br><span class="line">├── api-lock.json                          # 根据swagger文档，生成的pont接口描述文件</span><br><span class="line">├── api.d.ts                               # pont声明文件，描述BO对象和API请求</span><br><span class="line">├── baseClass.ts                           # BO对象结构</span><br><span class="line">└── index.ts</span><br></pre></td></tr></table></figure>

<h3><span id="dai-li-qing-qiu">代理请求</span></h3><p>前端需要连接后端服务调试时，就会遇到跨域等一系列问题。这里介绍下项目中如何解决前后端联调问题的。</p>
<p>目前这里有两个解决方案。</p>
<ol>
<li><p>修改 host<br>访问线上项目，获取到 cookie 后，修改 host，让线上地址指向本地 localhost。<br>如访问 <code>yourdomain.com</code>后，修改 host， 将<code>yourdomain.com</code>指向 <code>localhost</code>.这种方法很麻烦。且需要频繁修改 host。所以一般不这样做。</p>
</li>
<li><p>代理请求在应对这种情况时，前端开发已经有了好的解决方法，通过提供的 umi 插件，实现代理请求。<br>在 <code>config</code> 中，会有一个 <code>proxy.ts</code> 文件，用来定义接口代理的配置。这个功能只在<code>dev</code>环境生效，线上需要自己配置实现，如<code>nginx反向代理</code>。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  dev: &#123;</span><br><span class="line">    <span class="string">&#x27;/commonapi&#x27;</span>: &#123;</span><br><span class="line">      target: <span class="string">&#x27;http://localhost:7001/commonapi&#x27;</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123; <span class="string">&#x27;^/commonapi&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;/serachapi&#x27;</span>: &#123;</span><br><span class="line">      target: <span class="string">&#x27;http://localhost:7001/serachapi&#x27;</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123; <span class="string">&#x27;^/serachapi&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  pre: &#123;</span><br><span class="line">    <span class="string">&#x27;/&#x27;</span>: &#123;</span><br><span class="line">      target: <span class="string">&#x27;http://localhost:7001/&#x27;</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123; <span class="string">&#x27;^&#x27;</span>: <span class="string">&#x27;&#x27;</span> &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>上面是此项目中的配置，正则匹配路由，代理到指定的地址下，这里的配置只添加了<code>/commonapi</code>和<code>/searchapi</code>开头的配置。后续需要，可以再此添加。</p>
<h3><span id="chuang-jian-yi-ge-ye-mian">创建一个页面</span></h3><p>以 onedefine 为例，添加一个页面。添加<code>数据大盘</code>这个界面；</p>
<ol>
<li><p>在 <code>page</code> 中添加文件夹 <code>dashboard</code>,在其下添加页面<code>index.tsx</code>；</p>
</li>
<li><p>在 <code>config/router.config.ts</code> 中添加上路由配置，并在<code>src/locales</code>中，配置国际化支持；<br>具体添加页面和配置 router 可以查看本次提交</p>
</li>
<li><p>在 <code>models</code> 中新建 <code>dashboard.ts</code> ，作为数据大盘页面的 state；</p>
</li>
<li><p>在 model 中定义需要的前端对象，这里建议不要直接使用 pont 中定义好的对象；用下面这样继承的方式，方便后面调试和更改；命名方式可以将 BO 改为 VO。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里定义前端需要使用的VO 如这里的大盘展示需要的数据对象。</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AnalysisVO</span> <span class="keyword">extends</span> <span class="title">IndexPageCountBO</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>编写 model 模块的<code>effects</code>和<code>reducers</code>。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">effects: &#123;</span><br><span class="line">      *<span class="function"><span class="title">fetchDashboardAnalysis</span>(<span class="params">&#123;payload=&#123;&#125;&#125;,&#123;call,put&#125;</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">const</span> response:CustomWebResult&lt;AnalysisVO&gt; = <span class="keyword">yield</span> call(API.commonApiRpc.getDefineCount.request,payload);</span><br><span class="line">            <span class="keyword">if</span>(response)&#123;</span><br><span class="line">            <span class="keyword">yield</span> put(&#123;</span><br><span class="line">                  type: <span class="string">&#x27;SAVE_STATE&#x27;</span>,</span><br><span class="line">                  payload: &#123;</span><br><span class="line">                        analysis: response.data || <span class="keyword">new</span> AnalysisVO</span><br><span class="line">                  &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;,</span><br><span class="line">reducers: &#123;</span><br><span class="line">      <span class="function"><span class="title">SAVE_STATE</span>(<span class="params">state, action</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">            ...state,</span><br><span class="line">            ...action.payload,</span><br><span class="line">            &#125;;</span><br><span class="line">      &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="6">
<li><p>在<code>connect.d.ts</code>中,声明 dashboard 的 state 结构；</p>
</li>
<li><p>在页面中用 dva 提供的高阶函数包装页面组件；</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(<span class="function">(<span class="params">&#123; dashboard, loading &#125;: ConnectState</span>) =&gt;</span> (&#123;</span><br><span class="line">  analysisData: dashboard.analysis,</span><br><span class="line">  loading: loading.effects[<span class="string">&#x27;dashboard/fetchDashboardAnalysis&#x27;</span>],</span><br><span class="line">&#125;))(Analysis);</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>页面正确的位置派发请求，并获取数据展示；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (dispatch) &#123;</span><br><span class="line">    dispatch(&#123;</span><br><span class="line">      type: <span class="string">&#x27;dashboard/fetchDashboardAnalysis&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure>

<p>以上就是一个模块从零搭建的过程，这边建议，page 和 model 尽量是一一对应上的。当然其中会有一些如<code>global</code>,<code>common</code>等用来管理全局状态和通用状态的 model。</p>
<h2><span id="fa-bu">发布</span></h2><h3><span id="ru-he-bu-shu">如何部署</span></h3><p>对于<code>umi.js</code>的项目而言，项目构建只需要在项目根目录下运行 <code>npm run build</code>，就可以打包构建项目了，会在根目录下生成<code>dist</code>文件夹，如果没有设置按需加载，那么只会打包出 <code>index.html</code>、<code>umi.js</code>和<code>umi.css</code> 三个文件。一般而言，只需要将这些静态资源发布到 web 服务器即可。</p>
<p>因为目前项目使用的是<code>volecity</code>的模版引擎，严格来说，是前后端不分离的写法。在已经提供了<code>index.html</code>的情况，我们只需要向模版页面提供<strong>js</strong>和<strong>css</strong>，并在页面中添加 <code>react 的根节点元素</code>即可。那我们部署的流程如下：</p>
<ol>
<li>前端打包;</li>
<li>将打包好的<code>umi.js</code>和<code>umi.css</code>文件移动到工程静态资源文件夹下;</li>
<li><code>volecity</code>模版中引入 js 和 css;</li>
<li>后端 aone 发布。</li>
</ol>
<p>注意前端需要配置为禁止打包 hash 和使用 hash 路由，如果静态资源未配置，那么建议也不要页面按需加载打包了。<br>当然也有通过配置 <code>config.ts</code>中的<code>base</code>，部署到非根目录，再在<code>controller</code>中，添加对应的路径映射，避免了页面路由和 api 请求冲突。</p>
<h3><span id="ban-ben-kong-zhi">版本控制</span></h3><p>目前通过静态资源文件夹名实现版本控制。</p>
<p>前端项目的<code>package.json</code>中，会配置一条命令<code>deploy</code>,当你运行<code>npm run deploy</code>，就会按照版本号作为文件夹名，打包静态资源到类路径下的<code>static</code>文件夹下。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;xxxx&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.0.2&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;xxx前端项目&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;umi build&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span>: <span class="string">&quot;umi build &amp;&amp; mkdir ../onedefine-start/src/main/resources/static/$&#123;npm_package_version&#125; &amp;&amp;  cp  -r dist/* ../onedefine-start/src/main/resources/static/$&#123;npm_package_version&#125;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;npm run start:dev&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>java 代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	<span class="meta">@Value(&quot;$&#123;front.version&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> String projectFrontVersion;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 首页页面</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">   <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">root</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       ModelAndView mav = <span class="keyword">new</span> ModelAndView(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">       mav.addObject(<span class="string">&quot;projectfrontversion&quot;</span>, projectFrontVersion);</span><br><span class="line">       <span class="keyword">return</span> mav;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><code>index.vm</code>如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">## 判断前端版本</span><br><span class="line"> #if(!$!projectfrontversion)</span><br><span class="line">   &lt;h1&gt;前端版本获取失败&lt;&#x2F;h1&gt;</span><br><span class="line"> #else</span><br><span class="line">   &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;&#x2F;static&#x2F;$!projectfrontversion&#x2F;umi.css&quot;&#x2F;&gt;</span><br><span class="line">   &lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;static&#x2F;$!projectfrontversion&#x2F;umi.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"> #end</span><br></pre></td></tr></table></figure>

<p>以上部署方法比较死板，需要修改很多文件。按照之前的 def 发布经验，即使不使用 diamond 的情况下，也可以通过配置中心的方式控制版本。这里不多介绍。</p>
<h1><span id="xiang-guan-lian-jie">相关链接</span></h1><ul>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh/guide/">Umi.js</a></li>
<li><a target="_blank" rel="noopener" href="https://ant.design/docs/react/introduce-cn">Ant Design</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/alibaba/pont">Pont</a></li>
<li><a target="_blank" rel="noopener" href="https://react.docschina.org/docs/getting-started.html">React.js</a></li>
<li><a target="_blank" rel="noopener" href="https://www.tslang.cn/docs/home.html">Typescript</a></li>
<li>…</li>
</ul>

                
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/more/web-more/web-interview/" data-toggle="tooltip" data-placement="top" title="【分享】关于最近在面试中，遇到的一些问题的汇总～">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/more/web-more/debounce-throttle/" data-toggle="tooltip" data-placement="top" title="【拓展】防抖（Debounce）和节流（Throttle）">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <br>

                <!--打赏-->
                
                    <div class="reward">
                        <div class="reward-button">赏 <span class="reward-code"> 
                            <span class="alipay-code"> <img class="alipay-img" src="/img/reward/alipay.jpg"><b>支付宝打赏</b></span> 
                            <span class="wechat-code"> <img class="wechat-img" src="/img/reward/wechat_pay.jpg"><b>微信打赏</b> </span>
                            </span></div>
                        <p class="reward-notice">赞赏一下</p>
                    </div>
                
                <!--打赏-->

                <br>
                <!--分享-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--分享-->
                <br>                       
                
                <!-- require APlayer -->
                
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
                <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>

                <div class="aplayer"
                    data-id="2297428102"
                    data-server="netease"
                    data-type="playlist"
                    data-fixed="true" >
                </div>
                

                
        
                    
                        <!-- 来必力City版安装代码 --> 
                        <div id="lv-container" data-id="city" data-uid="MTAyMC80Mzg3OC8yMDQxMw==">
                            <script type="text/javascript">
                                (function (d, s) {
                                    var j, e = d.getElementsByTagName(s)[0];
        
                                    if (typeof LivereTower === 'function') { return; }
        
                                    j = d.createElement(s);
                                    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                                    j.async = true;
        
                                    e.parentNode.insertBefore(j, e);
                                })(document, 'script');
                            </script>
                            <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
                        </div>
                        <!-- City版安装代码已完成 -->
                    
            </div>
            
            <!-- Table of Contents -->
            
  
    <style>
      span.toc-nav-number{
        display: none
      }
    </style>
  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        <!-- toc -->
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">开发环境准备</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">node</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">1.1.1.</span> <span class="toc-nav-text">安装 node.js &#x2F; npm</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">vscode 代码编辑器</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">前端语言和框架</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">ES6</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.1.1.</span> <span class="toc-nav-text">const、let 和 var</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.1.2.</span> <span class="toc-nav-text">解构</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.1.3.</span> <span class="toc-nav-text">箭头函数</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.1.4.</span> <span class="toc-nav-text">对象的拓展</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.1.5.</span> <span class="toc-nav-text">Promise 对象</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.1.6.</span> <span class="toc-nav-text">async &#x2F; await</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.1.7.</span> <span class="toc-nav-text">Class 的语法</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.1.8.</span> <span class="toc-nav-text">Module 的语法</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">TypeScript</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.2.1.</span> <span class="toc-nav-text">基本语法</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.2.2.</span> <span class="toc-nav-text">基本类型</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.2.3.</span> <span class="toc-nav-text">任意值</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.2.4.</span> <span class="toc-nav-text">复合类型</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.2.5.</span> <span class="toc-nav-text">interface、type 和 class</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.2.6.</span> <span class="toc-nav-text">类型推导</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.2.7.</span> <span class="toc-nav-text">函数定义</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.2.8.</span> <span class="toc-nav-text">文件类型</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">React.js</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.3.1.</span> <span class="toc-nav-text">jsx</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.3.2.</span> <span class="toc-nav-text">组件</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.3.3.</span> <span class="toc-nav-text">Props</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.3.4.</span> <span class="toc-nav-text">State</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.3.5.</span> <span class="toc-nav-text">生命周期</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.3.6.</span> <span class="toc-nav-text">事件处理</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.3.7.</span> <span class="toc-nav-text">列表和 key</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">2.3.8.</span> <span class="toc-nav-text">父组件和子组件通信</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">工具和 UI</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">Umi.js</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">3.1.1.</span> <span class="toc-nav-text">✨ 特性</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">Dva</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">Ant Design</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">3.3.1.</span> <span class="toc-nav-text">✨ 特性</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text">Pont</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">开发和发布</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">从零开始构建项目</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">4.1.1.</span> <span class="toc-nav-text">使用 create-umi 脚手架创建基础项目</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">4.1.2.</span> <span class="toc-nav-text">接入接口层自动生成工具 pont</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">4.1.3.</span> <span class="toc-nav-text">代理请求</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">4.1.4.</span> <span class="toc-nav-text">创建一个页面</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">发布</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">4.2.1.</span> <span class="toc-nav-text">如何部署</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">4.2.2.</span> <span class="toc-nav-text">版本控制</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">相关链接</span></a></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <div><a href="/tags/">FEATURED TAGS</a></div>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Share" title="Share">Share</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://huangxuan.me/" target="_blank">Hux Blog</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>

<!-- 复制添加版权申明-->
<script>
    /**/
    function setClipboardText(event){
        event.preventDefault();//阻止元素发生默认的行为（例如，当点击提交按钮时阻止对表单的提交）。
        var node = document.createElement('div');
        //对documentfragment不熟，不知道怎么获取里面的内容，用了一个比较笨的方式
        node.appendChild(window.getSelection().getRangeAt(0).cloneContents());
        //getRangeAt(0)返回对基于零的数字索引与传递参数匹配的选择对象中的范围的引用。对于连续选择，参数应为零。
        var htmlData = '<div>'
            + node.innerHTML
            + '<br /><br />著作权归作者所有。<br />'
            + '商业转载请联系作者获得授权，非商业转载请注明出处。<br />'
            + '作者：fangzhioo <br />链接：'
            + location.href
            + '<br />来源：fangzhioo.github.io<br /><br />'
            + '</div>';
        var textData = window.getSelection().getRangeAt(0)
            + '\n\n著作权归作者所有。\n'
            + '商业转载请联系作者获得授权，非商业转载请注明出处。\n'
            + '作者：fangzhioo\n'
            + '链接：'
            + location.href
            + '来源：fangzhioo.github.io\n\n';
        if(event.clipboardData){
            event.clipboardData.setData("text/html", htmlData);
            //setData(剪贴板格式, 数据) 给剪贴板赋予指定格式的数据。返回 true 表示操作成功。
            event.clipboardData.setData("text/plain",textData);
        }
        else if(window.clipboardData){ //window.clipboardData的作用是在页面上将需要的东西复制到剪贴板上，提供了对于预定义的剪贴板格式的访问，以便在编辑操作中使用。
            return window.clipboardData.setData("text", textData);
        }
    };
 
    document.addEventListener('copy',function(e){
        setClipboardText(e);
    });
</script>

<!-- smooth scroll behavior polyfill  -->
<script type="text/javascript" src="/js/smoothscroll.js"></script>
<script>
        $('#toc').on('click','a',function(a){
            // var isChrome = window.navigator.userAgent.indexOf("Chrome") !== -1;
            // console.log(window.navigator.userAgent,isChrome)
            // if(isChrome) {
                // console.log(a.currentTarget.outerHTML);
                // console.log($(a.currentTarget).attr("href"));
                //跳转到指定锚点
                // document.getElementById(a.target.innerText.toLowerCase()).scrollIntoView(true);
                console.log('toc',a)
                var target = document.getElementById($(a.currentTarget).attr("href").replace("#",""));
                target && target.scrollIntoView({behavior: 'smooth' });
            // }
        })  
</script>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/fang-zhi-4-73">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/fangzhioooo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/fangzhioo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; 方志 2021 
                    <br>
                    Theme by <a target="_blank" rel="noopener" href="https://huangxuan.me/">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="https://fangzhioo.github.io">Fz</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=fangzhioo&repo=fangzhioo.github.io&type=star&count=true" >
                    </iframe>
                    <br />
                    <!--总访问量统计-->
                    
                        <span id="busuanzi_container_site_pv" style="margin-left: 3px;">
                            总访问量<span id="busuanzi_value_site_pv"></span>次
                        </span>
                    
                    <!--总访问量统计-->

                </p>
            </div>
        </div>
    </div>
</footer>

<!-- Custom Theme JavaScript -->

<script src="/js/my-blog.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://fangzhioo.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-138588101-1';
    var _gaDomain = 'fangzhioo.github.io';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = 'dce5d892b228cc0a253520da429e7f11';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://fangzhioo.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

<!-- live2d -->
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":true,"debug":false,"model":{"position":"right","width":200,"height":400,"jsonPath":"/live2dw/assets/sagiri.model.json"},"mobile":{"show":true},"react":{"opacity":0.6},"log":false});</script>

</body>

</html>
