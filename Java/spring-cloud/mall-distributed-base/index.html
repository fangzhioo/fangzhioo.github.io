<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="æ–¹å¿—çš„ä¸ªäººåšå®¢,fangzhioo,blog">
    <meta name="keyword"  content="æ–¹å¿—,fangzhioo,Fz&#39;s Blog,Kirito,æ¡äºº,åšå®¢,äº’è”ç½‘,Web,JavaScript,Html,Css,Vue.js,React.js,å‰ç«¯,è®¾è®¡,spring, spring cloud, spring cloud alibaba, spring boot, mall, docker, mysql, nacos">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          ã€Spring-cloudã€‘guliå•†åŸ-åˆ†å¸ƒå¼åŸºç¡€ - æ–¹å¿— | fangzhioo
        
    </title>

    <link rel="canonical" href="https://fangzhioo.github.io/Java/spring-cloud/mall-distributed-base/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
<link rel="stylesheet" href="/css/beantech.min.css">


    
<link rel="stylesheet" href="/css/donate.css">

    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/prism.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/toc.css">


    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script>
      // ga
      window.onload = function() {
        setTimeout(function() {
          let script = document.createElement("script");
          script.setAttribute("async", "");
          script.src = "//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3409699730406381";
          document.body.appendChild(script);
        }, 2e3);
      }
    </script>

    <!--ä¸è’œå­-->
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- jQuery -->
    <!-- 
<script src="/js/jquery.min.js"></script>
 -->
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <!-- 
<script src="/js/bootstrap.min.js"></script>
 -->
    <script src="https://cdn.bootcss.com/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <!-- google ad -->
    <script data-ad-client="ca-pub-3409699730406381" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('//www.talklee.com/api/bing?rand=true')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#SpringCloud" title="SpringCloud">SpringCloud</a>
                            
                        </div>
                        <h1>ã€Spring-cloudã€‘guliå•†åŸ-åˆ†å¸ƒå¼åŸºç¡€</h1>
                        <h2 class="subheading">ä»é›¶å¼€å§‹ä¸€ä¸ªåˆ†å¸ƒå¼å•†åŸçš„åˆ›å»º</h2>

                        <!--æ–‡ç« è®¿é—®é‡ç»Ÿè®¡-->
                        
                            <span id="busuanzi_container_page_pv">æœ¬æ–‡å·²è¢«é˜…è¯»è¿‡<span id="busuanzi_value_page_pv"></span>æ¬¡</span>
                        
                        <!--æ–‡ç« è®¿é—®é‡ç»Ÿè®¡-->

                        <span class="meta">
                            Posted by æ–¹å¿— on
                            2021-06-01
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Fz Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    
                        <li>
                            <a href="/archive/" >Archives</a>
                        </li>
                    
                        <li>
                            <a href="/tags/" >Tags</a>
                        </li>
                    
                        <li>
                            <a href="/about/" >About</a>
                        </li>
                    

                    <!-- 

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                    

                        
                    

                        
                    

                        
                    

                        
                    

                        
                    

                        
                        <li>
                            <a href="/love/">âœ¨è‡´æˆ‘çš„å°å¯çˆ±ğŸ’•ï½</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                     -->
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <blockquote>
<p>ä¸€ä¸‹å†…å®¹æ¥è‡ª <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1np4y1C7Yf">å°šç¡…è°·â€”â€”å…¨ç½‘æœ€å¼ºç”µå•†æ•™ç¨‹ã€Šè°·ç²’å•†åŸã€‹</a></p>
</blockquote>
<h2 id="1-æ•´ä½“ä»‹ç»"><a href="#1-æ•´ä½“ä»‹ç»" class="headerlink" title="1. æ•´ä½“ä»‹ç»"></a>1. æ•´ä½“ä»‹ç»</h2><p><img src="/img/spring-cloud/image-20200422211607028.png" alt="image-20200422211607028"></p>
<h3 id="1ï¼‰å®‰è£…vagrant"><a href="#1ï¼‰å®‰è£…vagrant" class="headerlink" title="1ï¼‰å®‰è£…vagrant"></a>1ï¼‰å®‰è£…vagrant</h3><h3 id="2ï¼‰å®‰è£…Centos7"><a href="#2ï¼‰å®‰è£…Centos7" class="headerlink" title="2ï¼‰å®‰è£…Centos7"></a>2ï¼‰å®‰è£…Centos7</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ vagrant init centos/7
A <span class="token variable"><span class="token variable">`</span>Vagrantfile<span class="token variable">`</span></span> has been placed <span class="token keyword">in</span> this directory. You are now
ready to <span class="token variable"><span class="token variable">`</span>vagrant up<span class="token variable">`</span></span> your first virtual environment<span class="token operator">!</span> Please <span class="token builtin class-name">read</span>
the comments <span class="token keyword">in</span> the Vagrantfile as well as documentation on
<span class="token variable"><span class="token variable">`</span>vagrantup.com<span class="token variable">`</span></span> <span class="token keyword">for</span> <span class="token function">more</span> information on using Vagrant.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤åï¼Œä¼šåœ¨ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹ç”ŸæˆVagrantfileæ–‡ä»¶ã€‚</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ vagrant up
Bringing machine <span class="token string">'default'</span> up with <span class="token string">'virtualbox'</span> provider<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> default: Box <span class="token string">'centos/7'</span> could not be found. Attempting to <span class="token function">find</span> and install<span class="token punctuation">..</span>.
    default: Box Provider: virtualbox
    default: Box Version: <span class="token operator">></span><span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">==</span><span class="token operator">></span> default: Loading metadata <span class="token keyword">for</span> box <span class="token string">'centos/7'</span>
    default: URL: https://vagrantcloud.com/centos/7
<span class="token operator">==</span><span class="token operator">></span> default: Adding box <span class="token string">'centos/7'</span> <span class="token punctuation">(</span>v1905.1<span class="token punctuation">)</span> <span class="token keyword">for</span> provider: virtualbox
    default: Downloading: https://vagrantcloud.com/centos/boxes/7/versions/1905.1/providers/virtualbox.box
    default: Download redirected to host: cloud.centos.org
    default: Progress: <span class="token number">0</span>% <span class="token punctuation">(</span>Rate: <span class="token number">6717</span>/s, Estimated <span class="token function">time</span> remaining: <span class="token number">7</span>:33:42<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸‹è½½é•œåƒè¿‡ç¨‹æ¯”è¾ƒæ¼«é•¿ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨å…ˆç”¨ä¸‹è½½å·¥å…·ä¸‹è½½åˆ°æœ¬åœ°åï¼Œç„¶åä½¿ç”¨â€œ vagrant box add â€æ·»åŠ ï¼Œå†â€œvagrant upâ€å³å¯</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment">#å°†ä¸‹è½½çš„é•œåƒæ·»åŠ åˆ°virtualBoxä¸­</span>
$ vagrant box <span class="token function">add</span> centos/7 E:<span class="token punctuation">\</span>è¿…é›·ä¸‹è½½<span class="token punctuation">\</span>CentOS-7-x86_64-Vagrant-1905_01.VirtualBox.box
<span class="token operator">==</span><span class="token operator">></span> box: Box <span class="token function">file</span> was not detected as metadata. Adding it directly<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> box: Adding box <span class="token string">'centos/7'</span> <span class="token punctuation">(</span>v0<span class="token punctuation">)</span> <span class="token keyword">for</span> provider:
    box: Unpacking necessary files from: file:///E:/%D1%B8%C0%D7%CF%C2%D4%D8/CentOS-7-x86_64-Vagrant-1905_01.VirtualBox.box
    box:
<span class="token operator">==</span><span class="token operator">></span> box: Successfully added box <span class="token string">'centos/7'</span> <span class="token punctuation">(</span>v0<span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token string">'virtualbox'</span><span class="token operator">!</span>

<span class="token comment">#å¯åŠ¨</span>
$ vagrant up
Bringing machine <span class="token string">'default'</span> up with <span class="token string">'virtualbox'</span> provider<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> default: Importing base box <span class="token string">'centos/7'</span><span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> default: Matching MAC address <span class="token keyword">for</span> NAT networking<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> default: Setting the name of the VM: Administrator_default_1588497928070_24634
<span class="token operator">==</span><span class="token operator">></span> default: Clearing any previously <span class="token builtin class-name">set</span> network interfaces<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> default: Preparing network interfaces based on configuration<span class="token punctuation">..</span>.
    default: Adapter <span class="token number">1</span>: nat
    default: Adapter <span class="token number">2</span>: hostonly
<span class="token operator">==</span><span class="token operator">></span> default: Forwarding ports<span class="token punctuation">..</span>.
    default: <span class="token number">22</span> <span class="token punctuation">(</span>guest<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">2222</span> <span class="token punctuation">(</span>host<span class="token punctuation">)</span> <span class="token punctuation">(</span>adapter <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token operator">></span> default: Booting VM<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> default: Waiting <span class="token keyword">for</span> machine to boot. This may take a few minutes<span class="token punctuation">..</span>.
    default: SSH address: <span class="token number">127.0</span>.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default:
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair <span class="token keyword">for</span> better security.
    default:
    default: Inserting generated public key within guest<span class="token punctuation">..</span>.
    default: Removing insecure key from the guest <span class="token keyword">if</span> it's present<span class="token punctuation">..</span>.
    default: Key inserted<span class="token operator">!</span> Disconnecting and reconnecting using new SSH key<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> default: Machine booted and ready<span class="token operator">!</span>
<span class="token operator">==</span><span class="token operator">></span> default: Checking <span class="token keyword">for</span> guest additions <span class="token keyword">in</span> VM<span class="token punctuation">..</span>.
    default: No guest additions were detected on the base box <span class="token keyword">for</span> this VM<span class="token operator">!</span> Guest
    default: additions are required <span class="token keyword">for</span> forwarded ports, shared folders, <span class="token function">host</span> only
    default: networking, and more. If SSH fails on this machine, please <span class="token function">install</span>
    default: the guest additions and repackage the box to continue.
    default:
    default: This is not an error message<span class="token punctuation">;</span> everything may <span class="token builtin class-name">continue</span> to work properly,
    default: <span class="token keyword">in</span> <span class="token function">which</span> <span class="token keyword">case</span> you may ignore this message.
<span class="token operator">==</span><span class="token operator">></span> default: Configuring and enabling network interfaces<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">></span> default: Rsyncing folder: /cygdrive/c/Users/Administrator/ <span class="token operator">=</span><span class="token operator">></span> /vagrant

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>vagrant ssh å¼€å¯SSHï¼Œå¹¶ç™»é™†åˆ°centos7</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ vagrant <span class="token function">ssh</span>
<span class="token punctuation">[</span>vagrant@localhost ~<span class="token punctuation">]</span>$ <span class="token function">ip</span> addr
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope <span class="token function">host</span>
       valid_lft forever preferred_lft forever
<span class="token number">2</span>: eth0: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc pfifo_fast state UP group default qlen <span class="token number">1000</span>
    link/ether <span class="token number">52</span>:54:00:8a:fe:e6 brd ff:ff:ff:ff:ff:ff
    inet <span class="token number">10.0</span>.2.15/24 brd <span class="token number">10.0</span>.2.255 scope global noprefixroute dynamic eth0
       valid_lft 86091sec preferred_lft 86091sec
    inet6 fe80::5054:ff:fe8a:fee6/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever
<span class="token number">3</span>: eth1: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc pfifo_fast state UP group default qlen <span class="token number">1000</span>
    link/ether 08:00:27:d1:76:f6 brd ff:ff:ff:ff:ff:ff
    inet <span class="token number">192.168</span>.56.102/24 brd <span class="token number">192.168</span>.56.255 scope global noprefixroute dynamic eth1
       valid_lft 892sec preferred_lft 892sec
    inet6 fe80::8c94:1942:ba09:2458/64 scope <span class="token function">link</span> noprefixroute
       valid_lft forever preferred_lft forever
<span class="token punctuation">[</span>vagrant@localhost ~<span class="token punctuation">]</span>$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>









<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token operator">></span>ipconfig

Windows IP é…ç½®

ä»¥å¤ªç½‘é€‚é…å™¨ VirtualBox Host-Only Network:

   è¿æ¥ç‰¹å®šçš„ DNS åç¼€ <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span>
   æœ¬åœ°é“¾æ¥ IPv6 åœ°å€. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> fe80::a00c:1ffa:a39a:c8c2%16
   IPv4 åœ°å€ <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">192.168</span>.56.1
   å­ç½‘æ©ç   <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">255.255</span>.255.0
   é»˜è®¤ç½‘å…³. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>







<p>é…ç½®ç½‘ç»œä¿¡æ¯ï¼Œæ‰“å¼€â€Vagrantfileâ€æ–‡ä»¶ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">config.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.10&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>ä¿®æ”¹å®Œæˆåï¼Œé‡å¯å¯åŠ¨vagrant</p>
<pre class="line-numbers language-none"><code class="language-none">vagrant reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ£€æŸ¥å®¿ä¸»æœºå’ŒvirtualBoxä¹‹é—´çš„é€šä¿¡æ˜¯å¦æ­£å¸¸</p>
<pre class="line-numbers language-none"><code class="language-none">[vagrant@localhost ~]$ ping 192.168.43.43                                                                                                         PING 192.168.43.43 (192.168.43.43) 56(84) bytes of data.
64 bytes from 192.168.43.43: icmp_seq&#x3D;1 ttl&#x3D;127 time&#x3D;0.533 ms
64 bytes from 192.168.43.43: icmp_seq&#x3D;2 ttl&#x3D;127 time&#x3D;0.659 ms

--- 192.168.43.43 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min&#x2F;avg&#x2F;max&#x2F;mdev &#x3D; 0.533&#x2F;0.596&#x2F;0.659&#x2F;0.063 ms
[vagrant@localhost ~]$
[vagrant@localhost ~]$
[vagrant@localhost ~]$ ping www.baidu.com
PING www.a.shifen.com (112.80.248.76) 56(84) bytes of data.
64 bytes from 112.80.248.76 (112.80.248.76): icmp_seq&#x3D;1 ttl&#x3D;53 time&#x3D;56.1 ms
64 bytes from 112.80.248.76 (112.80.248.76): icmp_seq&#x3D;2 ttl&#x3D;53 time&#x3D;58.5 ms
64 bytes from 112.80.248.76 (112.80.248.76): icmp_seq&#x3D;3 ttl&#x3D;53 time&#x3D;53.4 ms
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¼€å¯è¿œç¨‹ç™»é™†ï¼Œä¿®æ”¹â€œ/etc/ssh/sshd_configâ€</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">PermitRootLogin <span class="token function">yes</span> 
PasswordAuthentication <span class="token function">yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>ç„¶åé‡å¯SSHD</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">systemctl restart sshd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ä½¿ç”¨Xshellæˆ–SecureCRTè¿›è¡Œè¿œç¨‹è¿æ¥ã€‚</p>
<p><img src="/img/spring-cloud/image-20200503174735162.png" alt="image-20200503174735162"></p>
<h2 id="2-dockerä¸­å®‰è£…mysql"><a href="#2-dockerä¸­å®‰è£…mysql" class="headerlink" title="2. dockerä¸­å®‰è£…mysql"></a>2. dockerä¸­å®‰è£…mysql</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@hadoop-104 module<span class="token punctuation">]</span><span class="token comment"># docker pull mysql:5.7</span>
<span class="token number">5.7</span>: Pulling from library/mysql
123275d6e508: Already exists 
27cddf5c7140: Pull complete 
c17d442e14c9: Pull complete 
2eb72ffed068: Pull complete 
d4aa125eb616: Pull complete 
52560afb169c: Pull complete 
68190f37a1d2: Pull complete 
3fd1dc6e2990: Pull complete 
85a79b83df29: Pull complete 
35e0b437fe88: Pull complete 
992f6a10268c: Pull complete 
Digest: sha256:82b72085b2fcff073a6616b84c7c3bcbb36e2d13af838cec11a9ed1d0b183f5e
Status: Downloaded newer image <span class="token keyword">for</span> mysql:5.7
docker.io/library/mysql:5.7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æŸ¥çœ‹é•œåƒ</p>
<pre class="line-numbers language-none"><code class="language-none">[root@hadoop-104 module]# docker images
REPOSITORY  TAG    IMAGE ID     CREATED       SIZE
mysql       5.7    f5829c0eee9e 2 hours ago   455MB
[root@hadoop-104 module]# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>å¯åŠ¨mysql</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> docker run -p <span class="token number">3306</span>:3306 --name mysql <span class="token punctuation">\</span>
-v /mydata/mysql/log:/var/log/mysql <span class="token punctuation">\</span>
-v /mydata/mysql/data:/var/lib/mysql <span class="token punctuation">\</span>
-v /mydata/mysql/conf:/etc/mysql <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root <span class="token punctuation">\</span>
-d mysql:5.7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¿®æ”¹é…ç½®</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">[root@hadoop-104</span> <span class="token attr-value">conf]# pwd</span>
/mydata/mysql/conf


<span class="token attr-name">[root@hadoop-104</span> <span class="token attr-value">conf]# cat my.cnf</span>
[client]
<span class="token attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token attr-value">utf8</span>
[mysql]
<span class="token attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token attr-value">utf8</span>
[mysqld]
<span class="token attr-name">init_connect</span><span class="token punctuation">=</span><span class="token attr-value">'SET collation_connection = utf8_unicode_ci'</span>
<span class="token attr-name">init_connect</span><span class="token punctuation">=</span><span class="token attr-value">'SET NAMES utf8'</span>
<span class="token attr-name">character-set-server</span><span class="token punctuation">=</span><span class="token attr-value">utf8</span>
<span class="token attr-name">collation-server</span><span class="token punctuation">=</span><span class="token attr-value">utf8_unicode_ci</span>
skip-character-set-client-handshake
skip-name-resolve
<span class="token attr-name">[root@hadoop-104</span> <span class="token attr-value">conf]# </span>

<span class="token attr-name">[root@hadoop-104</span> <span class="token attr-value">conf]# docker restart mysql</span>
mysql
<span class="token attr-name">[root@hadoop-104</span> <span class="token attr-value">conf]# </span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>è¿›å…¥å®¹å™¨æŸ¥çœ‹é…ç½®ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@hadoop-104 conf<span class="token punctuation">]</span><span class="token comment"># docker exec -it mysql /bin/bash</span>
root@b3a74e031bd7:/<span class="token comment"># whereis mysql</span>
mysql: /usr/bin/mysql /usr/lib/mysql /etc/mysql /usr/share/mysql

root@b3a74e031bd7:/<span class="token comment"># ls /etc/mysql </span>
my.cnf
root@b3a74e031bd7:/<span class="token comment"># cat /etc/mysql/my.cnf </span>
<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
default-character-set<span class="token operator">=</span>utf8
<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
default-character-set<span class="token operator">=</span>utf8
<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token assign-left variable">init_connect</span><span class="token operator">=</span><span class="token string">'SET collation_connection = utf8_unicode_ci'</span>
<span class="token assign-left variable">init_connect</span><span class="token operator">=</span><span class="token string">'SET NAMES utf8'</span>
character-set-server<span class="token operator">=</span>utf8
collation-server<span class="token operator">=</span>utf8_unicode_ci
skip-character-set-client-handshake
skip-name-resolve
root@b3a74e031bd7:/<span class="token comment"># </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>è®¾ç½®å¯åŠ¨dockeræ—¶ï¼Œå³è¿è¡Œmysql</p>
<pre class="line-numbers language-none"><code class="language-none">[root@hadoop-104 ~]# docker update mysql --restart&#x3D;always
mysql
[root@hadoop-104 ~]# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h2 id="3-dockerä¸­å®‰è£…redis"><a href="#3-dockerä¸­å®‰è£…redis" class="headerlink" title="3. dockerä¸­å®‰è£…redis"></a>3. dockerä¸­å®‰è£…redis</h2><p>ä¸‹è½½docker</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># docker pull redis</span>
Using default tag: latest
latest: Pulling from library/redis
123275d6e508: Already exists 
f2edbd6a658e: Pull complete 
66960bede47c: Pull complete 
79dc0b596c90: Pull complete 
de36df38e0b6: Pull complete 
602cd484ff92: Pull complete 
Digest: sha256:1d0b903e3770c2c3c79961b73a53e963f4fd4b2674c2c4911472e8a054cb5728
Status: Downloaded newer image <span class="token keyword">for</span> redis:latest
docker.io/library/redis:latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>å¯åŠ¨docker</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /mydata/redis/conf</span>
<span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># touch /mydata/redis/conf/redis.conf</span>
<span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># echo "appendonly yes"  >> /mydata/redis/conf/redis.conf</span>
<span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># docker run -p 6379:6379 --name redis -v /mydata/redis/data:/data \</span>
<span class="token operator">></span> -v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
<span class="token operator">></span> -d redis redis-server /etc/redis/redis.conf
ce7ae709711986e3f90c9278b284fe6f51f1c1102ba05f3692f0e934ceca1565
<span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p> è¿æ¥åˆ°dockerçš„redis</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it redis redis-cli</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> key1 v1
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get key1
<span class="token string">"v1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è®¾ç½®rediså®¹å™¨åœ¨dockerå¯åŠ¨çš„æ—¶å€™å¯åŠ¨</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># docker update redis --restart=always</span>
redis
<span class="token punctuation">[</span>root@hadoop-104 ~<span class="token punctuation">]</span><span class="token comment"># </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h2 id="4-åˆ›å»ºmavenå·¥ç¨‹"><a href="#4-åˆ›å»ºmavenå·¥ç¨‹" class="headerlink" title="4. åˆ›å»ºmavenå·¥ç¨‹"></a>4. åˆ›å»ºmavenå·¥ç¨‹</h2><h2 id="5-æ‰§è¡Œsqlè„šæœ¬"><a href="#5-æ‰§è¡Œsqlè„šæœ¬" class="headerlink" title="5. æ‰§è¡Œsqlè„šæœ¬"></a>5. æ‰§è¡Œsqlè„šæœ¬</h2><p>gulimall_oms.sql<br>gulimall_pms.sql<br>gulimall_sms.sql<br>gulimall_ums.sql<br>gulimall_wms.sql<br>pms_catelog.sql<br>sys_menus.sql</p>
<h2 id="6-clone-äººäººå¼€æº"><a href="#6-clone-äººäººå¼€æº" class="headerlink" title="6. clone äººäººå¼€æº"></a>6. clone äººäººå¼€æº</h2><p><a target="_blank" rel="noopener" href="https://gitee.com/renrenio">https://gitee.com/renrenio</a></p>
<p><img src="/img/spring-cloud/1587609877028.png" alt="1587609877028"></p>
<p>å…‹éš†åˆ°æœ¬åœ°ï¼š</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> clone https://gitee.com/renrenio/renren-fast-vue.git

<span class="token function">git</span> clone https://gitee.com/renrenio/renren-fast.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>å°†æ‹·è´ä¸‹æ¥çš„â€œrenren-fastâ€åˆ é™¤â€œ.gitâ€åï¼Œæ‹·è´åˆ°â€œgulimallâ€å·¥ç¨‹æ ¹ç›®å½•ä¸‹ï¼Œç„¶åå°†å®ƒä½œä¸ºgulimallçš„ä¸€ä¸ªmodule</p>
<p>åˆ›å»ºâ€œgulimall_adminâ€çš„æ•°æ®åº“ï¼Œç„¶åæ‰§è¡Œâ€œrenren-fast/db/mysql.sqlâ€ä¸­çš„SQlè„šæœ¬</p>
<p>ä¿®æ”¹â€œapplication-dev.ymlâ€æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºdevç¯å¢ƒï¼Œä¿®æ”¹è¿æ¥mysqlçš„urlå’Œç”¨æˆ·åå¯†ç </p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
        <span class="token key atrule">druid</span><span class="token punctuation">:</span>
            <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
            <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.137.14<span class="token punctuation">:</span>3306/gulimall_admin<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span>
            <span class="token key atrule">username</span><span class="token punctuation">:</span> root
            <span class="token key atrule">password</span><span class="token punctuation">:</span> root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p>å¯åŠ¨â€œgulimall_adminâ€ï¼Œç„¶åè®¿é—®â€œ<a target="_blank" rel="noopener" href="http://localhost:8080/renren-fast/">http://localhost:8080/renren-fast/</a>â€</p>
<p><img src="/img/spring-cloud/1587616296253.png" alt="1587616296253"></p>
<p>å®‰è£…node.jsï¼Œå¹¶ä¸”å®‰è£…ä»“åº“</p>
<pre class="line-numbers language-none"><code class="language-none">npm config set registry http:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">PS D:<span class="token punctuation">\</span>tmp<span class="token punctuation">\</span>renren-fast-vue<span class="token operator">></span> <span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry http://registry.npm.taobao.org/
PS D:<span class="token punctuation">\</span>tmp<span class="token punctuation">\</span>renren-fast-vue<span class="token operator">></span> <span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> WARN ajv-keywords@1.5.1 requires a peer of ajv@<span class="token operator">></span><span class="token operator">=</span><span class="token number">4.10</span>.0 but none is installed. You must <span class="token function">install</span> peer dependencies yourself.
<span class="token function">npm</span> WARN sass-loader@6.0.6 requires a peer of node-sass@^4.0.0 but none is installed. You must <span class="token function">install</span> peer dependencies yourself.
<span class="token function">npm</span> WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 <span class="token punctuation">(</span>node_modules<span class="token punctuation">\</span>fsevents<span class="token punctuation">)</span>:
<span class="token function">npm</span> WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="token keyword">for</span> fsevents@1.2.9: wanted <span class="token punctuation">&#123;</span><span class="token string">"os"</span><span class="token builtin class-name">:</span><span class="token string">"darwin"</span>,<span class="token string">"arch"</span><span class="token builtin class-name">:</span><span class="token string">"any"</span><span class="token punctuation">&#125;</span> <span class="token punctuation">(</span>current: <span class="token punctuation">&#123;</span><span class="token string">"os"</span><span class="token builtin class-name">:</span><span class="token string">"win32"</span>,<span class="token string">"arch"</span><span class="token builtin class-name">:</span><span class="token string">"x64"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

up to <span class="token function">date</span> <span class="token keyword">in</span> <span class="token number">17</span>.227s
PS D:<span class="token punctuation">\</span>tmp<span class="token punctuation">\</span>renren-fast-vue<span class="token operator">></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">PS D:<span class="token punctuation">\</span>tmp<span class="token punctuation">\</span>renren-fast-vue<span class="token operator">></span> <span class="token function">npm</span> run dev

<span class="token operator">></span> renren-fast-vue@1.2.2 dev D:<span class="token punctuation">\</span>tmp<span class="token punctuation">\</span>renren-fast-vue
<span class="token operator">></span> webpack-dev-server --inline --progress --config build/webpack.dev.conf.js

 <span class="token number">10</span>% building modules <span class="token number">5</span>/10 modules <span class="token number">5</span> active <span class="token punctuation">..</span>.-0<span class="token operator">!</span>D:<span class="token punctuation">\</span>tmp<span class="token punctuation">\</span>renren-fast-vue<span class="token punctuation">\</span>src<span class="token punctuation">\</span>main.js<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'cat'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>Use <span class="token variable"><span class="token variable">`</span>node --trace-warnings <span class="token punctuation">..</span>.<span class="token variable">`</span></span> to show where the warning was created<span class="token punctuation">)</span>
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'cd'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'chmod'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'cp'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'dirs'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'pushd'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'popd'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'echo'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'tempdir'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:19864<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'pwd'</span> of module exports inside circular dependency<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>å¸¸è§é—®é¢˜1ï¼šâ€œModule build failed: Error: Cannot find module â€˜node-sassâ€</p>
<p>è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡ºç°â€œModule build failed: Error: Cannot find module â€˜node-sassâ€™æŠ¥é”™é—®é¢˜â€ï¼Œè§£å†³æ–¹æ³•</p>
<blockquote>
<p>ç”¨npm install -g cnpm â€“registry=<a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a> ï¼Œä»æ·˜å®é•œåƒé‚£ä¸‹è½½ï¼Œç„¶åcnpmä¸‹è½½æˆåŠŸã€‚</p>
<p>æœ€åè¾“å…¥cnpm install node-sass â€“saveã€‚npm run devç»ˆäºèƒ½è·‘èµ·æ¥äº†ï¼ï¼ï¼<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œå¤•é˜³ä¸‹ç¾äº†å‰ªå½±ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38401285/article/details/86483278">https://blog.csdn.net/qq_38401285/article/details/86483278</a></p>
</blockquote>
<p>å¸¸è§é—®é¢˜2ï¼šcnpm - è§£å†³ â€œ cnpm : æ— æ³•åŠ è½½æ–‡ä»¶ C:\Users\93457\AppData\Roaming\npm\cnpm.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ ã€‚ã€‚ã€‚ â€œ</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/500m/p/11634969.html">https://www.cnblogs.com/500m/p/11634969.html</a></p>
<p>æ‰€æœ‰é—®é¢˜çš„æ ¹æºéƒ½åœ¨â€œnode_modulesâ€ï¼Œnpm installä¹‹å‰ï¼Œåº”è¯¥å°†è¿™ä¸ªæ–‡ä»¶å¤¹åˆ é™¤ï¼Œç„¶åå†è¿›è¡Œå®‰è£…å’Œè¿è¡Œã€‚</p>
<p>å†æ¬¡è¿è¡Œnpm run devæ¢å¤æ­£å¸¸ï¼š</p>
<p><img src="/img/spring-cloud/1587637858665.png" alt="1587637858665"></p>
<h2 id="7-clone-renren-generator"><a href="#7-clone-renren-generator" class="headerlink" title="7. clone renren-generator"></a>7. clone renren-generator</h2><h3 id="clone"><a href="#clone" class="headerlink" title="clone"></a>clone</h3><p><a target="_blank" rel="noopener" href="https://gitee.com/renrenio/renren-generator.git">https://gitee.com/renrenio/renren-generator.git</a></p>
<p>ç„¶åå°†è¯¥é¡¹ç›®æ”¾ç½®åˆ°â€œgulimallâ€çš„è·Ÿè·¯å¾„ä¸‹ï¼Œç„¶åæ·»åŠ è¯¥Moduleï¼Œå¹¶ä¸”æäº¤åˆ°githubä¸Š</p>
<h3 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h3><p>renren-generator/src/main/resources/generator.properties</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#ä»£ç ç”Ÿæˆå™¨ï¼Œé…ç½®ä¿¡æ¯</span>

<span class="token attr-name">mainPath</span><span class="token punctuation">=</span><span class="token attr-value">com.bigdata</span>
<span class="token comment">#åŒ…å</span>
<span class="token attr-name">package</span><span class="token punctuation">=</span><span class="token attr-value">com.bigdata.gulimall</span>
<span class="token attr-name">moduleName</span><span class="token punctuation">=</span><span class="token attr-value">product</span>
<span class="token comment">#ä½œè€…</span>
<span class="token attr-name">author</span><span class="token punctuation">=</span><span class="token attr-value">cosmoswong</span>
<span class="token comment">#Email</span>
<span class="token attr-name">email</span><span class="token punctuation">=</span><span class="token attr-value">cosmoswong@sina.com</span>
<span class="token comment">#è¡¨å‰ç¼€(ç±»åä¸ä¼šåŒ…å«è¡¨å‰ç¼€)</span>
<span class="token attr-name">tablePrefix</span><span class="token punctuation">=</span><span class="token attr-value">pms_</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="è¿è¡Œâ€œrenren-generatorâ€"><a href="#è¿è¡Œâ€œrenren-generatorâ€" class="headerlink" title="è¿è¡Œâ€œrenren-generatorâ€"></a>è¿è¡Œâ€œrenren-generatorâ€</h3><p>è®¿é—®ï¼š&lt;<a target="_blank" rel="noopener" href="http://localhost/">http://localhost:80/</a></p>
<p><img src="/img/spring-cloud/1587638853416.png" alt="1587638853416"></p>
<p>ç‚¹å‡»â€œrenren-fastâ€ï¼Œèƒ½å¤Ÿçœ‹åˆ°å®ƒå°†â€œrenren-fastâ€çš„æ‰€æœ‰è¡¨éƒ½åˆ—ä¸¾äº†å‡ºæ¥ï¼š</p>
<p><img src="/img/spring-cloud/1587638968519.png" alt="1587638968519"></p>
<p>é€‰æ‹©æ‰€æœ‰çš„è¡¨ï¼Œç„¶åç‚¹å‡»â€œç”Ÿæˆä»£ç â€ï¼Œå°†ä¸‹è½½çš„â€œrenren.zipâ€ï¼Œè§£å‹åå–å‡ºmainæ–‡ä»¶å¤¹ï¼Œæ”¾ç½®åˆ°â€œgulimall-productâ€é¡¹ç›®çš„mainç›®å½•ä¸­ã€‚</p>
<p>ä¸‹é¢çš„å‡ ä¸ªmoduleï¼Œä¹Ÿé‡‡ç”¨åŒæ ·çš„æ–¹å¼æ¥æ“ä½œã€‚</p>
<p>ä½†æ˜¯é’ˆå¯¹äºâ€œundo_logâ€ï¼Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜</p>
<p><img src="/img/spring-cloud/1587657745923.png" alt="1587657745923"></p>
<p>å®ƒçš„æ•°æ®ç±»å‹æ˜¯â€œlongblobâ€ç±»å‹ï¼Œé€†å‘å·¥ç¨‹åï¼Œå¯¹åº”çš„æ•°æ®ç±»å‹æœªçŸ¥ï¼š</p>
<p><img src="/img/spring-cloud/1587657812283.png" alt="1587657812283"></p>
<p>è¿™ä¸ªé—®é¢˜è¯¥è¦æ€ä¹ˆè§£å†³ï¼Ÿ</p>
<h2 id="8-å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#8-å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="8. å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>8. å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h2><p>è¦æ³¨æ„nacosé›†ç¾¤æ‰€åœ¨çš„serverï¼Œä¸€å®šè¦å…³é—­é˜²ç«å¢™ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°å„ç§é—®é¢˜ã€‚</p>
<p>æ­å»ºnacosé›†ç¾¤ï¼Œç„¶ååˆ†åˆ«å¯åŠ¨å„ä¸ªå¾®æœåŠ¡ï¼Œå°†å®ƒä»¬æ³¨å†Œåˆ°Nacosä¸­ã€‚</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">application</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> gulimall<span class="token punctuation">-</span>coupon
<span class="token key atrule">cloud</span><span class="token punctuation">:</span>
  <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
    <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.137.14<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æŸ¥çœ‹æ³¨å†Œæƒ…å†µï¼š</p>
<p><a target="_blank" rel="noopener" href="http://192.168.137.14:8848/nacos/#/serviceManagement?dataId=&amp;group=&amp;appName=&amp;namespace=">http://192.168.137.14:8848/nacos/#/serviceManagement?dataId=&amp;group=&amp;appName=&amp;namespace=</a></p>
<p><img src="/img/spring-cloud/1587694451601.png" alt="1587694451601"></p>
<h2 id="9-ä½¿ç”¨openfen"><a href="#9-ä½¿ç”¨openfen" class="headerlink" title="9. ä½¿ç”¨openfen"></a>9. ä½¿ç”¨openfen</h2><p>1)ã€å¼•å…¥open-feign</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>2)ã€ç¼–å†™ä¸€ä¸ªæ¥å£ï¼Œå‘Šè¯‰SpringCLoudè¿™ä¸ªæ¥å£éœ€è¦è°ƒç”¨è¿œç¨‹æœåŠ¡</p>
<p>ä¿®æ”¹â€œcom.bigdata.gulimall.coupon.controller.CouponControllerâ€ï¼Œæ·»åŠ ä»¥ä¸‹controlleræ–¹æ³•ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/member/list"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">memberCoupons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">CouponEntity</span> couponEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CouponEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    couponEntity<span class="token punctuation">.</span><span class="token function">setCouponName</span><span class="token punctuation">(</span><span class="token string">"discount 20%"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"coupons"</span><span class="token punctuation">,</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>couponEntity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æ–°å»ºâ€œcom.bigdata.gulimall.member.feign.CouponFeignServiceâ€æ¥å£</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">"gulimall_coupon"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CouponFeignService</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/coupon/coupon/member/list"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">memberCoupons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ä¿®æ”¹â€œcom.bigdata.gulimall.member.GulimallMemberApplicationâ€ç±»ï¼Œæ·»åŠ ä¸Šâ€@EnableFeignClientsâ€ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@EnableFeignClients</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">"com.bigdata.gulimall.member.feign"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GulimallMemberApplication</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">GulimallMemberApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>â€‹    å£°æ˜æ¥å£çš„æ¯ä¸€ä¸ªæ–¹æ³•éƒ½æ˜¯è°ƒç”¨å“ªä¸ªè¿œç¨‹æœåŠ¡çš„é‚£ä¸ªè¯·æ±‚</p>
<p>3)ã€å¼€å¯è¿œç¨‹è°ƒç”¨åŠŸèƒ½</p>
<p>com.bigdata.gulimall.member.controller.MemberController</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/coupons"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">MemberEntity</span> memberEntity<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">MemberEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    memberEntity<span class="token punctuation">.</span><span class="token function">setNickname</span><span class="token punctuation">(</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">R</span> memberCoupons <span class="token operator">=</span> couponFeignService<span class="token punctuation">.</span><span class="token function">memberCoupons</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> memberCoupons<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"member"</span><span class="token punctuation">,</span>memberEntity<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"coupons"</span><span class="token punctuation">,</span>memberCoupons<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"coupons"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p>(4)ã€è®¿é—®<a target="_blank" rel="noopener" href="http://localhost:8000/member/member/coupons">http://localhost:8000/member/member/coupons</a></p>
<p><img src="/img/spring-cloud/1587701348764.png" alt="1587701348764"></p>
<p>åœæ­¢â€œgulimall-couponâ€æœåŠ¡ï¼Œèƒ½å¤Ÿçœ‹åˆ°æ³¨å†Œä¸­å¿ƒæ˜¾ç¤ºè¯¥æœåŠ¡çš„å¥åº·å€¼ä¸º0ï¼š</p>
<p><img src="/img/spring-cloud/1587701521184.png" alt="1587701521184"></p>
<p>å†æ¬¡è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8000/member/member/coupons">http://localhost:8000/member/member/coupons</a></p>
<p><img src="/img/spring-cloud/1587701587456.png" alt="1587701587456"></p>
<p>å¯åŠ¨â€œgulimall-couponâ€æœåŠ¡ï¼Œå†æ¬¡è®¿é—®ï¼Œåˆæ¢å¤äº†æ­£å¸¸ã€‚</p>
<h2 id="10-é…ç½®ä¸­å¿ƒ"><a href="#10-é…ç½®ä¸­å¿ƒ" class="headerlink" title="10. é…ç½®ä¸­å¿ƒ"></a>10. é…ç½®ä¸­å¿ƒ</h2><h3 id="1ï¼‰ä¿®æ”¹â€œgulimall-couponâ€æ¨¡å—"><a href="#1ï¼‰ä¿®æ”¹â€œgulimall-couponâ€æ¨¡å—" class="headerlink" title="1ï¼‰ä¿®æ”¹â€œgulimall-couponâ€æ¨¡å—"></a>1ï¼‰ä¿®æ”¹â€œgulimall-couponâ€æ¨¡å—</h3><p>æ·»åŠ pomä¾èµ–ï¼š</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>åˆ›å»ºbootstrap.propertiesæ–‡ä»¶ï¼Œè¯¥é…ç½®æ–‡ä»¶ä¼šä¼˜å…ˆäºâ€œapplication.ymlâ€åŠ è½½ã€‚</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-coupon</span>
<span class="token attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">192.168.137.14:8848</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<h3 id="2ï¼‰ä¼ ç»Ÿæ–¹å¼"><a href="#2ï¼‰ä¼ ç»Ÿæ–¹å¼" class="headerlink" title="2ï¼‰ä¼ ç»Ÿæ–¹å¼"></a>2ï¼‰ä¼ ç»Ÿæ–¹å¼</h3><p>ä¸ºäº†è¯¦ç»†è¯´æ˜configçš„ä½¿ç”¨æ–¹æ³•ï¼Œå…ˆæ¥çœ‹åŸå§‹çš„æ–¹å¼</p>
<p>åˆ›å»ºâ€œapplication.propertiesâ€é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®å†…å®¹ï¼š</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">coupon.user.name</span><span class="token punctuation">=</span><span class="token attr-value">"zhangsan"</span>
<span class="token attr-name">coupon.user.age</span><span class="token punctuation">=</span><span class="token attr-value">30</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>ä¿®æ”¹â€œcom.bigdata.gulimall.coupon.controller.CouponControllerâ€æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;coupon.user.name&#125;"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;coupon.user.age&#125;"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">getConfigInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
   <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>å¯åŠ¨â€œgulimall-couponâ€æœåŠ¡ï¼š</p>
<p>è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:7000/coupon/coupon/test&gt;">http://localhost:7000/coupon/coupon/test&gt;</a></p>
<p><img src="/img/spring-cloud/1587716583668.png" alt="1587716583668"></p>
<p>è¿™æ ·åšå­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœé¢‘ç¹çš„ä¿®æ”¹application.propertiesï¼Œåœ¨éœ€è¦é¢‘ç¹é‡æ–°æ‰“åŒ…éƒ¨ç½²ã€‚ä¸‹é¢æˆ‘ä»¬å°†é‡‡ç”¨Nacosçš„é…ç½®ä¸­å¿ƒæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 id="3ï¼‰nacos-config"><a href="#3ï¼‰nacos-config" class="headerlink" title="3ï¼‰nacos config"></a>3ï¼‰nacos config</h3><p>1ã€åœ¨Nacosæ³¨å†Œä¸­å¿ƒä¸­ï¼Œç‚¹å‡»â€œé…ç½®åˆ—è¡¨â€ï¼Œæ·»åŠ é…ç½®è§„åˆ™ï¼š</p>
<p><img src="/img/spring-cloud/1587716911435.png" alt="1587716911435"></p>
<p>DataIDï¼šgulimall-coupon</p>
<p>é…ç½®æ ¼å¼ï¼šproperties</p>
<p>æ–‡ä»¶çš„å‘½åè§„åˆ™ä¸ºï¼š${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}</p>
<p>${spring.application.name}ï¼šä¸ºå¾®æœåŠ¡å</p>
<p>${spring.profiles.active}ï¼šæŒ‡æ˜æ˜¯å“ªç§ç¯å¢ƒä¸‹çš„é…ç½®ï¼Œå¦‚devã€testæˆ–info</p>
<p>${spring.cloud.nacos.config.file-extension}ï¼šé…ç½®æ–‡ä»¶çš„æ‰©å±•åï¼Œå¯ä»¥ä¸ºpropertiesã€ymlç­‰</p>
<p>2ã€æŸ¥çœ‹é…ç½®ï¼š</p>
<p><img src="/img/spring-cloud/1587717125580.png" alt="1587717125580"></p>
<p>3ã€ä¿®æ”¹â€œcom.bigdata.gulimall.coupon.controller.CouponControllerâ€ç±»ï¼Œæ·»åŠ â€œ@RefreshScopeâ€æ³¨è§£</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"coupon/coupon"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CouponController</span> <span class="token punctuation">&#123;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¿™æ ·éƒ½ä¼šåŠ¨æ€çš„ä»é…ç½®ä¸­å¿ƒè¯»å–é…ç½®.</p>
<p>4ã€è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:7000/coupon/coupon/test">http://localhost:7000/coupon/coupon/test</a></p>
<p><img src="/img/spring-cloud/1587717485283.png" alt="1587717485283"></p>
<p>èƒ½å¤Ÿçœ‹åˆ°è¯»å–åˆ°äº†nacos ä¸­çš„æœ€æ–°çš„é…ç½®ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨æŒ‡æ˜äº†ç›¸åŒçš„é…ç½®ä¿¡æ¯æ—¶ï¼Œé…ç½®ä¸­å¿ƒä¸­è®¾ç½®çš„å€¼ä¼˜å…ˆäºæœ¬åœ°é…ç½®ã€‚</p>
<h3 id="4ï¼‰Nacosæ”¯æŒä¸‰ç§é…ç½®åŠ è½½æ–¹æ–¹æ¡ˆ"><a href="#4ï¼‰Nacosæ”¯æŒä¸‰ç§é…ç½®åŠ è½½æ–¹æ–¹æ¡ˆ" class="headerlink" title="4ï¼‰Nacosæ”¯æŒä¸‰ç§é…ç½®åŠ è½½æ–¹æ–¹æ¡ˆ"></a>4ï¼‰Nacosæ”¯æŒä¸‰ç§é…ç½®åŠ è½½æ–¹æ–¹æ¡ˆ</h3><p>Nacosæ”¯æŒâ€œNamespace+group+data IDâ€çš„é…ç½®è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è¯¦æƒ…è§ï¼š<a target="_blank" rel="noopener" href="https://github.com/alibaba/spring-cloud-alibaba/blob/master/spring-cloud-alibaba-docs/src/main/asciidoc-zh/nacos-config.adoc">https://github.com/alibaba/spring-cloud-alibaba/blob/master/spring-cloud-alibaba-docs/src/main/asciidoc-zh/nacos-config.adoc</a></p>
<h5 id="Namespaceæ–¹æ¡ˆ"><a href="#Namespaceæ–¹æ¡ˆ" class="headerlink" title="Namespaceæ–¹æ¡ˆ"></a>Namespaceæ–¹æ¡ˆ</h5><p>é€šè¿‡å‘½åç©ºé—´å®ç°ç¯å¢ƒåŒºåˆ†</p>
<p>ä¸‹é¢æ˜¯é…ç½®å®ä¾‹ï¼š</p>
<p>1ã€åˆ›å»ºå‘½åç©ºé—´ï¼š</p>
<p>â€œå‘½åç©ºé—´â€â€”&gt;â€œåˆ›å»ºå‘½åç©ºé—´â€ï¼š</p>
<p><img src="/img/spring-cloud/1587718802109.png" alt="1587718802109"></p>
<p> åˆ›å»ºä¸‰ä¸ªå‘½åç©ºé—´ï¼Œåˆ†åˆ«ä¸ºdevï¼Œtestå’Œprop</p>
<p>2ã€å›åˆ°é…ç½®åˆ—è¡¨ä¸­ï¼Œèƒ½å¤Ÿçœ‹åˆ°æ‰€åˆ›å»ºçš„ä¸‰ä¸ªå‘½åç©ºé—´</p>
<p><img src="/img/spring-cloud/1587718889316.png" alt="1587718889316"></p>
<p>ä¸‹é¢æˆ‘ä»¬éœ€è¦åœ¨devå‘½åç©ºé—´ä¸‹ï¼Œåˆ›å»ºâ€œgulimall-coupon.propertiesâ€é…ç½®è§„åˆ™ï¼š</p>
<p><img src="/img/spring-cloud/1587719108947.png" alt="1587719108947"></p>
<p>3ã€è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:7000/coupon/coupon/test">http://localhost:7000/coupon/coupon/test</a></p>
<p><img src="/img/spring-cloud/1587721184218.png" alt="1587721184218"></p>
<p>å¹¶æ²¡æœ‰ä½¿ç”¨æˆ‘ä»¬åœ¨devå‘½åç©ºé—´ä¸‹æ‰€é…ç½®çš„è§„åˆ™ï¼Œè€Œæ˜¯ä½¿ç”¨çš„æ˜¯publicå‘½åç©ºé—´ä¸‹æ‰€é…ç½®çš„è§„åˆ™ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ</p>
<p>æŸ¥çœ‹â€œgulimall-couponâ€æœåŠ¡çš„å¯åŠ¨æ—¥å¿—ï¼š</p>
<pre class="line-numbers language-verilog" data-language="verilog"><code class="language-verilog"><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">37</span><span class="token punctuation">:</span><span class="token number">24.158</span>  WARN <span class="token number">32792</span> <span class="token operator">---</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>a<span class="token punctuation">.</span>c<span class="token punctuation">.</span>n<span class="token punctuation">.</span>c<span class="token punctuation">.</span>NacosPropertySourceBuilder     <span class="token punctuation">:</span> Ignore the empty nacos configuration <span class="token keyword">and</span> get it based on dataId<span class="token punctuation">[</span>gulimall<span class="token operator">-</span>coupon<span class="token punctuation">]</span> <span class="token operator">&amp;</span> group<span class="token punctuation">[</span>DEFAULT_GROUP<span class="token punctuation">]</span>
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">37</span><span class="token punctuation">:</span><span class="token number">24.163</span>  INFO <span class="token number">32792</span> <span class="token operator">---</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> c<span class="token punctuation">.</span>a<span class="token punctuation">.</span>nacos<span class="token punctuation">.</span>client<span class="token punctuation">.</span><span class="token keyword">config</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span>JVMUtil    <span class="token punctuation">:</span> isMultiInstance<span class="token punctuation">:</span>false
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">24</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">37</span><span class="token punctuation">:</span><span class="token number">24.169</span>  INFO <span class="token number">32792</span> <span class="token operator">---</span> <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> b<span class="token punctuation">.</span>c<span class="token punctuation">.</span>PropertySourceBootstrapConfiguration <span class="token punctuation">:</span> Located <span class="token keyword">property</span> source<span class="token punctuation">:</span> <span class="token punctuation">[</span>BootstrapPropertySource <span class="token operator">&#123;</span>name<span class="token operator">=</span>'bootstrapProperties<span class="token operator">-</span>gulimall<span class="token operator">-</span>coupon<span class="token punctuation">.</span>properties<span class="token punctuation">,</span>DEFAULT_GROUP'<span class="token operator">&#125;</span><span class="token punctuation">,</span> BootstrapPropertySource <span class="token operator">&#123;</span>name<span class="token operator">=</span>'bootstrapProperties<span class="token operator">-</span>gulimall<span class="token operator">-</span>coupon<span class="token punctuation">,</span>DEFAULT_GROUP'<span class="token operator">&#125;</span><span class="token punctuation">]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>**â€gulimall-coupon.propertiesâ€**ï¼Œé»˜è®¤å°±æ˜¯publicå‘½åç©ºé—´ä¸­çš„å†…å®¹ä¸­æ‰€é…ç½®çš„è§„åˆ™ã€‚</p>
<p>4ã€æŒ‡å®šå‘½åç©ºé—´</p>
<p>å¦‚æœæƒ³è¦ä½¿å¾—æˆ‘ä»¬è‡ªå®šä¹‰çš„å‘½åç©ºé—´ç”Ÿæ•ˆï¼Œéœ€è¦åœ¨â€œbootstrap.propertiesâ€æ–‡ä»¶ä¸­ï¼ŒæŒ‡å®šä½¿ç”¨å“ªä¸ªå‘½åç©ºé—´ï¼š</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token attr-value">a2c83f0b-e0a8-40fb-9b26-1e9d61be7d6d</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è¿™ä¸ªå‘½åç©ºé—´IDæ¥æºäºæˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥æ‰€åˆ›å»ºçš„å‘½åç©ºé—´</p>
<p><img src="/img/spring-cloud/1587718802109.png" alt="1587718802109"></p>
<p>5ã€é‡å¯â€œgulimall-couponâ€ï¼Œå†æ¬¡è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:7000/coupon/coupon/test">http://localhost:7000/coupon/coupon/test</a></p>
<p><img src="/img/spring-cloud/1587720311349.png" alt="1587720311349"></p>
<p>ä½†æ˜¯è¿™ç§å‘½åç©ºé—´çš„ç²’åº¦è¿˜æ˜¯ä¸å¤Ÿç»†åŒ–ï¼Œå¯¹æ­¤æˆ‘ä»¬å¯ä»¥ä¸ºé¡¹ç›®çš„æ¯ä¸ªå¾®æœåŠ¡moduleåˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ã€‚</p>
<p>6ã€ä¸ºæ‰€æœ‰å¾®æœåŠ¡åˆ›å»ºå‘½åç©ºé—´</p>
<p><img src="/img/spring-cloud/1587720714101.png" alt="1587720714101"></p>
<p>7ã€å›åˆ°é…ç½®åˆ—è¡¨é€‰é¡¹å¡ï¼Œå…‹éš†pulicçš„é…ç½®è§„åˆ™åˆ°couponå‘½åç©ºé—´ä¸‹</p>
<p><img src="/img/spring-cloud/1587720883244.png" alt="1587720883244"></p>
<p>åˆ‡æ¢åˆ°couponå‘½åç©ºé—´ä¸‹ï¼ŒæŸ¥çœ‹æ‰€å…‹éš†çš„è§„åˆ™ï¼š</p>
<p><img src="/img/spring-cloud/1587720963699.png" alt="1587720963699"></p>
<p>8ã€ä¿®æ”¹â€œgulimall-couponâ€ä¸‹çš„bootstrap.propertiesæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token attr-value">7905c915-64ad-4066-8ea9-ef63918e5f79</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è¿™é‡ŒæŒ‡æ˜çš„æ˜¯ï¼Œè¯»å–æ—¶ä½¿ç”¨couponå‘½åç©ºé—´ä¸‹çš„é…ç½®ã€‚</p>
<p>9ã€é‡å¯â€œgulimall-couponâ€ï¼Œè®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:7000/coupon/coupon/test">http://localhost:7000/coupon/coupon/test</a></p>
<p><img src="/img/spring-cloud/1587721184218.png" alt="1587721184218"></p>
<h5 id="DataIDæ–¹æ¡ˆ"><a href="#DataIDæ–¹æ¡ˆ" class="headerlink" title="DataIDæ–¹æ¡ˆ"></a>DataIDæ–¹æ¡ˆ</h5><p>é€šè¿‡æŒ‡å®šspring.profile.activeå’Œé…ç½®æ–‡ä»¶çš„DataIDï¼Œæ¥ä½¿ä¸åŒç¯å¢ƒä¸‹è¯»å–ä¸åŒçš„é…ç½®ï¼Œè¯»å–é…ç½®æ—¶ï¼Œä½¿ç”¨çš„æ˜¯é»˜è®¤å‘½åç©ºé—´publicï¼Œé»˜è®¤åˆ†ç»„ï¼ˆdefault_groupï¼‰ä¸‹çš„DataIDã€‚</p>
<p>é»˜è®¤æƒ…å†µï¼ŒNamespace=publicï¼ŒGroup=DEFAULT GROUPï¼Œé»˜è®¤Clusteræ˜¯DEFAULT</p>
<h5 id="Groupæ–¹æ¡ˆ"><a href="#Groupæ–¹æ¡ˆ" class="headerlink" title="Groupæ–¹æ¡ˆ"></a>Groupæ–¹æ¡ˆ</h5><p>é€šè¿‡Groupå®ç°ç¯å¢ƒåŒºåˆ†</p>
<p>å®ä¾‹ï¼šé€šè¿‡ä½¿ç”¨ä¸åŒçš„ç»„ï¼Œæ¥è¯»å–ä¸åŒçš„é…ç½®ï¼Œè¿˜æ˜¯ä»¥ä¸Šé¢çš„gulimall-couponå¾®æœåŠ¡ä¸ºä¾‹</p>
<p>1ã€æ–°å»ºâ€œgulimall-coupon.propertiesâ€ï¼Œå°†å®ƒç½®äºâ€œtmpâ€ç»„ä¸‹</p>
<p><img src="/img/spring-cloud/1587721616021.png" alt="1587721616021"></p>
<p>2ã€ä¿®æ”¹â€œbootstrap.propertiesâ€é…ç½®ï¼Œæ·»åŠ å¦‚ä¸‹çš„é…ç½®</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.cloud.nacos.config.group</span><span class="token punctuation">=</span><span class="token attr-value">tmp</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>3ã€é‡å¯â€œgulimall-couponâ€ï¼Œè®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:7000/coupon/coupon/test">http://localhost:7000/coupon/coupon/test</a></p>
<p><img src="/img/spring-cloud/1587721844449.png" alt="1587721844449"></p>
<h3 id="5ï¼‰åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®é›†"><a href="#5ï¼‰åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®é›†" class="headerlink" title="5ï¼‰åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®é›†"></a>5ï¼‰åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®é›†</h3><p>å½“å¾®æœåŠ¡æ•°é‡å¾ˆåºå¤§æ—¶ï¼Œå°†æ‰€æœ‰é…ç½®éƒ½ä¹¦å†™åˆ°ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œæ˜¾ç„¶ä¸æ˜¯å¤ªåˆé€‚ã€‚å¯¹æ­¤æˆ‘ä»¬å¯ä»¥å°†é…ç½®æŒ‰ç…§åŠŸèƒ½çš„ä¸åŒï¼Œæ‹†åˆ†ä¸ºä¸åŒçš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>å¦‚ä¸‹é¢çš„é…ç½®æ–‡ä»¶ï¼š</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7000</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token comment">#MySQLé…ç½®</span>
    <span class="token key atrule">driverClassName</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.137.14<span class="token punctuation">:</span>3306/gulimall_sms<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;useSSL=false</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root

  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> gulimall<span class="token punctuation">-</span>coupon
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.137.14<span class="token punctuation">:</span><span class="token number">8848</span>



<span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/mapper/<span class="token important">**/*.xml</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æˆ‘ä»¬å¯ä»¥å°†ï¼Œ</p>
<p>æ•°æ®æºæœ‰å…³çš„é…ç½®å†™åˆ°ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼š</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token comment">#MySQLé…ç½®</span>
    <span class="token key atrule">driverClassName</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.137.14<span class="token punctuation">:</span>3306/gulimall_sms<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;useSSL=false</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å’Œæ¡†æ¶æœ‰å…³çš„å†™åˆ°å¦å¤–ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼š</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/mapper/<span class="token important">**/*.xml</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ä¹Ÿå¯ä»¥å°†ä¸Šé¢çš„è¿™äº›é…ç½®äº¤ç»™nacosæ¥è¿›è¡Œç®¡ç†ã€‚</p>
<p>å®ä¾‹ï¼šå°†â€œgulimall-couponâ€çš„â€œapplication.ymlâ€æ–‡ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªé…ç½®ï¼Œå¹¶æ”¾ç½®åˆ°nacosé…ç½®ä¸­å¿ƒ</p>
<p>1ã€åˆ›å»ºâ€œdatasource.ymlâ€ï¼Œç”¨äºå­˜å‚¨å’Œæ•°æ®æºæœ‰å…³çš„é…ç½®</p>
<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token comment">#MySQLé…ç½®</span>
    <span class="token key atrule">driverClassName</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.137.14<span class="token punctuation">:</span>3306/gulimall_sms<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;useSSL=false</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨couponå‘½åç©ºé—´ä¸­ï¼Œåˆ›å»ºâ€œdatasource.ymlâ€é…ç½®</p>
<p><img src="/img/spring-cloud/1587722798375.png" alt="1587722798375"></p>
<p>2ã€å°†å’Œmybatisç›¸å…³çš„é…ç½®ï¼Œæ”¾ç½®åˆ°â€œmybatis.ymlâ€ä¸­</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/mapper/<span class="token important">**/*.xml</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><img src="/img/spring-cloud/1587722710432.png" alt="1587722710432"></p>
<p>3ã€åˆ›å»ºâ€œother.ymlâ€é…ç½®ï¼Œä¿å­˜å…¶ä»–çš„é…ç½®ä¿¡æ¯</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7000</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> gulimall<span class="token punctuation">-</span>coupon
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.137.14<span class="token punctuation">:</span><span class="token number">8848</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><img src="/img/spring-cloud/1587722998265.png" alt="1587722998265"></p>
<p>ç°åœ¨â€œmybatis.ymlâ€ã€â€œdatasource.ymlâ€å’Œâ€œother.ymlâ€å…±åŒæ„æˆäº†å¾®æœåŠ¡çš„é…ç½®ã€‚</p>
<p>4ã€ä¿®æ”¹â€œgulimall-couponâ€çš„â€œbootstrap.propertiesâ€æ–‡ä»¶ï¼ŒåŠ è½½â€œmybatis.ymlâ€ã€â€œdatasource.ymlâ€å’Œâ€œother.ymlâ€é…ç½®</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].data-id</span><span class="token punctuation">=</span><span class="token attr-value">mybatis.yml</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].group</span><span class="token punctuation">=</span><span class="token attr-value">dev</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].refresh</span><span class="token punctuation">=</span><span class="token attr-value">true</span>

<span class="token attr-name">spring.cloud.nacos.config.extension-configs[1].data-id</span><span class="token punctuation">=</span><span class="token attr-value">datasource.yml</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[1].group</span><span class="token punctuation">=</span><span class="token attr-value">dev</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[1].refresh</span><span class="token punctuation">=</span><span class="token attr-value">true</span>


<span class="token attr-name">spring.cloud.nacos.config.extension-configs[2].data-id</span><span class="token punctuation">=</span><span class="token attr-value">other.yml</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[2].group</span><span class="token punctuation">=</span><span class="token attr-value">dev</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[2].refresh</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>â€œspring.cloud.nacos.config.ext-configâ€å·²ç»è¢«åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨â€œspring.cloud.nacos.config.extension-configsâ€</p>
<p>5ã€æ³¨é‡Šâ€œapplication.ymlâ€æ–‡ä»¶ä¸­çš„æ‰€æœ‰é…ç½®</p>
<p>6ã€é‡å¯â€œgulimall-couponâ€æœåŠ¡ï¼Œç„¶åè®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:7000/coupon/coupon/test">http://localhost:7000/coupon/coupon/test</a></p>
<p> <img src="/img/spring-cloud/1587724212905.png" alt="1587724212905"></p>
<p>7ã€è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:7000/coupon/coupon/list">http://localhost:7000/coupon/coupon/list</a>ï¼ŒæŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸çš„è®¿é—®æ•°æ®åº“</p>
<p><img src="/img/spring-cloud/1587724350548.png" alt="1587724350548"></p>
<p>å°ç»“ï¼š</p>
<p>1)ã€å¾®æœåŠ¡ä»»ä½•é…ç½®ä¿¡æ¯ï¼Œä»»ä½•é…ç½®æ–‡ä»¶éƒ½å¯ä»¥æ”¾åœ¨é…ç½®ä¸­å¿ƒï¼›</p>
<p>2)ã€åªéœ€è¦åœ¨bootstrap.propertiesä¸­ï¼Œè¯´æ˜åŠ è½½é…ç½®ä¸­å¿ƒçš„å“ªäº›é…ç½®æ–‡ä»¶å³å¯ï¼›</p>
<p>3)ã€@Value, @ConfigurationPropertiesã€‚éƒ½å¯ä»¥ç”¨æ¥è·å–é…ç½®ä¸­å¿ƒä¸­æ‰€é…ç½®çš„ä¿¡æ¯ï¼›</p>
<p>4)ã€é…ç½®ä¸­å¿ƒæœ‰çš„ä¼˜å…ˆä½¿ç”¨é…ç½®ä¸­å¿ƒä¸­çš„ï¼Œæ²¡æœ‰åˆ™ä½¿ç”¨æœ¬åœ°çš„é…ç½®ã€‚</p>
<h2 id="11-ç½‘å…³"><a href="#11-ç½‘å…³" class="headerlink" title="11. ç½‘å…³"></a>11. ç½‘å…³</h2><h3 id="1ã€æ³¨å†Œâ€œgulimall-gatewayâ€åˆ°Nacos"><a href="#1ã€æ³¨å†Œâ€œgulimall-gatewayâ€åˆ°Nacos" class="headerlink" title="1ã€æ³¨å†Œâ€œgulimall-gatewayâ€åˆ°Nacos"></a>1ã€æ³¨å†Œâ€œgulimall-gatewayâ€åˆ°Nacos</h3><h4 id="1ï¼‰åˆ›å»ºâ€œgulimall-gatewayâ€"><a href="#1ï¼‰åˆ›å»ºâ€œgulimall-gatewayâ€" class="headerlink" title="1ï¼‰åˆ›å»ºâ€œgulimall-gatewayâ€"></a>1ï¼‰åˆ›å»ºâ€œgulimall-gatewayâ€</h4><p>SpringCloud gateway</p>
<h4 id="2ï¼‰æ·»åŠ â€œgulimall-commonâ€ä¾èµ–å’Œâ€œspring-cloud-starter-gatewayâ€ä¾èµ–"><a href="#2ï¼‰æ·»åŠ â€œgulimall-commonâ€ä¾èµ–å’Œâ€œspring-cloud-starter-gatewayâ€ä¾èµ–" class="headerlink" title="2ï¼‰æ·»åŠ â€œgulimall-commonâ€ä¾èµ–å’Œâ€œspring-cloud-starter-gatewayâ€ä¾èµ–"></a>2ï¼‰æ·»åŠ â€œgulimall-commonâ€ä¾èµ–å’Œâ€œspring-cloud-starter-gatewayâ€ä¾èµ–</h4><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.bigdata.gulimall<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>gulimall-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="3ï¼‰â€œcom-bigdata-gulimall-gulimallgateway-GulimallGatewayApplicationâ€ç±»ä¸ŠåŠ ä¸Šâ€œ-EnableDiscoveryClientâ€æ³¨è§£"><a href="#3ï¼‰â€œcom-bigdata-gulimall-gulimallgateway-GulimallGatewayApplicationâ€ç±»ä¸ŠåŠ ä¸Šâ€œ-EnableDiscoveryClientâ€æ³¨è§£" class="headerlink" title="3ï¼‰â€œcom.bigdata.gulimall.gulimallgateway.GulimallGatewayApplicationâ€ç±»ä¸ŠåŠ ä¸Šâ€œ@EnableDiscoveryClientâ€æ³¨è§£"></a>3ï¼‰â€œcom.bigdata.gulimall.gulimallgateway.GulimallGatewayApplicationâ€ç±»ä¸ŠåŠ ä¸Šâ€œ@EnableDiscoveryClientâ€æ³¨è§£</h4><h4 id="4ï¼‰åœ¨Nacosä¸­åˆ›å»ºâ€œgatewayâ€å‘½åç©ºé—´ï¼ŒåŒæ—¶åœ¨è¯¥å‘½åç©ºé—´ä¸­åˆ›å»ºâ€œgulimall-gateway-ymlâ€"><a href="#4ï¼‰åœ¨Nacosä¸­åˆ›å»ºâ€œgatewayâ€å‘½åç©ºé—´ï¼ŒåŒæ—¶åœ¨è¯¥å‘½åç©ºé—´ä¸­åˆ›å»ºâ€œgulimall-gateway-ymlâ€" class="headerlink" title="4ï¼‰åœ¨Nacosä¸­åˆ›å»ºâ€œgatewayâ€å‘½åç©ºé—´ï¼ŒåŒæ—¶åœ¨è¯¥å‘½åç©ºé—´ä¸­åˆ›å»ºâ€œgulimall-gateway.ymlâ€"></a>4ï¼‰åœ¨Nacosä¸­åˆ›å»ºâ€œgatewayâ€å‘½åç©ºé—´ï¼ŒåŒæ—¶åœ¨è¯¥å‘½åç©ºé—´ä¸­åˆ›å»ºâ€œgulimall-gateway.ymlâ€</h4><p><img src="/img/spring-cloud/1587729576178.png" alt="1587729576178"></p>
<h4 id="5ï¼‰åˆ›å»ºâ€œbootstrap-propertiesâ€æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼ŒæŒ‡æ˜é…ç½®ä¸­å¿ƒåœ°å€å’Œæ‰€å±å‘½åç©ºé—´"><a href="#5ï¼‰åˆ›å»ºâ€œbootstrap-propertiesâ€æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼ŒæŒ‡æ˜é…ç½®ä¸­å¿ƒåœ°å€å’Œæ‰€å±å‘½åç©ºé—´" class="headerlink" title="5ï¼‰åˆ›å»ºâ€œbootstrap.propertiesâ€æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼ŒæŒ‡æ˜é…ç½®ä¸­å¿ƒåœ°å€å’Œæ‰€å±å‘½åç©ºé—´"></a>5ï¼‰åˆ›å»ºâ€œbootstrap.propertiesâ€æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼ŒæŒ‡æ˜é…ç½®ä¸­å¿ƒåœ°å€å’Œæ‰€å±å‘½åç©ºé—´</h4><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-gateway</span>
<span class="token attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">192.168.137.14:8848</span>
<span class="token attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token attr-value">1c82552e-1af0-4ced-9a48-26f19c2d315f</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h4 id="6ï¼‰åˆ›å»ºâ€œapplication-propertiesâ€æ–‡ä»¶ï¼ŒæŒ‡å®šæœåŠ¡åå’Œæ³¨å†Œä¸­å¿ƒåœ°å€"><a href="#6ï¼‰åˆ›å»ºâ€œapplication-propertiesâ€æ–‡ä»¶ï¼ŒæŒ‡å®šæœåŠ¡åå’Œæ³¨å†Œä¸­å¿ƒåœ°å€" class="headerlink" title="6ï¼‰åˆ›å»ºâ€œapplication.propertiesâ€æ–‡ä»¶ï¼ŒæŒ‡å®šæœåŠ¡åå’Œæ³¨å†Œä¸­å¿ƒåœ°å€"></a>6ï¼‰åˆ›å»ºâ€œapplication.propertiesâ€æ–‡ä»¶ï¼ŒæŒ‡å®šæœåŠ¡åå’Œæ³¨å†Œä¸­å¿ƒåœ°å€</h4><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-gateway</span>
<span class="token attr-name">spring.cloud.nacos.discovery.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">192.168.137.14:8848</span>
<span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">88</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="7ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€"><a href="#7ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€" class="headerlink" title="7ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€"></a>7ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€</h4><p>å¯åŠ¨æŠ¥é”™ï¼š</p>
<pre class="line-numbers language-verilog" data-language="verilog"><code class="language-verilog">Description<span class="token punctuation">:</span>

Failed to configure a DataSource<span class="token punctuation">:</span> 'url' attribute is <span class="token keyword">not</span> specified <span class="token keyword">and</span> no embedded datasource could be configured<span class="token punctuation">.</span>

Reason<span class="token punctuation">:</span> Failed to determine a suitable driver <span class="token keyword">class</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è§£å†³æ–¹æ³•ï¼šåœ¨â€œcom.bigdata.gulimall.gulimallgateway.GulimallGatewayApplicationâ€ä¸­æ’é™¤å’Œæ•°æ®æºç›¸å…³çš„é…ç½®</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span><span class="token punctuation">(</span>exclude <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>é‡æ–°å¯åŠ¨</p>
<p>è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://192.168.137.14:8848/nacos/#">http://192.168.137.14:8848/nacos/#</a>ï¼ŒæŸ¥çœ‹åˆ°è¯¥æœåŠ¡å·²ç»æ³¨å†Œåˆ°äº†Nacosä¸­</p>
<p><img src="/img/spring-cloud/1587730035866.png" alt="1587730035866"></p>
<h3 id="2ã€æ¡ˆä¾‹"><a href="#2ã€æ¡ˆä¾‹" class="headerlink" title="2ã€æ¡ˆä¾‹"></a>2ã€æ¡ˆä¾‹</h3><p>ç°åœ¨æƒ³è¦å®ç°é’ˆå¯¹äºâ€œ<a target="_blank" rel="noopener" href="http://localhost:88/hello?url=baidu%E2%80%9D%EF%BC%8C%E8%BD%AC%E5%8F%91%E5%88%B0%E2%80%9Chttps://www.baidu.com%E2%80%9D%EF%BC%8C%E9%92%88%E5%AF%B9%E4%BA%8E%E2%80%9Chttp://localhost:88/hello?url=qq%E2%80%9D%E7%9A%84%E8%AF%B7%E6%B1%82%EF%BC%8C%E8%BD%AC%E5%8F%91%E5%88%B0%E2%80%9Chttps://www.qq.com/%E2%80%9D">http://localhost:88/hello?url=baiduâ€ï¼Œè½¬å‘åˆ°â€œhttps://www.baidu.comâ€ï¼Œé’ˆå¯¹äºâ€œhttp://localhost:88/hello?url=qqâ€çš„è¯·æ±‚ï¼Œè½¬å‘åˆ°â€œhttps://www.qq.com/â€</a></p>
<h4 id="1ï¼‰åˆ›å»ºâ€œapplication-ymlâ€"><a href="#1ï¼‰åˆ›å»ºâ€œapplication-ymlâ€" class="headerlink" title="1ï¼‰åˆ›å»ºâ€œapplication.ymlâ€"></a>1ï¼‰åˆ›å»ºâ€œapplication.ymlâ€</h4><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> baidu_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.baidu.com
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Query=url<span class="token punctuation">,</span> baidu
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> qq_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.qq.com/
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Query=url<span class="token punctuation">,</span> qq<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="2ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€"><a href="#2ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€" class="headerlink" title="2ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€"></a>2ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€</h4><h4 id="3ï¼‰æµ‹è¯•"><a href="#3ï¼‰æµ‹è¯•" class="headerlink" title="3ï¼‰æµ‹è¯•"></a>3ï¼‰æµ‹è¯•</h4><p>è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:88/hello?url=baidu">http://localhost:88/hello?url=baidu</a></p>
<p>è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:88/hello?url=qq">http://localhost:88/hello?url=qq</a></p>
<h2 id="12-Vue"><a href="#12-Vue" class="headerlink" title="12. Vue"></a>12. Vue</h2><p>å®‰è£…vue</p>
<pre class="line-numbers language-none"><code class="language-none"># æœ€æ–°ç¨³å®šç‰ˆ
$ npm install vue<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="1ã€vueå£°æ˜å¼æ¸²æŸ“"><a href="#1ã€vueå£°æ˜å¼æ¸²æŸ“" class="headerlink" title="1ã€vueå£°æ˜å¼æ¸²æŸ“"></a>1ã€vueå£°æ˜å¼æ¸²æŸ“</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">
<span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    el<span class="token operator">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span><span class="token comment">//ç»‘å®šå…ƒç´ </span>
    data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//å°è£…æ•°æ®</span>
        name<span class="token operator">:</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span>
        num<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span><span class="token punctuation">&#123;</span>  <span class="token comment">//å°è£…æ–¹æ³•</span>
        <span class="token function">cancle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">--</span> <span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> <span class="token string">"1"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="2ã€åŒå‘ç»‘å®š-æ¨¡å‹å˜åŒ–ï¼Œè§†å›¾å˜åŒ–ã€‚åä¹‹äº¦ç„¶"><a href="#2ã€åŒå‘ç»‘å®š-æ¨¡å‹å˜åŒ–ï¼Œè§†å›¾å˜åŒ–ã€‚åä¹‹äº¦ç„¶" class="headerlink" title="2ã€åŒå‘ç»‘å®š,æ¨¡å‹å˜åŒ–ï¼Œè§†å›¾å˜åŒ–ã€‚åä¹‹äº¦ç„¶"></a>2ã€åŒå‘ç»‘å®š,æ¨¡å‹å˜åŒ–ï¼Œè§†å›¾å˜åŒ–ã€‚åä¹‹äº¦ç„¶</h3><p>åŒå‘ç»‘å®šä½¿ç”¨v-model</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>num<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>h1<span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">,</span>éå¸¸å¸…ï¼Œæœ‰<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>num<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>ä¸ªäººä¸ºä»–ç‚¹èµ<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<img src="images/1587746815353.png" alt="1587746815353" style="zoom: 67%;" />

<h3 id="3ã€äº‹ä»¶å¤„ç†"><a href="#3ã€äº‹ä»¶å¤„ç†" class="headerlink" title="3ã€äº‹ä»¶å¤„ç†"></a>3ã€äº‹ä»¶å¤„ç†</h3><p>v-xxï¼šæŒ‡ä»¤<br>1ã€åˆ›å»ºvueå®ä¾‹ï¼Œå…³è”é¡µé¢çš„æ¨¡æ¿ï¼Œå°†è‡ªå·±çš„æ•°æ®ï¼ˆdataï¼‰æ¸²æŸ“åˆ°å…³è”çš„æ¨¡æ¿ï¼Œå“åº”å¼çš„<br>2ã€æŒ‡ä»¤æ¥ç®€åŒ–å¯¹domçš„ä¸€äº›æ“ä½œã€‚<br>3ã€å£°æ˜æ–¹æ³•æ¥åšæ›´å¤æ‚çš„æ“ä½œã€‚methodsé‡Œé¢å¯ä»¥å°è£…æ–¹æ³•ã€‚</p>
<p>v-onæ˜¯æŒ‰é’®çš„å•å‡»äº‹ä»¶ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;button v-on:click&#x3D;&quot;num++&quot;&gt;ç‚¹èµ&lt;&#x2F;button&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>





<p>åœ¨VUEä¸­el,dataå’Œvueçš„ä½œç”¨:</p>
<ul>
<li>elï¼šç”¨æ¥ç»‘å®šæ•°æ®ï¼›</li>
<li>data:ç”¨æ¥å°è£…æ•°æ®ï¼›</li>
<li>methodsï¼šç”¨æ¥å°è£…æ–¹æ³•ï¼Œå¹¶ä¸”èƒ½å¤Ÿå°è£…å¤šä¸ªæ–¹æ³•ï¼Œå¦‚ä½•ä¸Šé¢å°è£…äº†cancellå’Œhelloæ–¹æ³•ã€‚</li>
</ul>
<p>å®‰è£…â€œVue 2 Snippetsâ€ï¼Œç”¨æ¥åšä»£ç æç¤º</p>
<p><img src="/img/spring-cloud/1587747283279.png" alt="1587747283279"></p>
<p>ä¸ºäº†æ–¹ä¾¿çš„åœ¨æµè§ˆå™¨ä¸Šè°ƒè¯•VUEç¨‹åºï¼Œéœ€è¦å®‰è£…â€œ<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-devtools">vue-devtools</a>â€ï¼Œç¼–è¯‘åå®‰è£…åˆ°chromeä¸­å³å¯ã€‚</p>
<p>è¯¦ç»†çš„ä½¿ç”¨æ–¹æ³•è§ï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/63f09651724c">Vueè°ƒè¯•ç¥å™¨vue-devtoolså®‰è£…</a></p>
<p>â€œv-htmlâ€ä¸ä¼šå¯¹äºHTMLæ ‡ç­¾è¿›è¡Œè½¬ä¹‰ï¼Œè€Œæ˜¯ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºdataæ‰€è®¾ç½®çš„å†…å®¹;è€Œâ€œ v-textâ€ä¼šå¯¹htmlæ ‡ç­¾è¿›è¡Œè½¬ä¹‰</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"> <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>
    <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>msg<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>span v<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">"msg"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>span v<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"msg"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
   
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../node_modules/vue/dist/vue.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        el<span class="token operator">:</span><span class="token string">"#app"</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
            msg<span class="token operator">:</span><span class="token string">"&lt;h1>Hello&lt;/h1>"</span><span class="token punctuation">,</span>
            link<span class="token operator">:</span><span class="token string">"http://www.baidu.com"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        methods<span class="token operator">:</span><span class="token punctuation">&#123;</span>
            <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> <span class="token string">"World"</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¿è¡Œç»“æœï¼š</p>
<p><img src="/img/spring-cloud/1587748494597.png" alt="1587748494597"></p>
    :ç§°ä¸ºå·®å€¼è¡¨è¾¾å¼ï¼Œå®ƒå¿…é¡»è¦å†™åœ¨Htmlè¡¨è¾¾å¼ï¼Œå¯ä»¥å®Œæˆæ•°å­¦è¿ç®—å’Œæ–¹æ³•è°ƒç”¨



<h3 id="4ã€v-bind-å•å‘ç»‘å®š"><a href="#4ã€v-bind-å•å‘ç»‘å®š" class="headerlink" title="4ã€v-bind :å•å‘ç»‘å®š"></a>4ã€v-bind :å•å‘ç»‘å®š</h3><p>ç»™htmlæ ‡ç­¾çš„å±æ€§ç»‘å®š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ç»™htmlæ ‡ç­¾çš„å±æ€§ç»‘å®š <span class="token operator">--</span><span class="token operator">></span>
   <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span> 

       <span class="token operator">&lt;</span>a v<span class="token operator">-</span>bind<span class="token operator">:</span>href<span class="token operator">=</span><span class="token string">"link"</span><span class="token operator">></span>gogogo<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>

       <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token keyword">class</span><span class="token punctuation">,</span>style  <span class="token punctuation">&#123;</span><span class="token keyword">class</span>åï¼šåŠ ä¸Šï¼Ÿ<span class="token punctuation">&#125;</span><span class="token operator">--</span><span class="token operator">></span>
       <span class="token operator">&lt;</span>span v<span class="token operator">-</span>bind<span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"&#123;active:isActive,'text-danger':hasError&#125;"</span>
         <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"&#123;color: color1,fontSize: size&#125;"</span><span class="token operator">></span>ä½ å¥½<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>

   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

   <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../node_modules/vue/dist/vue.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

   <span class="token operator">&lt;</span>script<span class="token operator">></span>
       <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
           el<span class="token operator">:</span><span class="token string">"#app"</span><span class="token punctuation">,</span>
           data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
               link<span class="token operator">:</span> <span class="token string">"http://www.baidu.com"</span><span class="token punctuation">,</span>
               isActive<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
               hasError<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
               color1<span class="token operator">:</span><span class="token string">'red'</span><span class="token punctuation">,</span>
               size<span class="token operator">:</span><span class="token string">'36px'</span>
           <span class="token punctuation">&#125;</span>
       <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸Šé¢æ‰€å®Œæˆçš„ä»»åŠ¡å°±æ˜¯ç»™aæ ‡ç­¾ç»‘å®šä¸€ä¸ªè¶…é“¾æ¥ã€‚å¹¶ä¸”å½“â€œisActiveâ€å’Œâ€œhasErrorâ€éƒ½æ˜¯trueçš„æ—¶å€™ï¼Œå°†å±æ€§åŠ¨æ€çš„ç»‘å®šåˆ°ï¼Œåˆ™ç»‘å®šè¯¥â€œactiveâ€å’Œ â€œtext-dangerâ€classã€‚è¿™æ ·å¯ä»¥åŠ¨æ€çš„è°ƒæ•´å±æ€§çš„å­˜åœ¨ã€‚</p>
<p>è€Œä¸”å¦‚æœæƒ³è¦å®ç°ä¿®æ”¹vmçš„â€color1â€å’Œâ€œsizeâ€ï¼Œ spanå…ƒç´ çš„styleä¹Ÿèƒ½å¤Ÿéšä¹‹å˜åŒ–ï¼Œåˆ™å¯ä»¥å†™ä½œv-bind:styleï¼Œä¹Ÿå¯ä»¥çœç•¥v-bindã€‚</p>
<h3 id="5ã€v-modelåŒå‘ç»‘å®š"><a href="#5ã€v-modelåŒå‘ç»‘å®š" class="headerlink" title="5ã€v-modelåŒå‘ç»‘å®š"></a>5ã€v-modelåŒå‘ç»‘å®š</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>


    <span class="token comment">&lt;!-- è¡¨å•é¡¹ï¼Œè‡ªå®šä¹‰ç»„ä»¶ --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

        ç²¾é€šçš„è¯­è¨€ï¼š
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Java<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>PHP<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> PHP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Python<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> Python<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
        é€‰ä¸­äº† &#123;&#123;language.join(",")&#125;&#125;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../node_modules/vue/dist/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            el<span class="token operator">:</span><span class="token string">"#app"</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
                language<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸Šé¢å®Œæˆçš„åŠŸèƒ½å°±æ˜¯é€šè¿‡ <code>v-model</code> ä¸ºè¾“å…¥æ¡†ç»‘å®šå¤šä¸ªå€¼ï¼Œèƒ½å¤Ÿå®ç°é€‰ä¸­çš„å€¼ï¼Œåœ¨dataçš„languageä¹Ÿåœ¨ä¸æ–­çš„å‘ç”Ÿç€å˜åŒ–ï¼Œ</p>
<p><img src="/img/spring-cloud/image-20200425090955705.png" alt="image-20200425090955705"></p>
<p>å¦‚æœåœ¨æ§åˆ¶å°ä¸ŠæŒ‡å®š <code>vm.language=[&quot;Java&quot;,&quot;PHP&quot;]</code>ï¼Œåˆ™dataå€¼ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚</p>
<p><img src="/img/spring-cloud/image-20200425091736505.png" alt="image-20200425091736505"></p>
<p>é€šè¿‡â€œv-modelâ€å®ç°äº†é¡µé¢å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™æ•°æ®ä¹Ÿå‘ç”Ÿå˜åŒ–ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œåˆ™é¡µé¢ä¹Ÿå‘ç”Ÿå˜åŒ–ï¼Œè¿™æ ·å°±å®ç°äº†åŒå‘ç»‘å®šã€‚</p>
<p>æ•°ç»„çš„è¿æ¥æ“ä½œï¼š é€‰ä¸­äº† <code>&#123;&#123;language.join(",")&#125;&#125;</code></p>
<h3 id="6ã€v-onä¸ºæŒ‰é’®ç»‘å®šäº‹ä»¶"><a href="#6ã€v-onä¸ºæŒ‰é’®ç»‘å®šäº‹ä»¶" class="headerlink" title="6ã€v-onä¸ºæŒ‰é’®ç»‘å®šäº‹ä»¶"></a>6ã€v-onä¸ºæŒ‰é’®ç»‘å®šäº‹ä»¶</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>äº‹ä»¶ä¸­ç›´æ¥å†™jsç‰‡æ®µ<span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>button v<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token operator">=</span><span class="token string">"num++"</span><span class="token operator">></span>ç‚¹èµ<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>äº‹ä»¶æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¿…é¡»æ˜¯Vueå®ä¾‹ä¸­å®šä¹‰çš„å‡½æ•°<span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"cancle"</span><span class="token operator">></span>å–æ¶ˆ<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸Šé¢æ˜¯ä¸ºä¸¤ä¸ªæŒ‰é’®ç»‘å®šäº†å•å‡»äº‹ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªå¯¹äºnumè¿›è¡Œè‡ªå¢ï¼Œå¦å¤–ä¸€ä¸ªè‡ªå‡ã€‚</p>
<p>v-on:clickä¹Ÿå¯ä»¥å†™ä½œ@click</p>
<p>äº‹ä»¶çš„å†’æ³¡ï¼š</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- äº‹ä»¶ä¿®é¥°ç¬¦ --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    å¤§div
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid blue<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        å°div <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å»ç™¾åº¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸Šé¢çš„è¿™ä¸¤ä¸ªåµŒå¥—divä¸­ï¼Œå¦‚æœç‚¹å‡»äº†å†…å±‚çš„divï¼Œåˆ™å¤–å±‚çš„divä¹Ÿä¼šè¢«è§¦å‘ï¼›è¿™ç§é—®é¢˜å¯ä»¥äº‹ä»¶ä¿®é¥°ç¬¦æ¥å®Œæˆï¼š</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- äº‹ä»¶ä¿®é¥°ç¬¦ --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name"><span class="token namespace">v-on:</span>click.once</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    å¤§div
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid blue<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        å°div <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.baidu.com<span class="token punctuation">"</span></span> <span class="token attr-name">@click.prevent.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å»ç™¾åº¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--è¿™é‡Œç¦æ­¢äº†è¶…é“¾æ¥çš„ç‚¹å‡»è·³è½¬æ“ä½œï¼Œå¹¶ä¸”åªä¼šè§¦å‘å½“å‰å¯¹è±¡çš„æ“ä½œ--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å…³äºäº‹ä»¶ä¿®é¥°ç¬¦ï¼š</p>
<p><img src="/img/spring-cloud/image-20200425094010008.png" alt="image-20200425094010008"></p>
<p>æŒ‰é”®ä¿®é¥°ç¬¦ï¼š</p>
<p><img src="/img/spring-cloud/image-20200425094247167.png" alt="image-20200425094247167"></p>
<p><img src="/img/spring-cloud/image-20200425100629676.png" alt="image-20200425100629676"></p>
<h3 id="7ã€v-foréå†å¾ªç¯"><a href="#7ã€v-foréå†å¾ªç¯" class="headerlink" title="7ã€v-foréå†å¾ªç¯"></a>7ã€v-foréå†å¾ªç¯</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(user,index) in users<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user.name<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user.gender == <span class="token punctuation">'</span>å¥³<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                <span class="token comment">&lt;!-- 1ã€æ˜¾ç¤ºuserä¿¡æ¯ï¼šv-for="item in items" --></span>
               å½“å‰ç´¢å¼•ï¼š&#123;&#123;index&#125;&#125; ==> &#123;&#123;user.name&#125;&#125;  ==>   &#123;&#123;user.gender&#125;&#125; ==>&#123;&#123;user.age&#125;&#125; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
                <span class="token comment">&lt;!-- 2ã€è·å–æ•°ç»„ä¸‹æ ‡ï¼šv-for="(item,index) in items" --></span>
                <span class="token comment">&lt;!-- 3ã€éå†å¯¹è±¡ï¼š
                        v-for="value in object"
                        v-for="(value,key) in object"
                        v-for="(value,key,index) in object" 
                --></span>
                å¯¹è±¡ä¿¡æ¯ï¼š
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(v,k,i) in user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;k&#125;&#125;==&#123;&#123;v&#125;&#125;==&#123;&#123;i&#125;&#125;ï¼›<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
                <span class="token comment">&lt;!-- 4ã€éå†çš„æ—¶å€™éƒ½åŠ ä¸Š:keyæ¥åŒºåˆ†ä¸åŒæ•°æ®ï¼Œæé«˜vueæ¸²æŸ“æ•ˆç‡ --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>

            
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(num,index) in nums<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../node_modules/vue/dist/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">         
        <span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            el<span class="token operator">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                users<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'æŸ³å²©'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token string">'å¥³'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">21</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token string">'ç”·'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'èŒƒå†°å†°'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token string">'å¥³'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'åˆ˜äº¦è²'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token string">'å¥³'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'å¤åŠ›å¨œæ‰'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token string">'å¥³'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">25</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                nums<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>4ã€éå†çš„æ—¶å€™éƒ½åŠ ä¸Š:keyæ¥åŒºåˆ†ä¸åŒæ•°æ®ï¼Œæé«˜vueæ¸²æŸ“æ•ˆç‡</p>
<h3 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- è¿‡æ»¤å™¨å¸¸ç”¨æ¥å¤„ç†æ–‡æœ¬æ ¼å¼åŒ–çš„æ“ä½œã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼šåŒèŠ±æ‹¬å·æ’å€¼å’Œ v-bind è¡¨è¾¾å¼ --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user in userList<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                &#123;&#123;user.id&#125;&#125; ==> &#123;&#123;user.name&#125;&#125; ==> &#123;&#123;user.gender == 1?"ç”·":"å¥³"&#125;&#125; ==>
                &#123;&#123;user.gender | genderFilter&#125;&#125; ==> &#123;&#123;user.gender | gFilter&#125;&#125;
                <span class="token comment">&lt;!-- è¿™é‡Œçš„"|"è¡¨ç¤ºçš„ç®¡é“ï¼Œå°†user.genderçš„å€¼äº¤ç»™genderFilter --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../node_modules/vue/dist/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">// å…¨å±€è¿‡æ»¤å™¨ </span>
        Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">"gFilter"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> <span class="token string">"ç”·~~~"</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> <span class="token string">"å¥³~~~"</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

        <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            el<span class="token operator">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                userList<span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'jacky'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">&#123;</span> id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'peter'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            filters<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">//// filters å®šä¹‰å±€éƒ¨è¿‡æ»¤å™¨ï¼Œåªå¯ä»¥åœ¨å½“å‰vueå®ä¾‹ä¸­ä½¿ç”¨</span>
                <span class="token function">genderFilter</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token keyword">return</span> <span class="token string">"ç”·"</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                        <span class="token keyword">return</span> <span class="token string">"å¥³"</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>count++<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>æˆ‘è¢«ç‚¹å‡»äº† &#123;&#123;count&#125;&#125; æ¬¡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- ä½¿ç”¨æ‰€å®šä¹‰çš„ç»„ä»¶button-counter --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button-counter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button-counter</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../node_modules/vue/dist/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">//1ã€å…¨å±€å£°æ˜æ³¨å†Œä¸€ä¸ªç»„ä»¶</span>
        Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"counter"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
            template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;button v-on:click="count++">æˆ‘è¢«ç‚¹å‡»äº† &#123;&#123;count&#125;&#125; æ¬¡&lt;/button></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
                    count<span class="token operator">:</span> <span class="token number">1</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2ã€å±€éƒ¨å£°æ˜ä¸€ä¸ªç»„ä»¶</span>
        <span class="token keyword">const</span> buttonCounter <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;button v-on:click="count++">æˆ‘è¢«ç‚¹å‡»äº† &#123;&#123;count&#125;&#125; æ¬¡~~~&lt;/button></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
                    count<span class="token operator">:</span> <span class="token number">1</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            el<span class="token operator">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                count<span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            components<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">//å£°æ˜æ‰€å®šä¹‰çš„å±€éƒ¨ç»„ä»¶</span>
                <span class="token string">'button-counter'</span><span class="token operator">:</span> buttonCounter
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><img src="/img/spring-cloud/image-20200425110048496.png" alt="image-20200425110048496"></p>
<h3 id="ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"></a>ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</h3><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>num<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;num&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>num++<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>èµï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>&#123;&#123;name&#125;&#125;ï¼Œæœ‰&#123;&#123;num&#125;&#125;ä¸ªäººç‚¹èµ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../node_modules/vue/dist/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            el<span class="token operator">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                name<span class="token operator">:</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span>
                num<span class="token operator">:</span> <span class="token number">100</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"=========beforeCreate============="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®æ¨¡å‹æœªåŠ è½½ï¼š"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•æœªåŠ è½½ï¼š"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"htmlæ¨¡æ¿æœªåŠ è½½ï¼š"</span> <span class="token operator">+</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"=========created============="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®æ¨¡å‹å·²åŠ è½½ï¼š"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å·²åŠ è½½ï¼š"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"htmlæ¨¡æ¿å·²åŠ è½½ï¼š"</span> <span class="token operator">+</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"htmlæ¨¡æ¿æœªæ¸²æŸ“ï¼š"</span> <span class="token operator">+</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"=========beforeMount============="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"htmlæ¨¡æ¿æœªæ¸²æŸ“ï¼š"</span> <span class="token operator">+</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"=========mounted============="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"htmlæ¨¡æ¿å·²æ¸²æŸ“ï¼š"</span> <span class="token operator">+</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"=========beforeUpdate============="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®æ¨¡å‹å·²æ›´æ–°ï¼š"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"htmlæ¨¡æ¿æœªæ›´æ–°ï¼š"</span> <span class="token operator">+</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"=========updated============="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®æ¨¡å‹å·²æ›´æ–°ï¼š"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"htmlæ¨¡æ¿å·²æ›´æ–°ï¼š"</span> <span class="token operator">+</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="13-element-ui"><a href="#13-element-ui" class="headerlink" title="13. element ui"></a>13. element ui</h2><p>å®˜ç½‘ï¼š <a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/installation">https://element.eleme.cn/#/zh-CN/component/installation</a> </p>
<p>å®‰è£…</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">npm</span> i element-ui -S<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><p> åœ¨ main.js ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š </p>
<pre class="line-numbers language-none"><code class="language-none">import ElementUI  from &#39;element-ui&#39;
import &#39;element-ui&#x2F;lib&#x2F;theme-chalk&#x2F;index.css&#39;;

Vue.use(ElementUI);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="14-é€’å½’æ ‘å½¢ç»“æ„è·å–æ•°æ®"><a href="#14-é€’å½’æ ‘å½¢ç»“æ„è·å–æ•°æ®" class="headerlink" title="14. é€’å½’æ ‘å½¢ç»“æ„è·å–æ•°æ®"></a>14. é€’å½’æ ‘å½¢ç»“æ„è·å–æ•°æ®</h2><p>åœ¨æ³¨å†Œä¸­å¿ƒä¸­â€œproductâ€å‘½åç©ºé—´ä¸­ï¼Œåˆ›å»ºâ€œgulimall-product.ymlâ€é…ç½®æ–‡ä»¶ï¼š</p>
<p><img src="/img/spring-cloud/image-20200425153735737.png" alt="image-20200425153735737"></p>
<p>å°†â€œapplication.ymlâ€å†…å®¹æ‹·è´åˆ°è¯¥é…ç½®æ–‡ä»¶ä¸­</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">10000</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token comment">#MySQLé…ç½®</span>
    <span class="token key atrule">driverClassName</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//192.168.137.14<span class="token punctuation">:</span>3306/gulimall_pms<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;useSSL=false</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> gulimall<span class="token punctuation">-</span>product
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.137.14<span class="token punctuation">:</span><span class="token number">8848</span>


<span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/mapper/<span class="token important">**/*.xml</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨æœ¬åœ°åˆ›å»ºâ€œbootstrap.propertiesâ€æ–‡ä»¶ï¼ŒæŒ‡æ˜é…ç½®ä¸­å¿ƒçš„ä½ç½®å’Œä½¿ç”¨åˆ°çš„é…ç½®æ–‡ä»¶ï¼š</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-product</span>
<span class="token attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">192.168.137.14:8848</span>
<span class="token attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token attr-value">3c50ffaa-010b-4b59-9372-902e35059232</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].data-id</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-product.yml</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].group</span><span class="token punctuation">=</span><span class="token attr-value">DEFAULT_GROUP</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].refresh</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç„¶åå¯åŠ¨gulimall-productï¼ŒæŸ¥çœ‹åˆ°è¯¥æœåŠ¡å·²ç»å‡ºç°åœ¨äº†nacosçš„æ³¨å†Œä¸­å¿ƒä¸­äº†</p>
<p>ä¿®æ”¹â€œcom.bigdata.gulimall.product.service.CategoryServiceâ€ç±»ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
 * åˆ—è¡¨
 */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/list/tree"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> categoryEntities <span class="token operator">=</span> categoryService<span class="token punctuation">.</span><span class="token function">listWithTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> categoryEntities<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æµ‹è¯•ï¼š<a target="_blank" rel="noopener" href="http://localhost:10000/product/category/list/tree">http://localhost:10000/product/category/list/tree</a></p>
<p><img src="/img/spring-cloud/image-20200425154348716.png" alt="image-20200425154348716"></p>
<p>å¦‚ä½•åŒºåˆ«æ˜¯å“ªç§åˆ†ç±»çº§åˆ«ï¼Ÿ</p>
<p>ç­”ï¼šå¯ä»¥é€šè¿‡åˆ†ç±»çš„parent_cidæ¥è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯ä¸€çº§åˆ†ç±»ï¼Œå…¶å€¼ä¸º0.</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"> <span class="token comment">/**
 * åˆ—è¡¨
 */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/list/tree"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> categoryEntities <span class="token operator">=</span> categoryService<span class="token punctuation">.</span><span class="token function">listWithTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ‰¾åˆ°æ‰€æœ‰çš„ä¸€çº§åˆ†ç±»</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> level1Menus <span class="token operator">=</span> categoryEntities<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">-></span> item<span class="token punctuation">.</span><span class="token function">getParentCid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>menu<span class="token operator">-></span><span class="token punctuation">&#123;</span>
                menu<span class="token punctuation">.</span><span class="token function">setChildCategoryEntity</span><span class="token punctuation">(</span><span class="token function">getChildrens</span><span class="token punctuation">(</span>menu<span class="token punctuation">,</span>categoryEntities<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> menu<span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>menu1<span class="token punctuation">,</span> menu2<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>

              <span class="token keyword">return</span> <span class="token punctuation">(</span>menu1<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">0</span><span class="token operator">:</span>menu1<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span> <span class="token punctuation">(</span>menu2<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">?</span><span class="token number">0</span><span class="token operator">:</span>menu2<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



    <span class="token keyword">return</span> level1Menus<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> <span class="token function">getChildrens</span><span class="token punctuation">(</span><span class="token class-name">CategoryEntity</span> root<span class="token punctuation">,</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> all<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CategoryEntity</span><span class="token punctuation">></span></span> childrens <span class="token operator">=</span> all<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span><span class="token function">getParentCid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> root<span class="token punctuation">.</span><span class="token function">getCatId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
        item<span class="token punctuation">.</span><span class="token function">setChildCategoryEntity</span><span class="token punctuation">(</span><span class="token function">getChildrens</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> all<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> item<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>menu1<span class="token punctuation">,</span> menu2<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>menu1<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token keyword">null</span> <span class="token operator">?</span> <span class="token number">0</span><span class="token operator">:</span>menu1<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span> <span class="token punctuation">(</span>menu2<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">?</span><span class="token number">0</span><span class="token operator">:</span>menu2<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> childrens<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ä¸‹é¢æ˜¯å¾—åˆ°çš„éƒ¨åˆ†JSONæ•°æ®</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">&#123;</span>
    <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å›¾ä¹¦ã€éŸ³åƒã€ç”µå­ä¹¦åˆŠ"</span><span class="token punctuation">,</span>
    <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
    <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
    <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ç”µå­ä¹¦åˆŠ"</span><span class="token punctuation">,</span>
        <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
        <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
        <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">&#123;</span>
            <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">165</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ç”µå­ä¹¦"</span><span class="token punctuation">,</span>
            <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
            <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#123;</span>
            <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">166</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ç½‘ç»œåŸåˆ›"</span><span class="token punctuation">,</span>
            <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
            <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#123;</span>
            <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">167</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"æ•°å­—æ‚å¿—"</span><span class="token punctuation">,</span>
            <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
            <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#123;</span>
            <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">168</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å¤šåª’ä½“å›¾ä¹¦"</span><span class="token punctuation">,</span>
            <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
            <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span>
        <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"éŸ³åƒ"</span><span class="token punctuation">,</span>
        <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
        <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
        <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">&#123;</span>
            <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">169</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"éŸ³ä¹"</span><span class="token punctuation">,</span>
            <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
            <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#123;</span>
            <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">170</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å½±è§†"</span><span class="token punctuation">,</span>
            <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
            <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#123;</span>
            <span class="token property">"catId"</span><span class="token operator">:</span> <span class="token number">171</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"æ•™è‚²éŸ³åƒ"</span><span class="token punctuation">,</span>
            <span class="token property">"parentCid"</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
            <span class="token property">"catLevel"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">"showStatus"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"icon"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productUnit"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">"productCount"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"childCategoryEntity"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">&#125;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>å¯åŠ¨åç«¯é¡¹ç›®renren-fast</p>
<p>å¯åŠ¨å‰ç«¯é¡¹ç›®renren-fast-vueï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">npm run dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>è®¿é—®ï¼š <a target="_blank" rel="noopener" href="http://localhost:8001/#/login">http://localhost:8001/#/login</a> </p>
<p>åˆ›å»ºä¸€çº§èœå•ï¼š</p>
<p><img src="/img/spring-cloud/image-20200425164019287.png" alt="image-20200425164019287"></p>
<p>åˆ›å»ºå®Œæˆåï¼Œåœ¨åå°çš„ç®¡ç†ç³»ç»Ÿä¸­ä¼šåˆ›å»ºä¸€æ¡è®°å½•ï¼š</p>
<p><img src="/img/spring-cloud/image-20200425164201813.png" alt="image-20200425164201813"></p>
<p>ç„¶ååˆ›å»ºå­èœå•ï¼š</p>
<p><img src="/img/spring-cloud/image-20200425164509143.png" alt="image-20200425164509143"></p>
<p>åˆ›å»ºrenren-fast-vue\src\views\modules\productç›®å½•ï¼Œå­æ‰€ä»¥æ˜¯è¿™æ ·æ¥åˆ›å»ºï¼Œæ˜¯å› ä¸ºproduct/categoryï¼Œå¯¹åº”äºproduct-category</p>
<p>åœ¨è¯¥ç›®å½•ä¸‹ï¼Œæ–°å»ºâ€œcategory.vueâ€æ–‡ä»¶ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>åˆ·æ–°é¡µé¢å‡ºç°404å¼‚å¸¸ï¼ŒæŸ¥çœ‹è¯·æ±‚å‘ç°ï¼Œè¯·æ±‚çš„æ˜¯â€œ<a target="_blank" rel="noopener" href="http://localhost:8080/renren-fast/product/category/list/tree%E2%80%9D">http://localhost:8080/renren-fast/product/category/list/treeâ€</a></p>
<p><img src="/img/spring-cloud/image-20200425173615149.png" alt="image-20200425173615149"></p>
<p>è¿™ä¸ªè¯·æ±‚æ˜¯ä¸æ­£ç¡®çš„ï¼Œæ­£ç¡®çš„è¯·æ±‚æ˜¯ï¼š<a target="_blank" rel="noopener" href="http://localhost:10000/product/category/list/tree%EF%BC%8C">http://localhost:10000/product/category/list/treeï¼Œ</a></p>
<p>ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼š</p>
<p>æ›¿æ¢â€œstatic\config\index.jsâ€æ–‡ä»¶ä¸­çš„â€œwindow.SITE_CONFIG[â€˜baseUrlâ€™]â€</p>
<p>æ›¿æ¢å‰ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">window.SITE_CONFIG[&#39;baseUrl&#39;] &#x3D; &#39;http:&#x2F;&#x2F;localhost:8080&#x2F;renren-fast&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ›¿æ¢åï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">window.SITE_CONFIG[&#39;baseUrl&#39;] &#x3D; &#39;http:&#x2F;&#x2F;localhost:88&#x2F;api&#39;;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><a href="http://localhost:88ï¼Œè¿™ä¸ªåœ°å€æ˜¯æˆ‘ä»¬ç½‘å…³å¾®æœåŠ¡çš„æ¥å£ã€‚">http://localhost:88ï¼Œè¿™ä¸ªåœ°å€æ˜¯æˆ‘ä»¬ç½‘å…³å¾®æœåŠ¡çš„æ¥å£ã€‚</a></p>
<p>è¿™é‡Œæˆ‘ä»¬éœ€è¦é€šè¿‡ç½‘å…³æ¥å®Œæˆè·¯å¾„çš„æ˜ å°„ï¼Œå› æ­¤å°†renren-fastæ³¨å†Œåˆ°nacosæ³¨å†Œä¸­å¿ƒä¸­ï¼Œå¹¶æ·»åŠ é…ç½®ä¸­å¿ƒ</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> renren<span class="token punctuation">-</span>fast
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.137.14<span class="token punctuation">:</span><span class="token number">8848</span>

      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> renren<span class="token punctuation">-</span>fast
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.137.8848
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> ee409c3f<span class="token punctuation">-</span>3206<span class="token punctuation">-</span>4a3b<span class="token punctuation">-</span>ba65<span class="token punctuation">-</span>7376922a886d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>é…ç½®ç½‘å…³è·¯ç”±ï¼Œå‰å°çš„æ‰€æœ‰è¯·æ±‚éƒ½æ˜¯ç»ç”±â€œ<a target="_blank" rel="noopener" href="http://localhost:88/api%E2%80%9D%E6%9D%A5%E8%BD%AC%E5%8F%91%E7%9A%84%EF%BC%8C%E5%9C%A8%E2%80%9Cgulimall-gateway%E2%80%9D%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99%EF%BC%9A">http://localhost:88/apiâ€æ¥è½¬å‘çš„ï¼Œåœ¨â€œgulimall-gatewayâ€ä¸­æ·»åŠ è·¯ç”±è§„åˆ™ï¼š</a></p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> admin_route
  <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//renren<span class="token punctuation">-</span>fast
  <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> Path=/api/<span class="token important">**</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>ä½†æ˜¯è¿™æ ·åšä¹Ÿå¼•å…¥äº†å¦å¤–çš„ä¸€ä¸ªé—®é¢˜ï¼Œå†æ¬¡è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8001/#/login%EF%BC%8C%E5%8F%91%E7%8E%B0%E9%AA%8C%E8%AF%81%E7%A0%81%E4%B8%8D%E5%86%8D%E6%98%BE%E7%A4%BA%EF%BC%9A">http://localhost:8001/#/loginï¼Œå‘ç°éªŒè¯ç ä¸å†æ˜¾ç¤ºï¼š</a></p>
<p>åˆ†æåŸå› ï¼š</p>
<ol>
<li>ç°åœ¨çš„éªŒè¯ç è¯·æ±‚è·¯å¾„ä¸ºï¼Œ<a target="_blank" rel="noopener" href="http://localhost:88/api/captcha.jpg?uuid=69c79f02-d15b-478a-8465-a07fd09001e6">http://localhost:88/api/captcha.jpg?uuid=69c79f02-d15b-478a-8465-a07fd09001e6</a></li>
<li>åŸå§‹çš„éªŒè¯ç è¯·æ±‚è·¯å¾„ï¼š<a target="_blank" rel="noopener" href="http://localhost:8001/renren-fast/captcha.jpg?uuid=69c79f02-d15b-478a-8465-a07fd09001e6">http://localhost:8001/renren-fast/captcha.jpg?uuid=69c79f02-d15b-478a-8465-a07fd09001e6</a></li>
</ol>
<p>åœ¨admin_routeçš„è·¯ç”±è§„åˆ™ä¸‹ï¼Œåœ¨è®¿é—®è·¯å¾„ä¸­åŒ…å«äº†â€œapiâ€ï¼Œå› æ­¤å®ƒä¼šå°†å®ƒè½¬å‘åˆ°renren-fastï¼Œç½‘å…³åœ¨è½¬å‘çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ç½‘å…³çš„å‰ç¼€ä¿¡æ¯ï¼Œä¸ºäº†èƒ½å¤Ÿæ­£å¸¸çš„å–å¾—éªŒè¯ç ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¯·æ±‚è·¯å¾„è¿›è¡Œé‡å†™</p>
<p>å…³äºè¯·æ±‚è·¯å¾„é‡å†™ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.2.RELEASE/reference/html/#the-rewritepath-gatewayfilter-factory">6.16. The <code>RewritePath</code> <code>GatewayFilter</code> Factory</a></p>
<p>The <code>RewritePath</code> <code>GatewayFilter</code> factory takes a path <code>regexp</code> parameter and a <code>replacement</code> parameter. This uses Java regular expressions for a flexible way to rewrite the request path. The following listing configures a <code>RewritePath</code> <code>GatewayFilter</code>:</p>
<p>Example 41. application.yml</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> rewritepath_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Path=/foo/<span class="token important">**</span>
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> RewritePath=/red(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">></span>/<span class="token punctuation">?</span>.<span class="token important">*)</span><span class="token punctuation">,</span> $\<span class="token punctuation">&#123;</span>segment<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>For a request path of <code>/red/blue</code>, this sets the path to <code>/blue</code> before making the downstream request. Note that the <code>$</code> should be replaced with <code>$\</code> because of the YAML specification.</p>
<p>ä¿®æ”¹â€œadmin_routeâ€è·¯ç”±è§„åˆ™ï¼š</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> admin_route
  <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//renren<span class="token punctuation">-</span>fast
  <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> Path=/api/<span class="token important">**</span>
  <span class="token key atrule">filters</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> RewritePath=/api/(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">></span>/<span class="token punctuation">?</span>.<span class="token important">*)</span><span class="token punctuation">,</span> /renren<span class="token punctuation">-</span>fast/$\<span class="token punctuation">&#123;</span>segment<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>å†æ¬¡è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8001/#/login%EF%BC%8C%E9%AA%8C%E8%AF%81%E7%A0%81%E8%83%BD%E5%A4%9F%E6%AD%A3%E5%B8%B8%E7%9A%84%E5%8A%A0%E8%BD%BD%E4%BA%86%E3%80%82">http://localhost:8001/#/loginï¼ŒéªŒè¯ç èƒ½å¤Ÿæ­£å¸¸çš„åŠ è½½äº†ã€‚</a></p>
<p>ä½†æ˜¯å¾ˆä¸å¹¸æ–°çš„é—®é¢˜åˆäº§ç”Ÿäº†ï¼Œè®¿é—®è¢«æ‹’ç»äº†</p>
<p><img src="/img/spring-cloud/image-20200425192722821.png" alt="image-20200425192722821"></p>
<p> é—®é¢˜æè¿°ï¼šå·²æ‹¦æˆªè·¨æºè¯·æ±‚ï¼šåŒæºç­–ç•¥ç¦æ­¢è¯»å–ä½äº <a target="_blank" rel="noopener" href="http://localhost:88/api/sys/login">http://localhost:88/api/sys/login</a> çš„è¿œç¨‹èµ„æºã€‚ï¼ˆåŸå› ï¼šCORS å¤´ç¼ºå°‘ â€˜Access-Control-Allow-Originâ€™ï¼‰ã€‚ </p>
<p>é—®é¢˜åˆ†æï¼šè¿™æ˜¯ä¸€ç§è·¨åŸŸé—®é¢˜ã€‚è®¿é—®çš„åŸŸåå’Œç«¯å£å’ŒåŸæ¥çš„è¯·æ±‚ä¸åŒï¼Œè¯·æ±‚å°±ä¼šè¢«é™åˆ¶</p>
<p><img src="/img/spring-cloud/image-20200425192902637.png" alt="image-20200425192902637"></p>
<p>è·¨åŸŸæµç¨‹ï¼š</p>
<p><img src="/img/spring-cloud/image-20200425193136641.png" alt="image-20200425193136641"></p>
<p><img src="/img/spring-cloud/image-20200425193523849.png" alt="image-20200425193523849"></p>
<p><img src="/img/spring-cloud/image-20200425193614185.png" alt="image-20200425193614185"></p>
<p>è§£å†³æ–¹æ³•ï¼šåœ¨ç½‘å…³ä¸­å®šä¹‰â€œGulimallCorsConfigurationâ€ç±»ï¼Œè¯¥ç±»ç”¨æ¥åšè¿‡æ»¤ï¼Œå…è®¸æ‰€æœ‰çš„è¯·æ±‚è·¨åŸŸã€‚</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GulimallCorsConfiguration</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CorsWebFilter</span> <span class="token function">corsWebFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">UrlBasedCorsConfigurationSource</span> source<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CorsConfiguration</span> corsConfiguration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        corsConfiguration<span class="token punctuation">.</span><span class="token function">setAllowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        source<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span>corsConfiguration<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsWebFilter</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>å†æ¬¡è®¿é—®ï¼š<a target="_blank" rel="noopener" href="http://localhost:8001/#/login">http://localhost:8001/#/login</a></p>
<p><img src="/img/spring-cloud/image-20200425195437299.png" alt="image-20200425195437299"></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8001/renre%E5%B7%B2%E6%8B%A6%E6%88%AA%E8%B7%A8%E6%BA%90%E8%AF%B7%E6%B1%82%EF%BC%9A%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E7%A6%81%E6%AD%A2%E8%AF%BB%E5%8F%96%E4%BD%8D%E4%BA%8E">http://localhost:8001/renreå·²æ‹¦æˆªè·¨æºè¯·æ±‚ï¼šåŒæºç­–ç•¥ç¦æ­¢è¯»å–ä½äº</a> <a target="_blank" rel="noopener" href="http://localhost:88/api/sys/login">http://localhost:88/api/sys/login</a> çš„è¿œç¨‹èµ„æºã€‚ï¼ˆåŸå› ï¼šä¸å…è®¸æœ‰å¤šä¸ª â€˜Access-Control-Allow-Originâ€™ CORS å¤´ï¼‰n-fast/captcha.jpg?uuid=69c79f02-d15b-478a-8465-a07fd09001e6</p>
<p>å‡ºç°äº†å¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”ä¹Ÿå­˜åœ¨å¤šä¸ªè·¨æºè¯·æ±‚ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹renren-fasté¡¹ç›®ï¼Œæ³¨é‡Šæ‰â€œio.renren.config.CorsConfigâ€ç±»ã€‚ç„¶åå†æ¬¡è¿›è¡Œè®¿é—®ã€‚</p>
<p>åœ¨æ˜¾ç¤ºåˆ†ç±»ä¿¡æ¯çš„æ—¶å€™ï¼Œå‡ºç°äº†404å¼‚å¸¸ï¼Œè¯·æ±‚çš„<a target="_blank" rel="noopener" href="http://localhost:88/api/product/category/list/tree%E4%B8%8D%E5%AD%98%E5%9C%A8">http://localhost:88/api/product/category/list/treeä¸å­˜åœ¨</a></p>
<p><img src="/img/spring-cloud/image-20200425213240724.png" alt="image-20200425213240724"></p>
<p>è¿™æ˜¯å› ä¸ºç½‘å…³ä¸Šæ‰€åšçš„è·¯å¾„æ˜ å°„ä¸æ­£ç¡®ï¼Œæ˜ å°„åçš„è·¯å¾„ä¸º<a target="_blank" rel="noopener" href="http://localhost:8001/renren-fast/product/category/list/tree">http://localhost:8001/renren-fast/product/category/list/tree</a></p>
<p>ä½†æ˜¯åªæœ‰é€šè¿‡<a target="_blank" rel="noopener" href="http://localhost:10000/product/category/list/tree%E8%B7%AF%E5%BE%84%E6%89%8D%E8%83%BD%E5%A4%9F%E6%AD%A3%E5%B8%B8%E8%AE%BF%E9%97%AE%EF%BC%8C%E6%89%80%E4%BB%A5%E4%BC%9A%E6%8A%A5404%E5%BC%82%E5%B8%B8%E3%80%82">http://localhost:10000/product/category/list/treeè·¯å¾„æ‰èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œæ‰€ä»¥ä¼šæŠ¥404å¼‚å¸¸ã€‚</a></p>
<p>è§£å†³æ–¹æ³•å°±æ˜¯å®šä¹‰ä¸€ä¸ªproductè·¯ç”±è§„åˆ™ï¼Œè¿›è¡Œè·¯å¾„é‡å†™ï¼š</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_route
  <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//gulimall<span class="token punctuation">-</span>product
  <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> Path=/api/product/<span class="token important">**</span>
  <span class="token key atrule">filters</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> RewritePath=/api/(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">></span>/<span class="token punctuation">?</span>.<span class="token important">*)</span><span class="token punctuation">,</span>/$\<span class="token punctuation">&#123;</span>segment<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨è·¯ç”±è§„åˆ™çš„é¡ºåºä¸Šï¼Œå°†ç²¾ç¡®çš„è·¯ç”±è§„åˆ™æ”¾ç½®åˆ°æ¨¡ç³Šçš„è·¯ç”±è§„åˆ™çš„å‰é¢ï¼Œå¦åˆ™çš„è¯ï¼Œç²¾ç¡®çš„è·¯ç”±è§„åˆ™å°†ä¸ä¼šè¢«åŒ¹é…åˆ°ï¼Œç±»ä¼¼äºå¼‚å¸¸ä½“ç³»ä¸­try catchå­å¥ä¸­å¼‚å¸¸çš„å¤„ç†é¡ºåºã€‚</p>
<h2 id="15-åˆ é™¤æ•°æ®"><a href="#15-åˆ é™¤æ•°æ®" class="headerlink" title="15. åˆ é™¤æ•°æ®"></a>15. åˆ é™¤æ•°æ®</h2><p>æ·»åŠ deleteå’Œappendæ ‡è¯†ï¼Œå¹¶ä¸”å¢åŠ å¤é€‰æ¡†</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;el-tree
   :data&#x3D;&quot;menus&quot;
   show-checkbox  &#x2F;&#x2F;æ˜¾ç¤ºå¤é€‰æ¡†
   :props&#x3D;&quot;defaultProps&quot;  
   :expand-on-click-node&#x3D;&quot;false&quot; &#x2F;&#x2F;è®¾ç½®èŠ‚ç‚¹ç‚¹å‡»æ—¶ä¸å±•å¼€
   node-key&#x3D;&quot;catId&quot;   
 &gt;
   &lt;span class&#x3D;&quot;custom-tree-node&quot; slot-scope&#x3D;&quot;&#123; node, data &#125;&quot;&gt;
     &lt;span&gt;&#123;&#123; node.label &#125;&#125;&lt;&#x2F;span&gt;
     &lt;span&gt;
       &lt;el-button v-if&#x3D;&quot;node.level &lt;&#x3D; 2&quot; type&#x3D;&quot;text&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;() &#x3D;&gt; append(data)&quot;&gt;Append&lt;&#x2F;el-button&gt;
       &lt;el-button
         v-if&#x3D;&quot;node.childNodes.length &#x3D;&#x3D; 0&quot;
         type&#x3D;&quot;text&quot;
         size&#x3D;&quot;mini&quot;
         @click&#x3D;&quot;() &#x3D;&gt; remove(node, data)&quot;
       &gt;Delete&lt;&#x2F;el-button&gt;
     &lt;&#x2F;span&gt;
   &lt;&#x2F;span&gt;
 &lt;&#x2F;el-tree&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æµ‹è¯•åˆ é™¤æ•°æ®ï¼Œæ‰“å¼€postmanè¾“å…¥â€œ <a target="_blank" rel="noopener" href="http://localhost:88/api/product/category/delete">http://localhost:88/api/product/category/delete</a> â€ï¼Œè¯·æ±‚æ–¹å¼è®¾ç½®ä¸ºPOSTï¼Œä¸ºäº†æ¯”å¯¹æ•ˆæœï¼Œå¯ä»¥åœ¨åˆ é™¤ä¹‹å‰æŸ¥è¯¢æ•°æ®åº“çš„pms_categoryè¡¨ï¼š</p>
<p><img src="/img/spring-cloud/image-20200426112814069.png" alt="image-20200426112814069"></p>
<p>ç”±äºdeleteè¯·æ±‚æ¥æ”¶çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨JSONæ–¹å¼ï¼Œä¼ å…¥äº†ä¸€ä¸ªæ•°ç»„ï¼š</p>
<p><img src="/img/spring-cloud/image-20200426113003531.png" alt="image-20200426113003531"></p>
<p>å†æ¬¡æŸ¥è¯¢æ•°æ®åº“èƒ½å¤Ÿçœ‹åˆ°cat_idä¸º1000çš„æ•°æ®å·²ç»è¢«åˆ é™¤äº†ã€‚</p>
<p>ä¿®æ”¹â€œcom.bigdata.gulimall.product.controller.CategoryControllerâ€ç±»ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"> <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/delete"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> catIds<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">//åˆ é™¤ä¹‹å‰éœ€è¦åˆ¤æ–­å¾…åˆ é™¤çš„èœå•é‚£æ˜¯å¦è¢«åˆ«çš„åœ°æ–¹æ‰€å¼•ç”¨ã€‚</span>
<span class="token comment">//		categoryService.removeByIds(Arrays.asList(catIds));</span>

        categoryService<span class="token punctuation">.</span><span class="token function">removeMenuByIds</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>catIds<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>com.bigdata.gulimall.product.service.impl.CategoryServiceImpl</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span>   <span class="token keyword">void</span> <span class="token function">removeMenuByIds</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> asList<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//TODO æ£€æŸ¥å½“å‰çš„èœå•æ˜¯å¦è¢«åˆ«çš„åœ°æ–¹æ‰€å¼•ç”¨</span>
    categoryDao<span class="token punctuation">.</span><span class="token function">deleteBatchIds</span><span class="token punctuation">(</span>asList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ç„¶è€Œå¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›åˆ é™¤æ•°æ®ï¼Œè€Œæ˜¯æ ‡è®°å®ƒè¢«åˆ é™¤äº†ï¼Œè¿™å°±æ˜¯é€»è¾‘åˆ é™¤ï¼›</p>
<p>å¯ä»¥è®¾ç½®show_statusä¸º0ï¼Œæ ‡è®°å®ƒå·²ç»è¢«åˆ é™¤ã€‚</p>
<p><img src="/img/spring-cloud/image-20200426115332899.png" alt="image-20200426115332899"></p>
<p>mybatis-plusçš„é€»è¾‘åˆ é™¤ï¼š</p>
<p><img src="/img/spring-cloud/image-20200426115420393.png" alt="image-20200426115420393"></p>
<p>é…ç½®å…¨å±€çš„é€»è¾‘åˆ é™¤è§„åˆ™ï¼Œåœ¨â€œsrc/main/resources/application.ymlâ€æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">global-config</span><span class="token punctuation">:</span>
    <span class="token key atrule">db-config</span><span class="token punctuation">:</span>
      <span class="token key atrule">id-type</span><span class="token punctuation">:</span> auto
      <span class="token key atrule">logic-delete-value</span><span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token key atrule">logic-not-delete-value</span><span class="token punctuation">:</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¿®æ”¹â€œcom.bigdata.gulimall.product.entity.CategoryEntityâ€ç±»ï¼Œæ·»åŠ ä¸Š@TableLogicï¼Œè¡¨æ˜ä½¿ç”¨é€»è¾‘åˆ é™¤ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
 * æ˜¯å¦æ˜¾ç¤º[0-ä¸æ˜¾ç¤ºï¼Œ1æ˜¾ç¤º]
 */</span>
<span class="token annotation punctuation">@TableLogic</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">,</span>delval <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> showStatus<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç„¶ååœ¨POSTManä¸­æµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½å¤Ÿæ»¡è¶³éœ€è¦ã€‚å¦å¤–åœ¨â€œsrc/main/resources/application.ymlâ€æ–‡ä»¶ä¸­ï¼Œè®¾ç½®æ—¥å¿—çº§åˆ«ï¼Œæ‰“å°å‡ºSQLè¯­å¥ï¼š</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">com.bigdata.gulimall.product</span><span class="token punctuation">:</span> debug<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>æ‰“å°çš„æ—¥å¿—ï¼š</p>
<pre class="line-numbers language-verilog" data-language="verilog"><code class="language-verilog"><span class="token operator">==></span>  Preparing<span class="token punctuation">:</span> UPDATE pms_category SET show_status<span class="token operator">=</span><span class="token number">0</span> WHERE cat_id IN <span class="token punctuation">(</span> <span class="token operator">?</span> <span class="token punctuation">)</span> AND show_status<span class="token operator">=</span><span class="token number">1</span> 
<span class="token operator">==></span> Parameters<span class="token punctuation">:</span> <span class="token function">1431</span><span class="token punctuation">(</span>Long<span class="token punctuation">)</span>
<span class="token operator">&lt;==</span>    Updates<span class="token punctuation">:</span> <span class="token number">1</span>
get changedGroupKeys<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="16-èœå•æ‹–åŠ¨"><a href="#16-èœå•æ‹–åŠ¨" class="headerlink" title="16. èœå•æ‹–åŠ¨"></a>16. èœå•æ‹–åŠ¨</h2><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>åŒä¸€ä¸ªèœå•å†…æ‹–åŠ¨</td>
<td>æ­£å¸¸</td>
</tr>
<tr>
<td>æ‹–åŠ¨åˆ°çˆ¶èœå•çš„å‰é¢æˆ–åé¢</td>
<td>æ­£å¸¸</td>
</tr>
<tr>
<td>æ‹–åŠ¨åˆ°çˆ¶èœå•åŒçº§çš„å¦å¤–ä¸€ä¸ªèœå•ä¸­</td>
<td>æ­£å¸¸</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>å…³æ³¨çš„ç„¦ç‚¹åœ¨äºï¼Œæ‹–åŠ¨åˆ°ç›®æ ‡èŠ‚ç‚¹ä¸­ï¼Œä½¿å¾—ç›®æ ‡èŠ‚ç‚¹çš„catlevel+deepå°äº3å³å¯ã€‚æ‹–åŠ¨åˆ°ç›®æ ‡èŠ‚ç‚¹å‰åçš„æ¡ä»¶æ˜¯ï¼Œä½¿å¾—</p>
<h3 id="æ‹–åŠ¨èœå•æ—¶éœ€è¦ä¿®æ”¹é¡ºåºå’Œçº§åˆ«"><a href="#æ‹–åŠ¨èœå•æ—¶éœ€è¦ä¿®æ”¹é¡ºåºå’Œçº§åˆ«" class="headerlink" title="æ‹–åŠ¨èœå•æ—¶éœ€è¦ä¿®æ”¹é¡ºåºå’Œçº§åˆ«"></a>æ‹–åŠ¨èœå•æ—¶éœ€è¦ä¿®æ”¹é¡ºåºå’Œçº§åˆ«</h3><p>éœ€è¦è€ƒè™‘ä¸¤ç§ç±»å‹èŠ‚ç‚¹çš„catLevel</p>
<p>ä¸€ç§å…³ç³»æ˜¯ï¼šå¦‚æœæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹çš„å‰åç§»åŠ¨ï¼Œåˆ™ä¸éœ€è¦ä¿®æ”¹å…¶catLevel</p>
<p>å¦‚æœæ˜¯æ‹–åŠ¨åˆ°å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹å†…æˆ–çˆ¶èŠ‚ç‚¹ä¸­ï¼Œåˆ™è¦è€ƒè™‘ä¿®æ”¹å…¶catLevel</p>
<p>å¦‚æœæ‹–åŠ¨åˆ°ä¸çˆ¶èŠ‚ç‚¹å¹³çº§çš„èŠ‚ç‚¹å…³ç³»ä¸­ï¼Œåˆ™è¦å°†è¯¥æ‹–åŠ¨çš„èŠ‚ç‚¹çš„catLevelï¼Œè®¾ç½®ä¸ºå…„å¼ŸèŠ‚ç‚¹çš„Levelï¼Œ</p>
<p>å…ˆè€ƒè™‘parentCidè¿˜æ˜¯å…ˆè€ƒè™‘catLevel?</p>
<p>ä¸¤ç§å…³ç³»åœ¨è€¦åˆ</p>
<p>å¦å¤–è¿˜æœ‰ä¸€ç§æ˜¯å‰åæ‹–åŠ¨çš„æƒ…å†µ</p>
<p>å“ªä¸ªèŒƒå›´æœ€å¤§ï¼Ÿ</p>
<p>è‚¯å®šæ˜¯æ‹–åŠ¨ç±»å‹å…³ç³»æœ€å¤§ï¼Œ</p>
<p>å¦‚æœæ˜¯å‰åæ‹–åŠ¨ï¼Œåˆ™æ‹–åŠ¨åéœ€è¦çœ‹å¾…æ‹–åŠ¨èŠ‚ç‚¹çš„å±‚çº§å’Œè®¾ç½®å¾…æ‹–åŠ¨èŠ‚ç‚¹çš„parentIdï¼Œ</p>
<p>â€‹       å¦‚æœå¾…æ‹–åŠ¨èŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹çš„å±‚çº§ç›¸åŒï¼Œåˆ™è®¤ä¸ºæ˜¯åŒçº§æ‹–åŠ¨ï¼Œåªéœ€è¦ä¿®æ”¹èŠ‚ç‚¹çš„å…ˆåé¡ºåºå³å¯ï¼›</p>
<p>â€‹       å¦åˆ™è®¤ä¸ºæ˜¯è·¨çº§æ‹–åŠ¨ï¼Œåˆ™éœ€è¦ä¿®æ”¹å±‚çº§å’Œé‡æ–°è®¾ç½®parentID</p>
<p>â€‹              å¦‚æœ</p>
<p>â€‹      ä»¥æ‹–åŠ¨ç±»å‹æ¥åˆ†ï¼Œå¹¶ä¸åˆé€‚ï¼Œæ¯”è¾ƒåˆé€‚çš„æ˜¯è·¨çº§æ‹–åŠ¨å’ŒåŒçº§æ‹–åŠ¨</p>
<p>å¦‚ä½•åˆ¤æ–­æ˜¯è·¨çº§æ‹–åŠ¨è¿˜æ˜¯åŒçº§æ‹–åŠ¨ï¼Œæ ¹æ®æ‹–åŠ¨çš„å±‚çº§æ¥çœ‹ï¼Œå¦‚æœæ˜¯åŒä¸€çº§çš„æ‹–åŠ¨ï¼Œåªéœ€è¦ä¿®æ”¹å…ˆåé¡ºåºå³å¯ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“æ‹–åŠ¨åˆ°å¦å¤–ä¸€ä¸ªåˆ†ç»„ä¸‹çš„åŒçº§ç›®å½•ä¸­ï¼Œæ˜¾ç„¶ä¹Ÿéœ€è¦ä¿®æ”¹parentIDï¼Œç©¶ç«Ÿä»€ä¹ˆæ ·çš„æ¨¡å‹æœ€å¥½å‘¢ï¼Ÿ</p>
<p>  å¦å¤–ä¹Ÿå¯ä»¥åˆ¤æ–­åœ¨è·¨çº§ç§»åŠ¨æ—¶ï¼Œè·¨çº§åçš„parentIDæ˜¯å¦ç›¸åŒï¼Œå¦‚æœä¸ç›¸åŒï¼Œåˆ™è®¤ä¸ºæ˜¯åœ¨ä¸åŒç›®å½•ä¸‹çš„è·¨çº§ç§»åŠ¨éœ€è¦ä¿®æ”¹parentIDã€‚</p>
<p>é¡ºåºã€catLevelå’ŒparentID</p>
<p>åŒçº§ç§»åŠ¨ï¼š</p>
<p>ï¼ˆ1ï¼‰é¦–å…ˆåˆ¤æ–­å¾…ç§»åŠ¨èŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹çš„catLevelæ˜¯å¦ç›¸åŒï¼Œ</p>
<p> ï¼ˆ2ï¼‰ç›¸åŒåˆ™è®¤ä¸ºæ˜¯åŒçº§ç§»åŠ¨ï¼Œ</p>
<p>â€‹          å¦‚æœæ­¤æ—¶ç§»åŠ¨åç›®æ ‡èŠ‚ç‚¹çš„parentIDå’Œå¾…ç§»åŠ¨èŠ‚ç‚¹çš„ç›¸åŒï¼Œä½†æ˜¯ç§»åŠ¨ç±»å‹æ˜¯å‰åç§»åŠ¨ï¼Œåªéœ€è¦è°ƒæ•´é¡ºåºå³å¯ï¼Œæ­¤æ—¶ç§»åŠ¨ç±»å‹æ˜¯innerï¼Œåˆ™éœ€è¦ä¿®æ”¹catLevelå’ŒparentIdå’Œé¡ºåº</p>
<p>â€‹         å¦‚æœæ­¤æ—¶ç§»åŠ¨åç›®æ ‡èŠ‚ç‚¹çš„parentIDå’Œå¾…ç§»åŠ¨èŠ‚ç‚¹çš„ä¸ç›¸åŒï¼Œä½†æ˜¯ç§»åŠ¨ç±»å‹æ˜¯å‰åç§»åŠ¨ï¼Œåˆ™éœ€è¦è°ƒæ•´é¡ºåºå’ŒparentIdï¼Œæ­¤æ—¶ç§»åŠ¨ç±»å‹æ˜¯innerï¼Œåˆ™éœ€è¦ä¿®æ”¹catLevelå’ŒparentIdå’Œé¡ºåº</p>
<p>é€šè¿‡è¿™ä¸¤æ­¥çš„æ“ä½œèƒ½çœ‹åˆ°ä¸€äº›å…±æ€§ï¼Œå¦‚æœæŠ½å–ç§»åŠ¨ç±»å‹ä½œä¸ºå¤§çš„åˆ†ç±»ï¼Œåˆ™åœ¨è¿™ç§åˆ†ç±»ä¸‹ï¼Œ</p>
<p>å¦‚æœæ˜¯å‰åç§»åŠ¨ï¼Œåˆ™åˆ†ä¸ºä¸‹é¢å‡ ç§æƒ…å†µï¼š</p>
<p>â€‹    åŒçº§åˆ«ä¸‹çš„å‰åç§»åŠ¨ï¼šç•Œå®šæ ‡å‡†ä¸ºcatLevelç›¸åŒï¼Œä½†æ˜¯åˆå¯ä»¥åˆ†ä¸ºparentIDç›¸åŒå’ŒparentIDä¸åŒï¼Œparentç›¸åŒæ—¶ï¼Œåªéœ€è¦ä¿®æ”¹é¡ºåºå³å¯ï¼›parentIDä¸åŒæ—¶ï¼Œéœ€è¦ä¿®æ”¹parentIDå’Œé¡ºåº</p>
<p>â€‹    ä¸åŒçº§åˆ«ä¸‹çš„å‰åç§»åŠ¨ï¼šç•Œå®šæ ‡å‡†ä¸ºcatLevelä¸åŒï¼Œæ­¤æ—¶æ— è®ºå¦‚ä½•éƒ½è¦ä¿®æ”¹parentIDï¼Œé¡ºåºå’ŒcatLevel</p>
<p>å¦‚æœæ˜¯innerç±»å‹ç§»åŠ¨ï¼Œåˆ™åˆ†ä¸ºä¸€ä¸‹çš„å‡ ç§æƒ…å†µã€‚</p>
<p>â€‹     æ­¤æ—¶ä¸è®ºæ˜¯åŒçº§innerï¼Œè¿˜æ˜¯è·¨çº§innnerï¼Œéƒ½éœ€è¦ä¿®æ”¹parentIDï¼Œé¡ºåºå’ŒcatLevel</p>
<p>å“ªç§æƒ…å†µéœ€è¦æ›´æ–°å­èŠ‚ç‚¹å‘¢ï¼Ÿ</p>
<p>é‚£å°±è¦çœ‹è¦æ‹–æ‹½çš„èŠ‚ç‚¹æ˜¯å¦å«æœ‰å­èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å­èŠ‚ç‚¹ï¼Œåˆ™éœ€è¦æ›´æ–°å­èŠ‚ç‚¹çš„catLevelï¼Œä¸éœ€è¦æ›´æ–°å®ƒä¹‹é—´çš„é¡ºåºå’ŒparentIdï¼Œåªéœ€è¦æ›´æ–°catLevelå³å¯ã€‚è¿™ç§æ›´æ–°å­èŠ‚ç‚¹çš„Levelåº”è¯¥å½’ç±»ï¼Œç›®å‰çš„ç›®æ ‡æ˜¯åªè¦æœ‰å­èŠ‚ç‚¹å°±æ›´æ–°å®ƒçš„catLevelï¼Œ</p>
<p>ï¼ˆ2ï¼‰å¦‚æœå¾…ç§»åŠ¨èŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹çš„catLevelä¸åŒï¼Œåˆ™è®¤ä¸ºæ˜¯è·¨çº§ç§»åŠ¨ã€‚å¦‚æœæ˜¯ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹ä¸­ï¼Œåˆ™éœ€è¦è®¾ç½®catLevelï¼ŒparentIDå’Œé¡ºåºã€‚æ­¤æ—¶éœ€è¦åˆ†ä¸¤ç§æƒ…å†µæ¥è€ƒè™‘ï¼Œå¦‚æœæ˜¯ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹ä¸­ï¼Œåˆ™éœ€è¦è®¾ç½®catLevelï¼ŒparentIDå’Œé¡ºåºï¼Œå¦‚æœæ˜¯ç§»åŠ¨åˆ°å…„å¼ŸèŠ‚ç‚¹ä¸­ï¼Œåˆ™éœ€è¦è®¾ç½®</p>
<p>åŒ…å«ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹åŒçº§ç›®å½•ï¼Œå…„å¼ŸèŠ‚ç‚¹ä¸­ã€‚</p>
<h3 id="è®¾ç½®èœå•æ‹–åŠ¨å¼€å…³"><a href="#è®¾ç½®èœå•æ‹–åŠ¨å¼€å…³" class="headerlink" title="è®¾ç½®èœå•æ‹–åŠ¨å¼€å…³"></a>è®¾ç½®èœå•æ‹–åŠ¨å¼€å…³</h3><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;el-switch v-model&#x3D;&quot;draggable&quot; active-text&#x3D;&quot;å¼€å¯æ‹–æ‹½&quot; inactive-text&#x3D;&quot;å…³é—­æ‹–æ‹½&quot;&gt;&lt;&#x2F;el-switch&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>ä½†æ˜¯ç°åœ¨å­˜åœ¨çš„ä¸€ä¸ªé—®é¢˜æ˜¯æ¯æ¬¡æ‹–æ‹½çš„æ—¶å€™ï¼Œéƒ½ä¼šå‘é€è¯·æ±‚ï¼Œæ›´æ–°æ•°æ®åº“è¿™æ ·é¢‘ç¹çš„ä¸æ•°æ®åº“äº¤äº’ï¼Œç°åœ¨æƒ³è¦å®ç°ä¸€ä¸ªæ‹–æ‹½è¿‡ç¨‹ä¸­ä¸æ›´æ–°æ•°æ®åº“ï¼Œæ‹–æ‹½å®Œæˆåï¼Œç»Ÿä¸€æäº¤æ‹–æ‹½åçš„æ•°æ®ã€‚</p>
<p>ç°åœ¨è¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ˜¯å°†ä¸€ä¸ªèœå•è¿ç»­çš„æ‹–æ‹½ï¼Œæœ€ç»ˆè¿˜æ”¾åˆ°äº†åŸæ¥çš„ä½ç½®ï¼Œä½†æ˜¯updateNodeä¸­å´å‡ºç°äº†å¾ˆå¤šèŠ‚ç‚¹æ›´æ–°ä¿¡æ¯ï¼Œè¿™æ ·æ˜¾ç„¶ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</p>
<h3 id="æ‰¹é‡åˆ é™¤"><a href="#æ‰¹é‡åˆ é™¤" class="headerlink" title="æ‰¹é‡åˆ é™¤"></a>æ‰¹é‡åˆ é™¤</h3><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;el-button type&#x3D;&quot;danger&quot; plain size&#x3D;&quot;small&quot; @click&#x3D;&quot;batchDelete&quot;&gt;æ‰¹é‡åˆ é™¤&lt;&#x2F;el-button&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//æ‰¹é‡åˆ é™¤</span>
   <span class="token function">batchDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     <span class="token keyword">let</span> checkNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>menuTree<span class="token punctuation">.</span><span class="token function">getCheckedNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token comment">//  console.log("è¢«é€‰ä¸­çš„èŠ‚ç‚¹ï¼š",checkNodes);</span>

     <span class="token keyword">let</span> catIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> checkNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       catIds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>checkNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>catId<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span>

     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$confirm</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ç¡®å®šè¦åˆ é™¤?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">"æç¤º"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
       confirmButtonText<span class="token operator">:</span> <span class="token string">"ç¡®å®š"</span><span class="token punctuation">,</span>
       cancelButtonText<span class="token operator">:</span> <span class="token string">"å–æ¶ˆ"</span><span class="token punctuation">,</span>
       type<span class="token operator">:</span> <span class="token string">"warning"</span>
     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
           url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">"/product/category/delete"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>
           data<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornData</span><span class="token punctuation">(</span>catIds<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
         <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> data <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
             message<span class="token operator">:</span> <span class="token string">"èœå•æ‰¹é‡åˆ é™¤æˆåŠŸ"</span><span class="token punctuation">,</span>
             type<span class="token operator">:</span> <span class="token string">"success"</span>
           <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

           <span class="token comment">//é‡æ–°åˆ·æ–°é¡µé¢</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMeus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


       <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
         <span class="token comment">//å–æ¶ˆåˆ é™¤</span>
       <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="17-å“ç‰Œç®¡ç†èœå•"><a href="#17-å“ç‰Œç®¡ç†èœå•" class="headerlink" title="17. å“ç‰Œç®¡ç†èœå•"></a>17. å“ç‰Œç®¡ç†èœå•</h2><p><img src="/img/spring-cloud/image-20200428164054517.png" alt="image-20200428164054517"></p>
<p>ï¼ˆ2ï¼‰å°†â€œâ€é€†å‘å·¥ç¨‹å¾—åˆ°çš„resources\src\views\modules\productæ–‡ä»¶æ‹·è´åˆ°gulimall/renren-fast-vue/src/views/modules/productç›®å½•ä¸‹ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„ä¸¤ä¸ªæ–‡ä»¶</p>
<p>brand.vue  brand-add-or-update.vue</p>
<p>ä½†æ˜¯æ˜¾ç¤ºçš„é¡µé¢æ²¡æœ‰æ–°å¢å’Œåˆ é™¤åŠŸèƒ½ï¼Œè¿™æ˜¯å› ä¸ºæƒé™æ§åˆ¶çš„åŸå› ï¼Œ</p>
<p><img src="/img/spring-cloud/image-20200428170325515.png" alt="image-20200428170325515"></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;el-button v-if&#x3D;&quot;isAuth(&#39;product:brand:save&#39;)&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;addOrUpdateHandle()&quot;&gt;æ–°å¢&lt;&#x2F;el-button&gt;
&lt;el-button v-if&#x3D;&quot;isAuth(&#39;product:brand:delete&#39;)&quot; type&#x3D;&quot;danger&quot; @click&#x3D;&quot;deleteHandle()&quot; :disabled&#x3D;&quot;dataListSelections.length &lt;&#x3D; 0&quot;&gt;æ‰¹é‡åˆ é™¤&lt;&#x2F;el-button&gt;
      <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>æŸ¥çœ‹â€œisAuthâ€çš„å®šä¹‰ä½ç½®ï¼š</p>
<p><img src="/img/spring-cloud/image-20200428170437592.png" alt="image-20200428170437592"></p>
<p>å®ƒæ˜¯åœ¨â€œindex.jsâ€ä¸­å®šä¹‰ï¼Œç°åœ¨å°†å®ƒè®¾ç½®ä¸ºè¿”å›å€¼ä¸ºtrueï¼Œå³å¯æ˜¾ç¤ºæ·»åŠ å’Œåˆ é™¤åŠŸèƒ½ã€‚</p>
<p>å†æ¬¡åˆ·æ–°é¡µé¢èƒ½å¤Ÿçœ‹åˆ°ï¼ŒæŒ‰é’®å·²ç»å‡ºç°äº†ï¼š</p>
<p><img src="/img/spring-cloud/image-20200428170644511.png" alt="image-20200428170644511"></p>
<h3 id="æ·»åŠ â€œæ˜¾ç¤ºçŠ¶æ€æŒ‰é’®â€"><a href="#æ·»åŠ â€œæ˜¾ç¤ºçŠ¶æ€æŒ‰é’®â€" class="headerlink" title="æ·»åŠ â€œæ˜¾ç¤ºçŠ¶æ€æŒ‰é’®â€"></a>æ·»åŠ â€œæ˜¾ç¤ºçŠ¶æ€æŒ‰é’®â€</h3><p>brand.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template slot-scope&#x3D;&quot;scope&quot;&gt;
  &lt;el-switch
    v-model&#x3D;&quot;scope.row.showStatus&quot;
    active-color&#x3D;&quot;#13ce66&quot;
    inactive-color&#x3D;&quot;#ff4949&quot;
    @change&#x3D;&quot;updateBrandStatus(scope.row)&quot;
    :active-value &#x3D; &quot;1&quot;
    :inactive-value	&#x3D; &quot;0&quot;
  &gt;&lt;&#x2F;el-switch&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>brand-add-or-update.vue</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;el-form-item label&#x3D;&quot;æ˜¾ç¤ºçŠ¶æ€&quot; prop&#x3D;&quot;showStatus&quot;&gt;
   &lt;el-switch v-model&#x3D;&quot;dataForm.showStatus&quot; active-color&#x3D;&quot;#13ce66&quot; inactive-color&#x3D;&quot;#ff4949&quot;&gt;&lt;&#x2F;el-switch&gt;
&lt;&#x2F;el-form-item&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//æ›´æ–°å¼€å…³çš„çŠ¶æ€</span>
    <span class="token function">updateBrandStatus</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æœ€æ–°çŠ¶æ€"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> <span class="token punctuation">&#123;</span>brandId<span class="token punctuation">,</span>showStatus<span class="token punctuation">&#125;</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$http</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornUrl</span><span class="token punctuation">(</span><span class="token string">"/product/brand/update"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">adornData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>brandId<span class="token punctuation">,</span>showStatus<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> data <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
          message<span class="token operator">:</span> <span class="token string">"çŠ¶æ€æ›´æ–°æˆåŠŸ"</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">"success"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>







<h3 id="æ·»åŠ ä¸Šä¼ "><a href="#æ·»åŠ ä¸Šä¼ " class="headerlink" title="æ·»åŠ ä¸Šä¼ "></a>æ·»åŠ ä¸Šä¼ </h3><p>å’Œä¼ ç»Ÿçš„å•ä½“åº”ç”¨ä¸åŒï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©å°†æ•°æ®ä¸Šä¼ åˆ°åˆ†å¸ƒå¼æ–‡ä»¶æœåŠ¡å™¨ä¸Šã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©å°†å›¾ç‰‡æ”¾ç½®åˆ°é˜¿é‡Œäº‘ä¸Šï¼Œä½¿ç”¨å¯¹è±¡å­˜å‚¨ã€‚</p>
<p>é˜¿é‡Œäº‘ä¸Šä½¿ä½¿ç”¨å¯¹è±¡å­˜å‚¨æ–¹å¼ï¼š</p>
<p><img src="/img/spring-cloud/image-20200428182755992.png" alt="image-20200428182755992"></p>
<p>åˆ›å»ºBucket</p>
<p><img src="/img/spring-cloud/image-20200428183041570.png" alt="image-20200428183041570"></p>
<p>ä¸Šä¼ æ–‡ä»¶ï¼š</p>
<p><img src="/img/spring-cloud/image-20200428183213694.png" alt="image-20200428183213694"></p>
<p>ä¸Šä¼ æˆåŠŸåï¼Œå–å¾—å›¾ç‰‡çš„URL</p>
<p><img src="/img/spring-cloud/image-20200428183644020.png" alt="image-20200428183644020"></p>
<p>è¿™ç§æ–¹å¼æ˜¯æ‰‹åŠ¨ä¸Šä¼ å›¾ç‰‡ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­è®¾ç½®è‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡åˆ°é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨ã€‚</p>
<p>ä¸Šä¼ æ¨¡å‹ï¼š</p>
<p><img src="/img/spring-cloud/image-20200428184029655.png" alt="image-20200428184029655"></p>
<p>æŸ¥çœ‹é˜¿é‡Œäº‘å…³äºæ–‡ä»¶ä¸Šä¼ çš„å¸®åŠ©ï¼š <a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/32009.html?spm=a2c4g.11186623.6.768.549d59aaWuZMGJ">https://help.aliyun.com/document_detail/32009.html?spm=a2c4g.11186623.6.768.549d59aaWuZMGJ</a> </p>
<h4 id="1ï¼‰æ·»åŠ ä¾èµ–åŒ…"><a href="#1ï¼‰æ·»åŠ ä¾èµ–åŒ…" class="headerlink" title="1ï¼‰æ·»åŠ ä¾èµ–åŒ…"></a>1ï¼‰æ·»åŠ ä¾èµ–åŒ…</h4><p>åœ¨Mavené¡¹ç›®ä¸­åŠ å…¥ä¾èµ–é¡¹ï¼ˆæ¨èæ–¹å¼ï¼‰</p>
<p>åœ¨ Maven å·¥ç¨‹ä¸­ä½¿ç”¨ OSS Java SDKï¼Œåªéœ€åœ¨ pom.xml ä¸­åŠ å…¥ç›¸åº”ä¾èµ–å³å¯ã€‚ä»¥ 3.8.0 ç‰ˆæœ¬ä¸ºä¾‹ï¼Œåœ¨ <dependencies> å†…åŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="2ï¼‰ä¸Šä¼ æ–‡ä»¶æµ"><a href="#2ï¼‰ä¸Šä¼ æ–‡ä»¶æµ" class="headerlink" title="2ï¼‰ä¸Šä¼ æ–‡ä»¶æµ"></a>2ï¼‰ä¸Šä¼ æ–‡ä»¶æµ</h4><p>ä»¥ä¸‹ä»£ç ç”¨äºä¸Šä¼ æ–‡ä»¶æµï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// Endpointä»¥æ­å·ä¸ºä¾‹ï¼Œå…¶å®ƒRegionè¯·æŒ‰å®é™…æƒ…å†µå¡«å†™ã€‚</span>
<span class="token class-name">String</span> endpoint <span class="token operator">=</span> <span class="token string">"http://oss-cn-hangzhou.aliyuncs.com"</span><span class="token punctuation">;</span>
<span class="token comment">// äº‘è´¦å·AccessKeyæœ‰æ‰€æœ‰APIè®¿é—®æƒé™ï¼Œå»ºè®®éµå¾ªé˜¿é‡Œäº‘å®‰å…¨æœ€ä½³å®è·µï¼Œåˆ›å»ºå¹¶ä½¿ç”¨RAMå­è´¦å·è¿›è¡ŒAPIè®¿é—®æˆ–æ—¥å¸¸è¿ç»´ï¼Œè¯·ç™»å½• https://ram.console.aliyun.com åˆ›å»ºã€‚</span>
<span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">"&lt;yourAccessKeyId>"</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">"&lt;yourAccessKeySecret>"</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span>
<span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä¸Šä¼ æ–‡ä»¶æµã€‚</span>
<span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"&lt;yourlocalFile>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span><span class="token string">"&lt;yourBucketName>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;yourObjectName>"</span><span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å…³é—­OSSClientã€‚</span>
ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>endpointçš„å–å€¼ï¼š</p>
<p><img src="/img/spring-cloud/image-20200428190553350.png" alt="image-20200428190553350"></p>
<p>accessKeyIdå’ŒaccessKeySecretéœ€è¦åˆ›å»ºä¸€ä¸ªRAMè´¦å·ï¼š</p>
<p><img src="/img/spring-cloud/image-20200428190532924.png" alt="image-20200428190532924"></p>
<p>åˆ›å»ºç”¨æˆ·å®Œæ¯•åï¼Œä¼šå¾—åˆ°ä¸€ä¸ªâ€œAccessKey IDâ€å’Œâ€œAccessKeySecretâ€ï¼Œç„¶åå¤åˆ¶è¿™ä¸¤ä¸ªå€¼åˆ°ä»£ç çš„â€œAccessKey IDâ€å’Œâ€œAccessKeySecretâ€ã€‚</p>
<p>å¦å¤–è¿˜éœ€è¦æ·»åŠ è®¿é—®æ§åˆ¶æƒé™ï¼š</p>
<p><img src="/img/spring-cloud/image-20200428191518591.png" alt="image-20200428191518591"></p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// Endpointä»¥æ­å·ä¸ºä¾‹ï¼Œå…¶å®ƒRegionè¯·æŒ‰å®é™…æƒ…å†µå¡«å†™ã€‚</span>
        <span class="token class-name">String</span> endpoint <span class="token operator">=</span> <span class="token string">"oss-cn-shanghai.aliyuncs.com"</span><span class="token punctuation">;</span>
        <span class="token comment">// äº‘è´¦å·AccessKeyæœ‰æ‰€æœ‰APIè®¿é—®æƒé™ï¼Œå»ºè®®éµå¾ªé˜¿é‡Œäº‘å®‰å…¨æœ€ä½³å®è·µï¼Œåˆ›å»ºå¹¶ä½¿ç”¨RAMå­è´¦å·è¿›è¡ŒAPIè®¿é—®æˆ–æ—¥å¸¸è¿ç»´ï¼Œè¯·ç™»å½• https://ram.console.aliyun.com åˆ›å»ºã€‚</span>
        <span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">"LTAI4G4W1RA4JXz2QhoDwHhi"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">"R99lmDOJumF2x43ZBKT259Qpe70Oxw"</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span>
        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ä¸Šä¼ æ–‡ä»¶æµã€‚</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\Administrator\\Pictures\\timg.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span><span class="token string">"gulimall-images"</span><span class="token punctuation">,</span> <span class="token string">"time.jpg"</span><span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å…³é—­OSSClientã€‚</span>
        ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸Šä¼ æˆåŠŸ."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æ›´ä¸ºç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨SpringCloud Alibaba</p>
<p><img src="/img/spring-cloud/image-20200428195507730.png" alt="image-20200428195507730"></p>
<p>è¯¦ç»†ä½¿ç”¨æ–¹æ³•ï¼Œè§ï¼š <a target="_blank" rel="noopener" href="https://help.aliyun.com/knowledge_detail/108650.html">https://help.aliyun.com/knowledge_detail/108650.html</a>  </p>
<p>ï¼ˆ1ï¼‰æ·»åŠ ä¾èµ–</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alicloud-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.0.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ2ï¼‰åˆ›å»ºâ€œAccessKey IDâ€å’Œâ€œAccessKeySecretâ€</p>
<p>ï¼ˆ3ï¼‰é…ç½®keyï¼Œsecretå’Œendpointç›¸å…³ä¿¡æ¯</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">access-key</span><span class="token punctuation">:</span> LTAI4G4W1RA4JXz2QhoDwHhi
<span class="token key atrule">secret-key</span><span class="token punctuation">:</span> R99lmDOJumF2x43ZBKT259Qpe70Oxw
<span class="token key atrule">oss</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>shanghai.aliyuncs.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>ï¼ˆ4ï¼‰æ³¨å…¥OSSClientå¹¶è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ç­‰æ“ä½œ</p>
<p><img src="/img/spring-cloud/image-20200428224840535.png" alt="image-20200428224840535"></p>
<p>ä½†æ˜¯è¿™æ ·æ¥åšè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æœä»¥åçš„ä¸Šä¼ ä»»åŠ¡éƒ½äº¤ç»™gulimall-productæ¥å®Œæˆï¼Œæ˜¾ç„¶è€¦åˆåº¦é«˜ã€‚æœ€å¥½å•ç‹¬æ–°å»ºä¸€ä¸ªModuleæ¥å®Œæˆæ–‡ä»¶ä¸Šä¼ ä»»åŠ¡ã€‚</p>
<h3 id="å…¶ä»–æ–¹å¼"><a href="#å…¶ä»–æ–¹å¼" class="headerlink" title="å…¶ä»–æ–¹å¼"></a>å…¶ä»–æ–¹å¼</h3><h4 id="1ï¼‰æ–°å»ºgulimall-third-party"><a href="#1ï¼‰æ–°å»ºgulimall-third-party" class="headerlink" title="1ï¼‰æ–°å»ºgulimall-third-party"></a>1ï¼‰æ–°å»ºgulimall-third-party</h4><h4 id="2ï¼‰æ·»åŠ ä¾èµ–ï¼Œå°†åŸæ¥gulimall-commonä¸­çš„â€œspring-cloud-starter-alicloud-ossâ€ä¾èµ–ç§»åŠ¨åˆ°è¯¥é¡¹ç›®ä¸­"><a href="#2ï¼‰æ·»åŠ ä¾èµ–ï¼Œå°†åŸæ¥gulimall-commonä¸­çš„â€œspring-cloud-starter-alicloud-ossâ€ä¾èµ–ç§»åŠ¨åˆ°è¯¥é¡¹ç›®ä¸­" class="headerlink" title="2ï¼‰æ·»åŠ ä¾èµ–ï¼Œå°†åŸæ¥gulimall-commonä¸­çš„â€œspring-cloud-starter-alicloud-ossâ€ä¾èµ–ç§»åŠ¨åˆ°è¯¥é¡¹ç›®ä¸­"></a>2ï¼‰æ·»åŠ ä¾èµ–ï¼Œå°†åŸæ¥gulimall-commonä¸­çš„â€œspring-cloud-starter-alicloud-ossâ€ä¾èµ–ç§»åŠ¨åˆ°è¯¥é¡¹ç›®ä¸­</h4><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alicloud-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.0.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.bigdata.gulimall<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>gulimall-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p> å¦å¤–ä¹Ÿéœ€è¦åœ¨â€œpom.xmlâ€æ–‡ä»¶ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹çš„ä¾èµ–ç®¡ç†</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring-cloud.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="3ï¼‰åœ¨ä¸»å¯åŠ¨ç±»ä¸­å¼€å¯æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°"><a href="#3ï¼‰åœ¨ä¸»å¯åŠ¨ç±»ä¸­å¼€å¯æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°" class="headerlink" title="3ï¼‰åœ¨ä¸»å¯åŠ¨ç±»ä¸­å¼€å¯æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°"></a>3ï¼‰åœ¨ä¸»å¯åŠ¨ç±»ä¸­å¼€å¯æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableDiscoveryClient</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h4 id="4ï¼‰åœ¨nacosä¸­æ³¨å†Œ"><a href="#4ï¼‰åœ¨nacosä¸­æ³¨å†Œ" class="headerlink" title="4ï¼‰åœ¨nacosä¸­æ³¨å†Œ"></a>4ï¼‰åœ¨nacosä¸­æ³¨å†Œ</h4><p>ï¼ˆ1ï¼‰åˆ›å»ºå‘½åç©ºé—´â€œ gulimall-third-party â€</p>
<p><img src="/img/spring-cloud/image-20200429075831984.png" alt="image-20200429075831984"></p>
<p>ï¼ˆ2ï¼‰åœ¨â€œ gulimall-third-partyâ€å‘½åç©ºé—´ä¸­ï¼Œåˆ›å»ºâ€œ gulimall-third-party.ymlâ€æ–‡ä»¶</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">alicloud</span><span class="token punctuation">:</span>
      <span class="token key atrule">access-key</span><span class="token punctuation">:</span> LTAI4G4W1RA4JXz2QhoDwHhi
      <span class="token key atrule">secret-key</span><span class="token punctuation">:</span> R99lmDOJumF2x43ZBKT259Qpe70Oxw
      <span class="token key atrule">oss</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>shanghai.aliyuncs.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="5ï¼‰ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#5ï¼‰ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="5ï¼‰ç¼–å†™é…ç½®æ–‡ä»¶"></a>5ï¼‰ç¼–å†™é…ç½®æ–‡ä»¶</h4><p>application.yml</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">30000</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> gulimall<span class="token punctuation">-</span>third<span class="token punctuation">-</span>party
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.137.14<span class="token punctuation">:</span><span class="token number">8848</span>

<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">com.bigdata.gulimall.product</span><span class="token punctuation">:</span> debug
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>bootstrap.properties</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.cloud.nacos.config.name</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-third-party</span>
<span class="token attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">192.168.137.14:8848</span>
<span class="token attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token attr-value">f995d8ee-c53a-4d29-8316-a1ef54775e00</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].data-id</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-third-party.yml</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].group</span><span class="token punctuation">=</span><span class="token attr-value">DEFAULT_GROUP</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].refresh</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="6ï¼‰-ç¼–å†™æµ‹è¯•ç±»"><a href="#6ï¼‰-ç¼–å†™æµ‹è¯•ç±»" class="headerlink" title="6ï¼‰ ç¼–å†™æµ‹è¯•ç±»"></a>6ï¼‰ ç¼–å†™æµ‹è¯•ç±»</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bigdata<span class="token punctuation">.</span>gulimall<span class="token punctuation">.</span>thirdparty</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span>OSS<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSClient</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSClientBuilder</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileNotFoundException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">GulimallThirdPartyApplicationTests</span> <span class="token punctuation">&#123;</span>


    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">OSSClient</span> ossClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// Endpointä»¥æ­å·ä¸ºä¾‹ï¼Œå…¶å®ƒRegionè¯·æŒ‰å®é™…æƒ…å†µå¡«å†™ã€‚</span>
        <span class="token class-name">String</span> endpoint <span class="token operator">=</span> <span class="token string">"oss-cn-shanghai.aliyuncs.com"</span><span class="token punctuation">;</span>
        <span class="token comment">// äº‘è´¦å·AccessKeyæœ‰æ‰€æœ‰APIè®¿é—®æƒé™ï¼Œå»ºè®®éµå¾ªé˜¿é‡Œäº‘å®‰å…¨æœ€ä½³å®è·µï¼Œåˆ›å»ºå¹¶ä½¿ç”¨RAMå­è´¦å·è¿›è¡ŒAPIè®¿é—®æˆ–æ—¥å¸¸è¿ç»´ï¼Œè¯·ç™»å½• https://ram.console.aliyun.com åˆ›å»ºã€‚</span>
        <span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">"LTAI4G4W1RA4JXz2QhoDwHhi"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">"R99lmDOJumF2x43ZBKT259Qpe70Oxw"</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span>
        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token comment">//ä¸Šä¼ æ–‡ä»¶æµã€‚</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\Administrator\\Pictures\\timg.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span><span class="token string">"gulimall-images"</span><span class="token punctuation">,</span> <span class="token string">"time3.jpg"</span><span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å…³é—­OSSClientã€‚</span>
        ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸Šä¼ æˆåŠŸ."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p> <a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/31926.html?spm=a2c4g.11186623.6.1527.228d74b8V6IZuT">https://help.aliyun.com/document_detail/31926.html?spm=a2c4g.11186623.6.1527.228d74b8V6IZuT</a> </p>
<p><strong>èƒŒæ™¯</strong></p>
<p>é‡‡ç”¨JavaScriptå®¢æˆ·ç«¯ç›´æ¥ç­¾åï¼ˆå‚è§<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/31925.html#concept-frd-4gy-5db">JavaScriptå®¢æˆ·ç«¯ç­¾åç›´ä¼ </a>ï¼‰æ—¶ï¼ŒAccessKeyIDå’ŒAcessKeySecretä¼šæš´éœ²åœ¨å‰ç«¯é¡µé¢ï¼Œå› æ­¤å­˜åœ¨ä¸¥é‡çš„å®‰å…¨éšæ‚£ã€‚å› æ­¤ï¼ŒOSSæä¾›äº†æœåŠ¡ç«¯ç­¾ååç›´ä¼ çš„æ–¹æ¡ˆã€‚</p>
<p><strong>åŸç†ä»‹ç»</strong></p>
<p><a target="_blank" rel="noopener" href="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6875011751/p1472.png"><img src="http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/6875011751/p1472.png" alt="img"></a></p>
<p>æœåŠ¡ç«¯ç­¾ååç›´ä¼ çš„åŸç†å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç”¨æˆ·å‘é€ä¸Šä¼ Policyè¯·æ±‚åˆ°åº”ç”¨æœåŠ¡å™¨ã€‚</li>
<li>åº”ç”¨æœåŠ¡å™¨è¿”å›ä¸Šä¼ Policyå’Œç­¾åç»™ç”¨æˆ·ã€‚</li>
<li>ç”¨æˆ·ç›´æ¥ä¸Šä¼ æ•°æ®åˆ°OSSã€‚</li>
</ol>
<p>ç¼–å†™â€œcom.bigdata.gulimall.thirdparty.controller.OssControllerâ€ç±»ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bigdata<span class="token punctuation">.</span>gulimall<span class="token punctuation">.</span>thirdparty<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span>OSS<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>common<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">BinaryUtil</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">MatchMode</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">PolicyConditions</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedHashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OssController</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">OSS</span> ossClient<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Value</span> <span class="token punctuation">(</span><span class="token string">"$&#123;spring.cloud.alicloud.oss.endpoint&#125;"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> endpoint <span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.cloud.alicloud.oss.bucket&#125;"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> bucket <span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.cloud.alicloud.access-key&#125;"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> accessId <span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.cloud.alicloud.secret-key&#125;"</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> accessKey <span class="token punctuation">;</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/oss/policy"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">policy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

        <span class="token class-name">String</span> host <span class="token operator">=</span> <span class="token string">"https://"</span> <span class="token operator">+</span> bucket <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> endpoint<span class="token punctuation">;</span> <span class="token comment">// hostçš„æ ¼å¼ä¸º bucketname.endpoint</span>

        <span class="token class-name">String</span> format <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dir <span class="token operator">=</span> format<span class="token punctuation">;</span> <span class="token comment">// ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶æ—¶æŒ‡å®šçš„å‰ç¼€ã€‚</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> respMap<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">long</span> expireTime <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> expireEndTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> expireTime <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
            <span class="token class-name">Date</span> expiration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>expireEndTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">PolicyConditions</span> policyConds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PolicyConditions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            policyConds<span class="token punctuation">.</span><span class="token function">addConditionItem</span><span class="token punctuation">(</span><span class="token class-name">PolicyConditions</span><span class="token punctuation">.</span>COND_CONTENT_LENGTH_RANGE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1048576000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            policyConds<span class="token punctuation">.</span><span class="token function">addConditionItem</span><span class="token punctuation">(</span><span class="token class-name">MatchMode<span class="token punctuation">.</span>StartWith</span><span class="token punctuation">,</span> <span class="token class-name">PolicyConditions</span><span class="token punctuation">.</span>COND_KEY<span class="token punctuation">,</span> dir<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> postPolicy <span class="token operator">=</span> ossClient<span class="token punctuation">.</span><span class="token function">generatePostPolicy</span><span class="token punctuation">(</span>expiration<span class="token punctuation">,</span> policyConds<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> binaryData <span class="token operator">=</span> postPolicy<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> encodedPolicy <span class="token operator">=</span> <span class="token class-name">BinaryUtil</span><span class="token punctuation">.</span><span class="token function">toBase64String</span><span class="token punctuation">(</span>binaryData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> postSignature <span class="token operator">=</span> ossClient<span class="token punctuation">.</span><span class="token function">calculatePostSignature</span><span class="token punctuation">(</span>postPolicy<span class="token punctuation">)</span><span class="token punctuation">;</span>

            respMap<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"accessid"</span><span class="token punctuation">,</span> accessId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"policy"</span><span class="token punctuation">,</span> encodedPolicy<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"signature"</span><span class="token punctuation">,</span> postSignature<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"dir"</span><span class="token punctuation">,</span> dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"host"</span><span class="token punctuation">,</span> host<span class="token punctuation">)</span><span class="token punctuation">;</span>
            respMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"expire"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>expireEndTime <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// Assert.fail(e.getMessage());</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>
            ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> respMap<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æµ‹è¯•ï¼š <a target="_blank" rel="noopener" href="http://localhost:30000/oss/policy">http://localhost:30000/oss/policy</a> </p>
<pre class="line-numbers language-none"><code class="language-none">&#123;&quot;accessid&quot;:&quot;LTAI4G4W1RA4JXz2QhoDwHhi&quot;,&quot;policy&quot;:&quot;eyJleHBpcmF0aW9uIjoiMjAyMC0wNC0yOVQwMjo1ODowNy41NzhaIiwiY29uZGl0aW9ucyI6W1siY29udGVudC1sZW5ndGgtcmFuZ2UiLDAsMTA0ODU3NjAwMF0sWyJzdGFydHMtd2l0aCIsIiRrZXkiLCIyMDIwLTA0LTI5LyJdXX0&#x3D;&quot;,&quot;signature&quot;:&quot;s42iRxtxGFmHyG40StM3d9vOfFk&#x3D;&quot;,&quot;dir&quot;:&quot;2020-04-29&#x2F;&quot;,&quot;host&quot;:&quot;https:&#x2F;&#x2F;gulimall-images.oss-cn-shanghai.aliyuncs.com&quot;,&quot;expire&quot;:&quot;1588129087&quot;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>ä»¥ååœ¨ä¸Šä¼ æ–‡ä»¶æ—¶çš„è®¿é—®è·¯å¾„ä¸ºâ€œ <a target="_blank" rel="noopener" href="http://localhost:88/api/thirdparty/oss/policy%E2%80%9D%EF%BC%8C">http://localhost:88/api/thirdparty/oss/policyâ€ï¼Œ</a></p>
<p>åœ¨â€œgulimall-gatewayâ€ä¸­é…ç½®è·¯ç”±è§„åˆ™ï¼š</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> third_party_route
  <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//gulimall<span class="token punctuation">-</span>gateway
  <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> Path=/api/thirdparty/<span class="token important">**</span>
  <span class="token key atrule">filters</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> RewritePath=/api/thirdparty/(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">></span>/<span class="token punctuation">?</span>.<span class="token important">*)</span><span class="token punctuation">,</span>/$\<span class="token punctuation">&#123;</span>segment<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æµ‹è¯•æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸è·³è½¬ï¼š <a target="_blank" rel="noopener" href="http://localhost:88/api/thirdparty/oss/policy">http://localhost:88/api/thirdparty/oss/policy</a> </p>
<p><img src="/img/spring-cloud/image-20200429111408164.png" alt="image-20200429111408164"></p>
<h3 id="ä¸Šä¼ ç»„ä»¶"><a href="#ä¸Šä¼ ç»„ä»¶" class="headerlink" title="ä¸Šä¼ ç»„ä»¶"></a>ä¸Šä¼ ç»„ä»¶</h3><p>æ”¾ç½®é¡¹ç›®æä¾›çš„uploadæ–‡ä»¶å¤¹åˆ°componentsç›®å½•ä¸‹ï¼Œä¸€ä¸ªæ˜¯å•æ–‡ä»¶ä¸Šä¼ ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å¤šæ–‡ä»¶ä¸Šä¼ </p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">PS D:<span class="token punctuation">\</span>Project<span class="token punctuation">\</span>gulimall<span class="token punctuation">\</span>renren-fast-vue<span class="token punctuation">\</span>src<span class="token punctuation">\</span>components<span class="token punctuation">\</span>upload<span class="token operator">></span> <span class="token function">ls</span>


    ç›®å½•: D:<span class="token punctuation">\</span>Project<span class="token punctuation">\</span>gulimall<span class="token punctuation">\</span>renren-fast-vue<span class="token punctuation">\</span>src<span class="token punctuation">\</span>components<span class="token punctuation">\</span>upload


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----  <span class="token number">2020</span>/4/29 æ˜ŸæœŸä¸‰     <span class="token number">12</span>:0           <span class="token number">3122</span> multiUpload.vue
                                <span class="token number">2</span>
-a----  <span class="token number">2019</span>/11/11 æ˜ŸæœŸä¸€     <span class="token number">21</span>:            <span class="token number">343</span> policy.js
                               <span class="token number">20</span>
-a----  <span class="token number">2020</span>/4/29 æ˜ŸæœŸä¸‰     <span class="token number">12</span>:0           <span class="token number">3053</span> singleUpload.vue
                                <span class="token number">1</span>


PS D:<span class="token punctuation">\</span>Project<span class="token punctuation">\</span>gulimall<span class="token punctuation">\</span>renren-fast-vue<span class="token punctuation">\</span>src<span class="token punctuation">\</span>components<span class="token punctuation">\</span>upload<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ä¿®æ”¹è¿™ä¸¤ä¸ªæ–‡ä»¶çš„é…ç½®å</p>
<p>å¼€å§‹æ‰§è¡Œä¸Šä¼ ï¼Œä½†æ˜¯åœ¨ä¸Šä¼ è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†å¦‚ä¸‹çš„é—®é¢˜ï¼š</p>
<p><img src="/img/spring-cloud/image-20200429124629150.png" alt="image-20200429124629150"></p>
<pre class="line-numbers language-none"><code class="language-none">Access to XMLHttpRequest at &#39;http:&#x2F;&#x2F;gulimall-images.oss-cn-shanghai.aliyuncs.com&#x2F;&#39; from origin &#39;http:&#x2F;&#x2F;localhost:8001&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è¿™åˆæ˜¯ä¸€ä¸ªè·¨åŸŸçš„é—®é¢˜ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯åœ¨é˜¿é‡Œäº‘ä¸Šå¼€å¯è·¨åŸŸè®¿é—®ï¼š</p>
<p><img src="/img/spring-cloud/image-20200429124940091.png" alt="image-20200429124940091"></p>
<p>å†æ¬¡æ‰§è¡Œæ–‡ä»¶ä¸Šä¼ ã€‚</p>
<h2 id="18-JSR303æ ¡éªŒ"><a href="#18-JSR303æ ¡éªŒ" class="headerlink" title="18. JSR303æ ¡éªŒ"></a>18. JSR303æ ¡éªŒ</h2><h3 id="æ­¥éª¤1ï¼šä½¿ç”¨æ ¡éªŒæ³¨è§£"><a href="#æ­¥éª¤1ï¼šä½¿ç”¨æ ¡éªŒæ³¨è§£" class="headerlink" title="æ­¥éª¤1ï¼šä½¿ç”¨æ ¡éªŒæ³¨è§£"></a>æ­¥éª¤1ï¼šä½¿ç”¨æ ¡éªŒæ³¨è§£</h3><p>åœ¨Javaä¸­æä¾›äº†ä¸€ç³»åˆ—çš„æ ¡éªŒæ–¹å¼ï¼Œå®ƒè¿™äº›æ ¡éªŒæ–¹å¼åœ¨â€œjavax.validation.constraintsâ€åŒ…ä¸­ï¼Œæä¾›äº†å¦‚@Emailï¼Œ@NotNullç­‰æ³¨è§£ã€‚</p>
<p>åœ¨éç©ºå¤„ç†æ–¹å¼ä¸Šæä¾›äº†@NotNullï¼Œ@Blankå’Œ@</p>
<p>ï¼ˆ1ï¼‰@NotNull</p>
<p>The annotated element must not be null. Accepts any type.<br>æ³¨è§£å…ƒç´ ç¦æ­¢ä¸ºnullï¼Œèƒ½å¤Ÿæ¥æ”¶ä»»ä½•ç±»å‹</p>
<p>ï¼ˆ2ï¼‰@NotEmpty</p>
<p>the annotated element must not be null nor empty.</p>
<p>è¯¥æ³¨è§£ä¿®é¥°çš„å­—æ®µä¸èƒ½ä¸ºnullæˆ–â€â€</p>
<p>Supported types are:</p>
<p>æ”¯æŒä»¥ä¸‹å‡ ç§ç±»å‹</p>
<p>CharSequence (length of character sequence is evaluated)</p>
<p>å­—ç¬¦åºåˆ—ï¼ˆå­—ç¬¦åºåˆ—é•¿åº¦çš„è®¡ç®—ï¼‰</p>
<p>Collection (collection size is evaluated)<br>é›†åˆé•¿åº¦çš„è®¡ç®—</p>
<p>Map (map size is evaluated)<br>mapé•¿åº¦çš„è®¡ç®—</p>
<p>Array (array length is evaluated)<br>æ•°ç»„é•¿åº¦çš„è®¡ç®—</p>
<p>ï¼ˆ3ï¼‰@NotBlank</p>
<p>The annotated element must not be null and must contain at least one non-whitespace character. Accepts CharSequence.<br>è¯¥æ³¨è§£ä¸èƒ½ä¸ºnullï¼Œå¹¶ä¸”è‡³å°‘åŒ…å«ä¸€ä¸ªéç©ºç™½å­—ç¬¦ã€‚æ¥æ”¶å­—ç¬¦åºåˆ—ã€‚</p>
<h3 id="æ­¥éª¤2ï¼šåœ¨è¯·æ±‚æ–¹æ³•ç§ï¼Œä½¿ç”¨æ ¡éªŒæ³¨è§£-Validï¼Œå¼€å¯æ ¡éªŒï¼Œ"><a href="#æ­¥éª¤2ï¼šåœ¨è¯·æ±‚æ–¹æ³•ç§ï¼Œä½¿ç”¨æ ¡éªŒæ³¨è§£-Validï¼Œå¼€å¯æ ¡éªŒï¼Œ" class="headerlink" title="æ­¥éª¤2ï¼šåœ¨è¯·æ±‚æ–¹æ³•ç§ï¼Œä½¿ç”¨æ ¡éªŒæ³¨è§£@Validï¼Œå¼€å¯æ ¡éªŒï¼Œ"></a>æ­¥éª¤2ï¼šåœ¨è¯·æ±‚æ–¹æ³•ç§ï¼Œä½¿ç”¨æ ¡éªŒæ³¨è§£@Validï¼Œå¼€å¯æ ¡éªŒï¼Œ</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BrandEntity</span> brand<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
brandService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æµ‹è¯•ï¼š <a target="_blank" rel="noopener" href="http://localhost:88/api/product/brand/save">http://localhost:88/api/product/brand/save</a> </p>
<p>åœ¨postmanç§å‘é€ä¸Šé¢çš„è¯·æ±‚</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"timestamp"</span><span class="token operator">:</span> <span class="token string">"2020-04-29T09:20:46.383+0000"</span><span class="token punctuation">,</span>
    <span class="token property">"status"</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">"error"</span><span class="token operator">:</span> <span class="token string">"Bad Request"</span><span class="token punctuation">,</span>
    <span class="token property">"errors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"codes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"NotBlank.brandEntity.name"</span><span class="token punctuation">,</span>
                <span class="token string">"NotBlank.name"</span><span class="token punctuation">,</span>
                <span class="token string">"NotBlank.java.lang.String"</span><span class="token punctuation">,</span>
                <span class="token string">"NotBlank"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token property">"codes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token string">"brandEntity.name"</span><span class="token punctuation">,</span>
                        <span class="token string">"name"</span>
                    <span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                    <span class="token property">"defaultMessage"</span><span class="token operator">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span>
                    <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"name"</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"defaultMessage"</span><span class="token operator">:</span> <span class="token string">"ä¸èƒ½ä¸ºç©º"</span><span class="token punctuation">,</span>
            <span class="token property">"objectName"</span><span class="token operator">:</span> <span class="token string">"brandEntity"</span><span class="token punctuation">,</span>
            <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span>
            <span class="token property">"rejectedValue"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token property">"bindingFailure"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"NotBlank"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Validation failed for object='brandEntity'. Error count: 1"</span><span class="token punctuation">,</span>
    <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"/product/brand/save"</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>èƒ½å¤Ÿçœ‹åˆ°â€defaultMessageâ€: â€œä¸èƒ½ä¸ºç©ºâ€ï¼Œè¿™äº›é”™è¯¯æ¶ˆæ¯å®šä¹‰åœ¨â€œhibernate-validatorâ€çš„â€œ\org\hibernate\validator\ValidationMessages_zh_CN.propertiesâ€æ–‡ä»¶ä¸­ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­å®šä¹‰äº†å¾ˆå¤šçš„é”™è¯¯è§„åˆ™ï¼š</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">javax.validation.constraints.AssertFalse.message</span>     <span class="token punctuation">=</span> <span class="token attr-value">åªèƒ½ä¸ºfalse</span>
<span class="token attr-name">javax.validation.constraints.AssertTrue.message</span>      <span class="token punctuation">=</span> <span class="token attr-value">åªèƒ½ä¸ºtrue</span>
<span class="token attr-name">javax.validation.constraints.DecimalMax.message</span>      <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»å°äºæˆ–ç­‰äº&#123;value&#125;</span>
<span class="token attr-name">javax.validation.constraints.DecimalMin.message</span>      <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»å¤§äºæˆ–ç­‰äº&#123;value&#125;</span>
<span class="token attr-name">javax.validation.constraints.Digits.message</span>          <span class="token punctuation">=</span> <span class="token attr-value">æ•°å­—çš„å€¼è¶…å‡ºäº†å…è®¸èŒƒå›´(åªå…è®¸åœ¨&#123;integer&#125;ä½æ•´æ•°å’Œ&#123;fraction&#125;ä½å°æ•°èŒƒå›´å†…)</span>
<span class="token attr-name">javax.validation.constraints.Email.message</span>           <span class="token punctuation">=</span> <span class="token attr-value">ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ç”µå­é‚®ä»¶åœ°å€</span>
<span class="token attr-name">javax.validation.constraints.Future.message</span>          <span class="token punctuation">=</span> <span class="token attr-value">éœ€è¦æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¶é—´</span>
<span class="token attr-name">javax.validation.constraints.FutureOrPresent.message</span> <span class="token punctuation">=</span> <span class="token attr-value">éœ€è¦æ˜¯ä¸€ä¸ªå°†æ¥æˆ–ç°åœ¨çš„æ—¶é—´</span>
<span class="token attr-name">javax.validation.constraints.Max.message</span>             <span class="token punctuation">=</span> <span class="token attr-value">æœ€å¤§ä¸èƒ½è¶…è¿‡&#123;value&#125;</span>
<span class="token attr-name">javax.validation.constraints.Min.message</span>             <span class="token punctuation">=</span> <span class="token attr-value">æœ€å°ä¸èƒ½å°äº&#123;value&#125;</span>
<span class="token attr-name">javax.validation.constraints.Negative.message</span>        <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»æ˜¯è´Ÿæ•°</span>
<span class="token attr-name">javax.validation.constraints.NegativeOrZero.message</span>  <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»æ˜¯è´Ÿæ•°æˆ–é›¶</span>
<span class="token attr-name">javax.validation.constraints.NotBlank.message</span>        <span class="token punctuation">=</span> <span class="token attr-value">ä¸èƒ½ä¸ºç©º</span>
<span class="token attr-name">javax.validation.constraints.NotEmpty.message</span>        <span class="token punctuation">=</span> <span class="token attr-value">ä¸èƒ½ä¸ºç©º</span>
<span class="token attr-name">javax.validation.constraints.NotNull.message</span>         <span class="token punctuation">=</span> <span class="token attr-value">ä¸èƒ½ä¸ºnull</span>
<span class="token attr-name">javax.validation.constraints.Null.message</span>            <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»ä¸ºnull</span>
<span class="token attr-name">javax.validation.constraints.Past.message</span>            <span class="token punctuation">=</span> <span class="token attr-value">éœ€è¦æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¶é—´</span>
<span class="token attr-name">javax.validation.constraints.PastOrPresent.message</span>   <span class="token punctuation">=</span> <span class="token attr-value">éœ€è¦æ˜¯ä¸€ä¸ªè¿‡å»æˆ–ç°åœ¨çš„æ—¶é—´</span>
<span class="token attr-name">javax.validation.constraints.Pattern.message</span>         <span class="token punctuation">=</span> <span class="token attr-value">éœ€è¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼"&#123;regexp&#125;"</span>
<span class="token attr-name">javax.validation.constraints.Positive.message</span>        <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»æ˜¯æ­£æ•°</span>
<span class="token attr-name">javax.validation.constraints.PositiveOrZero.message</span>  <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»æ˜¯æ­£æ•°æˆ–é›¶</span>
<span class="token attr-name">javax.validation.constraints.Size.message</span>            <span class="token punctuation">=</span> <span class="token attr-value">ä¸ªæ•°å¿…é¡»åœ¨&#123;min&#125;å’Œ&#123;max&#125;ä¹‹é—´</span>

<span class="token attr-name">org.hibernate.validator.constraints.CreditCardNumber.message</span>        <span class="token punctuation">=</span> <span class="token attr-value">ä¸åˆæ³•çš„ä¿¡ç”¨å¡å·ç </span>
<span class="token attr-name">org.hibernate.validator.constraints.Currency.message</span>                <span class="token punctuation">=</span> <span class="token attr-value">ä¸åˆæ³•çš„è´§å¸ (å¿…é¡»æ˜¯&#123;value&#125;å…¶ä¸­ä¹‹ä¸€)</span>
<span class="token attr-name">org.hibernate.validator.constraints.EAN.message</span>                     <span class="token punctuation">=</span> <span class="token attr-value">ä¸åˆæ³•çš„&#123;type&#125;æ¡å½¢ç </span>
<span class="token attr-name">org.hibernate.validator.constraints.Email.message</span>                   <span class="token punctuation">=</span> <span class="token attr-value">ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ç”µå­é‚®ä»¶åœ°å€</span>
<span class="token attr-name">org.hibernate.validator.constraints.Length.message</span>                  <span class="token punctuation">=</span> <span class="token attr-value">é•¿åº¦éœ€è¦åœ¨&#123;min&#125;å’Œ&#123;max&#125;ä¹‹é—´</span>
<span class="token attr-name">org.hibernate.validator.constraints.CodePointLength.message</span>         <span class="token punctuation">=</span> <span class="token attr-value">é•¿åº¦éœ€è¦åœ¨&#123;min&#125;å’Œ&#123;max&#125;ä¹‹é—´</span>
<span class="token attr-name">org.hibernate.validator.constraints.LuhnCheck.message</span>               <span class="token punctuation">=</span> <span class="token attr-value">$&#123;validatedValue&#125;çš„æ ¡éªŒç ä¸åˆæ³•, Luhnæ¨¡10æ ¡éªŒå’Œä¸åŒ¹é…</span>
<span class="token attr-name">org.hibernate.validator.constraints.Mod10Check.message</span>              <span class="token punctuation">=</span> <span class="token attr-value">$&#123;validatedValue&#125;çš„æ ¡éªŒç ä¸åˆæ³•, æ¨¡10æ ¡éªŒå’Œä¸åŒ¹é…</span>
<span class="token attr-name">org.hibernate.validator.constraints.Mod11Check.message</span>              <span class="token punctuation">=</span> <span class="token attr-value">$&#123;validatedValue&#125;çš„æ ¡éªŒç ä¸åˆæ³•, æ¨¡11æ ¡éªŒå’Œä¸åŒ¹é…</span>
<span class="token attr-name">org.hibernate.validator.constraints.ModCheck.message</span>                <span class="token punctuation">=</span> <span class="token attr-value">$&#123;validatedValue&#125;çš„æ ¡éªŒç ä¸åˆæ³•, $&#123;modType&#125;æ ¡éªŒå’Œä¸åŒ¹é…</span>
<span class="token attr-name">org.hibernate.validator.constraints.NotBlank.message</span>                <span class="token punctuation">=</span> <span class="token attr-value">ä¸èƒ½ä¸ºç©º</span>
<span class="token attr-name">org.hibernate.validator.constraints.NotEmpty.message</span>                <span class="token punctuation">=</span> <span class="token attr-value">ä¸èƒ½ä¸ºç©º</span>
<span class="token attr-name">org.hibernate.validator.constraints.ParametersScriptAssert.message</span>  <span class="token punctuation">=</span> <span class="token attr-value">æ‰§è¡Œè„šæœ¬è¡¨è¾¾å¼"&#123;script&#125;"æ²¡æœ‰è¿”å›æœŸæœ›ç»“æœ</span>
<span class="token attr-name">org.hibernate.validator.constraints.Range.message</span>                   <span class="token punctuation">=</span> <span class="token attr-value">éœ€è¦åœ¨&#123;min&#125;å’Œ&#123;max&#125;ä¹‹é—´</span>
<span class="token attr-name">org.hibernate.validator.constraints.SafeHtml.message</span>                <span class="token punctuation">=</span> <span class="token attr-value">å¯èƒ½æœ‰ä¸å®‰å…¨çš„HTMLå†…å®¹</span>
<span class="token attr-name">org.hibernate.validator.constraints.ScriptAssert.message</span>            <span class="token punctuation">=</span> <span class="token attr-value">æ‰§è¡Œè„šæœ¬è¡¨è¾¾å¼"&#123;script&#125;"æ²¡æœ‰è¿”å›æœŸæœ›ç»“æœ</span>
<span class="token attr-name">org.hibernate.validator.constraints.URL.message</span>                     <span class="token punctuation">=</span> <span class="token attr-value">éœ€è¦æ˜¯ä¸€ä¸ªåˆæ³•çš„URL</span>

<span class="token attr-name">org.hibernate.validator.constraints.time.DurationMax.message</span>        <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»å°äº$&#123;inclusive == true ? 'æˆ–ç­‰äº' : ''&#125;$&#123;days == 0 ? '' : days += 'å¤©'&#125;$&#123;hours == 0 ? '' : hours += 'å°æ—¶'&#125;$&#123;minutes == 0 ? '' : minutes += 'åˆ†é’Ÿ'&#125;$&#123;seconds == 0 ? '' : seconds += 'ç§’'&#125;$&#123;millis == 0 ? '' : millis += 'æ¯«ç§’'&#125;$&#123;nanos == 0 ? '' : nanos += 'çº³ç§’'&#125;</span>
<span class="token attr-name">org.hibernate.validator.constraints.time.DurationMin.message</span>        <span class="token punctuation">=</span> <span class="token attr-value">å¿…é¡»å¤§äº$&#123;inclusive == true ? 'æˆ–ç­‰äº' : ''&#125;$&#123;days == 0 ? '' : days += 'å¤©'&#125;$&#123;hours == 0 ? '' : hours += 'å°æ—¶'&#125;$&#123;minutes == 0 ? '' : minutes += 'åˆ†é’Ÿ'&#125;$&#123;seconds == 0 ? '' : seconds += 'ç§’'&#125;$&#123;millis == 0 ? '' : millis += 'æ¯«ç§’'&#125;$&#123;nanos == 0 ? '' : nanos += 'çº³ç§’'&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æƒ³è¦è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ï¼Œå¯ä»¥è¦†ç›–é»˜è®¤çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼Œå¦‚@NotBlankçš„é»˜è®¤messageæ˜¯</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">NotBlank</span> <span class="token punctuation">&#123;</span>

	<span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"&#123;javax.validation.constraints.NotBlank.message&#125;"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>å¯ä»¥åœ¨æ·»åŠ æ³¨è§£çš„æ—¶å€™ï¼Œä¿®æ”¹messageï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"å“ç‰Œåå¿…é¡»éç©º"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>å½“å†æ¬¡å‘é€è¯·æ±‚æ—¶ï¼Œå¾—åˆ°çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼š</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"timestamp"</span><span class="token operator">:</span> <span class="token string">"2020-04-29T09:36:04.125+0000"</span><span class="token punctuation">,</span>
    <span class="token property">"status"</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">"error"</span><span class="token operator">:</span> <span class="token string">"Bad Request"</span><span class="token punctuation">,</span>
    <span class="token property">"errors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"codes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"NotBlank.brandEntity.name"</span><span class="token punctuation">,</span>
                <span class="token string">"NotBlank.name"</span><span class="token punctuation">,</span>
                <span class="token string">"NotBlank.java.lang.String"</span><span class="token punctuation">,</span>
                <span class="token string">"NotBlank"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token property">"codes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                        <span class="token string">"brandEntity.name"</span><span class="token punctuation">,</span>
                        <span class="token string">"name"</span>
                    <span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token property">"arguments"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                    <span class="token property">"defaultMessage"</span><span class="token operator">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span>
                    <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"name"</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"defaultMessage"</span><span class="token operator">:</span> <span class="token string">"å“ç‰Œåå¿…é¡»éç©º"</span><span class="token punctuation">,</span>
            <span class="token property">"objectName"</span><span class="token operator">:</span> <span class="token string">"brandEntity"</span><span class="token punctuation">,</span>
            <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span>
            <span class="token property">"rejectedValue"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token property">"bindingFailure"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">"code"</span><span class="token operator">:</span> <span class="token string">"NotBlank"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Validation failed for object='brandEntity'. Error count: 1"</span><span class="token punctuation">,</span>
    <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"/product/brand/save"</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ä½†æ˜¯è¿™ç§è¿”å›çš„é”™è¯¯ç»“æœå¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„ä¸šåŠ¡éœ€è¦ã€‚</p>
<h3 id="æ­¥éª¤3ï¼šç»™æ ¡éªŒçš„Beanåï¼Œç´§è·Ÿä¸€ä¸ªBindResultï¼Œå°±å¯ä»¥è·å–åˆ°æ ¡éªŒçš„ç»“æœã€‚æ‹¿åˆ°æ ¡éªŒçš„ç»“æœï¼Œå°±å¯ä»¥è‡ªå®šä¹‰çš„å°è£…ã€‚"><a href="#æ­¥éª¤3ï¼šç»™æ ¡éªŒçš„Beanåï¼Œç´§è·Ÿä¸€ä¸ªBindResultï¼Œå°±å¯ä»¥è·å–åˆ°æ ¡éªŒçš„ç»“æœã€‚æ‹¿åˆ°æ ¡éªŒçš„ç»“æœï¼Œå°±å¯ä»¥è‡ªå®šä¹‰çš„å°è£…ã€‚" class="headerlink" title="æ­¥éª¤3ï¼šç»™æ ¡éªŒçš„Beanåï¼Œç´§è·Ÿä¸€ä¸ªBindResultï¼Œå°±å¯ä»¥è·å–åˆ°æ ¡éªŒçš„ç»“æœã€‚æ‹¿åˆ°æ ¡éªŒçš„ç»“æœï¼Œå°±å¯ä»¥è‡ªå®šä¹‰çš„å°è£…ã€‚"></a>æ­¥éª¤3ï¼šç»™æ ¡éªŒçš„Beanåï¼Œç´§è·Ÿä¸€ä¸ªBindResultï¼Œå°±å¯ä»¥è·å–åˆ°æ ¡éªŒçš„ç»“æœã€‚æ‹¿åˆ°æ ¡éªŒçš„ç»“æœï¼Œå°±å¯ä»¥è‡ªå®šä¹‰çš„å°è£…ã€‚</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BrandEntity</span> brand<span class="token punctuation">,</span> <span class="token class-name">BindingResult</span> result<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span> result<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
           <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">></span></span> map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">//1.è·å–é”™è¯¯çš„æ ¡éªŒç»“æœ</span>
           result<span class="token punctuation">.</span><span class="token function">getFieldErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">&#123;</span>
               <span class="token comment">//è·å–å‘ç”Ÿé”™è¯¯æ—¶çš„message</span>
               <span class="token class-name">String</span> message <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token comment">//è·å–å‘ç”Ÿé”™è¯¯çš„å­—æ®µ</span>
               <span class="token class-name">String</span> field <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token string">"æäº¤çš„æ•°æ®ä¸åˆæ³•"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>

       <span class="token punctuation">&#125;</span>
	brandService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¿™ç§æ˜¯é’ˆå¯¹äºè¯¥è¯·æ±‚è®¾ç½®äº†ä¸€ä¸ªå†…å®¹æ ¡éªŒï¼Œå¦‚æœé’ˆå¯¹äºæ¯ä¸ªè¯·æ±‚éƒ½å•ç‹¬è¿›è¡Œé…ç½®ï¼Œæ˜¾ç„¶ä¸æ˜¯å¤ªåˆé€‚ï¼Œå®é™…ä¸Šå¯ä»¥ç»Ÿä¸€çš„å¯¹äºå¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚</p>
<h3 id="æ­¥éª¤4ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†"><a href="#æ­¥éª¤4ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†" class="headerlink" title="æ­¥éª¤4ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†"></a>æ­¥éª¤4ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†</h3><p>å¯ä»¥ä½¿ç”¨SpringMvcæ‰€æä¾›çš„@ControllerAdviceï¼Œé€šè¿‡â€œbasePackagesâ€èƒ½å¤Ÿè¯´æ˜å¤„ç†å“ªäº›è·¯å¾„ä¸‹çš„å¼‚å¸¸ã€‚</p>
<p>ï¼ˆ1ï¼‰æŠ½å–ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç±»</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bigdata<span class="token punctuation">.</span>gulimall<span class="token punctuation">.</span>product<span class="token punctuation">.</span>exception</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bigdata<span class="token punctuation">.</span>common<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">R</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">BindingResult</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span></span><span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBody</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestControllerAdvice</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * é›†ä¸­å¤„ç†æ‰€æœ‰å¼‚å¸¸
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestControllerAdvice</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">"com.bigdata.gulimall.product.controller"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GulimallExceptionAdvice</span> <span class="token punctuation">&#123;</span>


    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">handleValidException</span><span class="token punctuation">(</span><span class="token class-name">MethodArgumentNotValidException</span> exception<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">></span></span> map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BindingResult</span> bindingResult <span class="token operator">=</span> exception<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bindingResult<span class="token punctuation">.</span><span class="token function">getFieldErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>fieldError <span class="token operator">-></span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> message <span class="token operator">=</span> fieldError<span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> field <span class="token operator">=</span> fieldError<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"æ•°æ®æ ¡éªŒå‡ºç°é—®é¢˜&#123;&#125;,å¼‚å¸¸ç±»å‹&#123;&#125;"</span><span class="token punctuation">,</span>exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>exception<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token string">"æ•°æ®æ ¡éªŒå‡ºç°é—®é¢˜"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ2ï¼‰æµ‹è¯•ï¼š <a target="_blank" rel="noopener" href="http://localhost:88/api/product/brand/save">http://localhost:88/api/product/brand/save</a> </p>
<p><img src="/img/spring-cloud/image-20200429183334783.png" alt="image-20200429183334783"></p>
<p>ï¼ˆ3ï¼‰é»˜è®¤å¼‚å¸¸å¤„ç†</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">Throwable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">handleException</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
     log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"æœªçŸ¥å¼‚å¸¸&#123;&#125;,å¼‚å¸¸ç±»å‹&#123;&#125;"</span><span class="token punctuation">,</span>throwable<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>throwable<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">BizCodeEnum</span><span class="token punctuation">.</span>UNKNOW_EXEPTION<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">BizCodeEnum</span><span class="token punctuation">.</span>UNKNOW_EXEPTION<span class="token punctuation">.</span><span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ4ï¼‰é”™è¯¯çŠ¶æ€ç </p>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œé’ˆå¯¹äºé”™è¯¯çŠ¶æ€ç ï¼Œæ˜¯æˆ‘ä»¬è¿›è¡Œéšæ„å®šä¹‰çš„ï¼Œç„¶è€Œæ­£è§„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé”™è¯¯çŠ¶æ€ç æœ‰ç€ä¸¥æ ¼çš„å®šä¹‰è§„åˆ™ï¼Œå¦‚è¯¥åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬çš„é”™è¯¯çŠ¶æ€ç å®šä¹‰</p>
<p><img src="/img/spring-cloud/image-20200429183748249.png" alt="image-20200429183748249"></p>
<p>ä¸ºäº†å®šä¹‰è¿™äº›é”™è¯¯çŠ¶æ€ç ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬å®šä¹‰ä¸€ä¸ªå¸¸é‡ç±»ï¼Œç”¨æ¥å­˜å‚¨è¿™äº›é”™è¯¯çŠ¶æ€ç </p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bigdata<span class="token punctuation">.</span>common<span class="token punctuation">.</span>exception</span><span class="token punctuation">;</span>

<span class="token comment">/***
 * é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯å®šä¹‰ç±»
 * 1. é”™è¯¯ç å®šä¹‰è§„åˆ™ä¸º5ä¸ºæ•°å­—
 * 2. å‰ä¸¤ä½è¡¨ç¤ºä¸šåŠ¡åœºæ™¯ï¼Œæœ€åä¸‰ä½è¡¨ç¤ºé”™è¯¯ç ã€‚ä¾‹å¦‚ï¼š100001ã€‚10:é€šç”¨ 001:ç³»ç»ŸæœªçŸ¥å¼‚å¸¸
 * 3. ç»´æŠ¤é”™è¯¯ç åéœ€è¦ç»´æŠ¤é”™è¯¯æè¿°ï¼Œå°†ä»–ä»¬å®šä¹‰ä¸ºæšä¸¾å½¢å¼
 * é”™è¯¯ç åˆ—è¡¨ï¼š
 *  10: é€šç”¨
 *      001ï¼šå‚æ•°æ ¼å¼æ ¡éªŒ
 *  11: å•†å“
 *  12: è®¢å•
 *  13: è´­ç‰©è½¦
 *  14: ç‰©æµ
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">BizCodeEnum</span> <span class="token punctuation">&#123;</span>

    <span class="token function">UNKNOW_EXEPTION</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token string">"ç³»ç»ŸæœªçŸ¥å¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token function">VALID_EXCEPTION</span><span class="token punctuation">(</span> <span class="token number">10001</span><span class="token punctuation">,</span><span class="token string">"å‚æ•°æ ¼å¼æ ¡éªŒå¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> code<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>

    <span class="token class-name">BizCodeEnum</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> code<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ï¼ˆ5ï¼‰æµ‹è¯•ï¼š <a target="_blank" rel="noopener" href="http://localhost:88/api/product/brand/save">http://localhost:88/api/product/brand/save</a> </p>
<img src="images/image-20200429191830967.png" alt="image-20200429191830967" style="zoom:67%;" />

<h2 id="19-åˆ†ç»„æ ¡éªŒåŠŸèƒ½ï¼ˆå®Œæˆå¤šåœºæ™¯çš„å¤æ‚æ ¡éªŒï¼‰"><a href="#19-åˆ†ç»„æ ¡éªŒåŠŸèƒ½ï¼ˆå®Œæˆå¤šåœºæ™¯çš„å¤æ‚æ ¡éªŒï¼‰" class="headerlink" title="19. åˆ†ç»„æ ¡éªŒåŠŸèƒ½ï¼ˆå®Œæˆå¤šåœºæ™¯çš„å¤æ‚æ ¡éªŒï¼‰"></a>19. åˆ†ç»„æ ¡éªŒåŠŸèƒ½ï¼ˆå®Œæˆå¤šåœºæ™¯çš„å¤æ‚æ ¡éªŒï¼‰</h2><h3 id="1ã€ç»™æ ¡éªŒæ³¨è§£ï¼Œæ ‡æ³¨ä¸Šgroupsï¼ŒæŒ‡å®šä»€ä¹ˆæƒ…å†µä¸‹æ‰éœ€è¦è¿›è¡Œæ ¡éªŒ"><a href="#1ã€ç»™æ ¡éªŒæ³¨è§£ï¼Œæ ‡æ³¨ä¸Šgroupsï¼ŒæŒ‡å®šä»€ä¹ˆæƒ…å†µä¸‹æ‰éœ€è¦è¿›è¡Œæ ¡éªŒ" class="headerlink" title="1ã€ç»™æ ¡éªŒæ³¨è§£ï¼Œæ ‡æ³¨ä¸Šgroupsï¼ŒæŒ‡å®šä»€ä¹ˆæƒ…å†µä¸‹æ‰éœ€è¦è¿›è¡Œæ ¡éªŒ"></a>1ã€ç»™æ ¡éªŒæ³¨è§£ï¼Œæ ‡æ³¨ä¸Šgroupsï¼ŒæŒ‡å®šä»€ä¹ˆæƒ…å†µä¸‹æ‰éœ€è¦è¿›è¡Œæ ¡éªŒ</h3><p>å¦‚ï¼šæŒ‡å®šåœ¨æ›´æ–°å’Œæ·»åŠ çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è¿›è¡Œæ ¡éªŒ</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@NotEmpty</span>
<span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"å“ç‰Œåå¿…é¡»éç©º"</span><span class="token punctuation">,</span>groups <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token class-name">UpdateGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æŒ‡å®šåˆ†ç»„çš„æ ¡éªŒæ³¨è§£ï¼Œé»˜è®¤æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚æƒ³è¦èµ·ä½œç”¨å°±å¿…é¡»è¦åŠ groupsã€‚</p>
<h3 id="2ã€ä¸šåŠ¡æ–¹æ³•å‚æ•°ä¸Šä½¿ç”¨-Validatedæ³¨è§£"><a href="#2ã€ä¸šåŠ¡æ–¹æ³•å‚æ•°ä¸Šä½¿ç”¨-Validatedæ³¨è§£" class="headerlink" title="2ã€ä¸šåŠ¡æ–¹æ³•å‚æ•°ä¸Šä½¿ç”¨@Validatedæ³¨è§£"></a>2ã€ä¸šåŠ¡æ–¹æ³•å‚æ•°ä¸Šä½¿ç”¨@Validatedæ³¨è§£</h3><p>@Validatedçš„valueæ–¹æ³•ï¼š</p>
<p>Specify one or more validation groups to apply to the validation step kicked off by this annotation.<br> æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªéªŒè¯ç»„ä»¥åº”ç”¨äºæ­¤æ³¨é‡Šå¯åŠ¨çš„éªŒè¯æ­¥éª¤ã€‚ </p>
<p>JSR-303 defines validation groups as custom annotations which an application declares for the sole purpose of using<br>them as type-safe group arguments, as implemented in SpringValidatorAdapter.</p>
<p> JSR-303 å°†éªŒè¯ç»„å®šä¹‰ä¸ºè‡ªå®šä¹‰æ³¨é‡Šï¼Œåº”ç”¨ç¨‹åºå£°æ˜çš„å”¯ä¸€ç›®çš„æ˜¯å°†å®ƒä»¬ç”¨ä½œç±»å‹å®‰å…¨ç»„å‚æ•°ï¼Œå¦‚ SpringValidatorAdapter ä¸­å®ç°çš„é‚£æ ·ã€‚ </p>
<p>Other SmartValidator implementations may support class arguments in other ways as well.</p>
<p> å…¶ä»–SmartValidator å®ç°ä¹Ÿå¯ä»¥ä»¥å…¶ä»–æ–¹å¼æ”¯æŒç±»å‚æ•°ã€‚ </p>
<h3 id="3ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åˆ†ç»„æ ¡éªŒæƒ…å†µä¸‹ï¼Œæ²¡æœ‰æŒ‡å®šæŒ‡å®šåˆ†ç»„çš„æ ¡éªŒæ³¨è§£ï¼Œå°†ä¸ä¼šç”Ÿæ•ˆï¼Œå®ƒåªä¼šåœ¨ä¸åˆ†ç»„çš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚"><a href="#3ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åˆ†ç»„æ ¡éªŒæƒ…å†µä¸‹ï¼Œæ²¡æœ‰æŒ‡å®šæŒ‡å®šåˆ†ç»„çš„æ ¡éªŒæ³¨è§£ï¼Œå°†ä¸ä¼šç”Ÿæ•ˆï¼Œå®ƒåªä¼šåœ¨ä¸åˆ†ç»„çš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚" class="headerlink" title="3ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åˆ†ç»„æ ¡éªŒæƒ…å†µä¸‹ï¼Œæ²¡æœ‰æŒ‡å®šæŒ‡å®šåˆ†ç»„çš„æ ¡éªŒæ³¨è§£ï¼Œå°†ä¸ä¼šç”Ÿæ•ˆï¼Œå®ƒåªä¼šåœ¨ä¸åˆ†ç»„çš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚"></a>3ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åˆ†ç»„æ ¡éªŒæƒ…å†µä¸‹ï¼Œæ²¡æœ‰æŒ‡å®šæŒ‡å®šåˆ†ç»„çš„æ ¡éªŒæ³¨è§£ï¼Œå°†ä¸ä¼šç”Ÿæ•ˆï¼Œå®ƒåªä¼šåœ¨ä¸åˆ†ç»„çš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚</h3><h2 id="20-è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½"><a href="#20-è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½" class="headerlink" title="20. è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½"></a>20. è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½</h2><h3 id="1ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£"><a href="#1ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£" class="headerlink" title="1ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£"></a>1ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token class-name">ListValueConstraintValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> METHOD<span class="token punctuation">,</span> FIELD<span class="token punctuation">,</span> ANNOTATION_TYPE<span class="token punctuation">,</span> CONSTRUCTOR<span class="token punctuation">,</span> PARAMETER<span class="token punctuation">,</span> TYPE_USE <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RUNTIME<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ListValue</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"&#123;com.bigdata.common.valid.ListValue.message&#125;"</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">groups</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Payload</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="2ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒå™¨"><a href="#2ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒå™¨" class="headerlink" title="2ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒå™¨"></a>2ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒå™¨</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListValueConstraintValidator</span> <span class="token keyword">implements</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ListValue</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> set<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token class-name">ListValue</span> constraintAnnotation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value <span class="token operator">=</span> constraintAnnotation<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>


        <span class="token keyword">return</span>  set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="3ã€å…³è”è‡ªå®šä¹‰çš„æ ¡éªŒå™¨å’Œè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£"><a href="#3ã€å…³è”è‡ªå®šä¹‰çš„æ ¡éªŒå™¨å’Œè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£" class="headerlink" title="3ã€å…³è”è‡ªå®šä¹‰çš„æ ¡éªŒå™¨å’Œè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£"></a>3ã€å…³è”è‡ªå®šä¹‰çš„æ ¡éªŒå™¨å’Œè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token class-name">ListValueConstraintValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="4ã€ä½¿ç”¨å®ä¾‹"><a href="#4ã€ä½¿ç”¨å®ä¾‹" class="headerlink" title="4ã€ä½¿ç”¨å®ä¾‹"></a>4ã€ä½¿ç”¨å®ä¾‹</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
 * æ˜¾ç¤ºçŠ¶æ€[0-ä¸æ˜¾ç¤ºï¼›1-æ˜¾ç¤º]
 */</span>
<span class="token annotation punctuation">@ListValue</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>groups <span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token class-name">AddGroup</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> showStatus<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="21-å•†å“SPUå’ŒSKUç®¡ç†"><a href="#21-å•†å“SPUå’ŒSKUç®¡ç†" class="headerlink" title="21. å•†å“SPUå’ŒSKUç®¡ç†"></a>21. å•†å“SPUå’ŒSKUç®¡ç†</h2><p>é‡æ–°æ‰§è¡Œâ€œsys_menus.sqlâ€</p>
<h2 id="22-ç‚¹å‡»å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶"><a href="#22-ç‚¹å‡»å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶" class="headerlink" title="22. ç‚¹å‡»å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶"></a>22. ç‚¹å‡»å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶</h2><p>ç°åœ¨æƒ³è¦å®ç°ç‚¹å‡»èœå•çš„å·¦è¾¹ï¼Œèƒ½å¤Ÿå®ç°åœ¨å³è¾¹å±•ç¤ºæ•°æ®</p>
<p><img src="/img/spring-cloud/image-20200430215649355.png" alt="image-20200430215649355"></p>
<p>çˆ¶å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼š</p>
<p>1ï¼‰å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œäº‹ä»¶æœºåˆ¶ï¼›</p>
<p>åœ¨categoryä¸­ç»‘å®šnode-clickäº‹ä»¶ï¼Œ</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;el-tree :data&#x3D;&quot;menus&quot; :props&#x3D;&quot;defaultProps&quot; node-key&#x3D;&quot;catId&quot; ref&#x3D;&quot;menuTree&quot; @node-click&#x3D;&quot;nodeClick&quot;	&gt;&lt;&#x2F;el-tree&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>2ï¼‰å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶å‘é€ä¸€ä¸ªäº‹ä»¶ï¼Œæºå¸¦ä¸Šæ•°æ®ï¼›</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">nodeClick</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span>Node<span class="token punctuation">,</span>component</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å­ç»„ä»¶"</span><span class="token punctuation">,</span>data<span class="token punctuation">,</span>Node<span class="token punctuation">,</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"tree-node-click"</span><span class="token punctuation">,</span>data<span class="token punctuation">,</span>Node<span class="token punctuation">,</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>this.$emit(äº‹ä»¶å,â€æºå¸¦çš„æ•°æ®â€);</p>
<p>3ï¼‰çˆ¶ç»„ä»¶ä¸­çš„è·å–å‘é€çš„äº‹ä»¶</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;category @tree-node-click&#x3D;&quot;treeNodeClick&quot;&gt;&lt;&#x2F;category&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//è·å–å‘é€çš„äº‹ä»¶æ•°æ®</span>
<span class="token function">treeNodeClick</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span>Node<span class="token punctuation">,</span>component</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"attgroupæ„ŸçŸ¥åˆ°çš„categoryçš„èŠ‚ç‚¹è¢«ç‚¹å‡»"</span><span class="token punctuation">,</span>data<span class="token punctuation">,</span>Node<span class="token punctuation">,</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"åˆšæ‰è¢«ç‚¹å‡»çš„èœå•ID"</span><span class="token punctuation">,</span>data<span class="token punctuation">.</span>catId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="23-è§„æ ¼å‚æ•°æ–°å¢ä¸VO"><a href="#23-è§„æ ¼å‚æ•°æ–°å¢ä¸VO" class="headerlink" title="23. è§„æ ¼å‚æ•°æ–°å¢ä¸VO"></a>23. è§„æ ¼å‚æ•°æ–°å¢ä¸VO</h2><p>è§„æ ¼å‚æ•°æ–°å¢æ—¶ï¼Œè¯·æ±‚çš„URLï¼šRequest URL: </p>
<p><a target="_blank" rel="noopener" href="http://localhost:88/api/product/attr/base/list/0?t=1588731762158&amp;page=1&amp;limit=10&amp;key=">http://localhost:88/api/product/attr/base/list/0?t=1588731762158&amp;page=1&amp;limit=10&amp;key=</a></p>
<p>å½“æœ‰æ–°å¢å­—æ®µæ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šåœ¨entityå®ä½“ç±»ä¸­æ–°å»ºä¸€ä¸ªå­—æ®µï¼Œå¹¶æ ‡æ³¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨è¯¥å­—æ®µï¼Œç„¶è€Œè¿™ç§æ–¹å¼å¹¶ä¸è§„èŒƒ</p>
<p><img src="/img/spring-cloud/1588732021702.png" alt="1588732021702"></p>
<p>æ¯”è¾ƒè§„èŒƒçš„åšæ³•æ˜¯ï¼Œæ–°å»ºä¸€ä¸ªvoæ–‡ä»¶å¤¹ï¼Œå°†æ¯ç§ä¸åŒçš„å¯¹è±¡ï¼ŒæŒ‰ç…§å®ƒçš„åŠŸèƒ½è¿›è¡Œäº†åˆ’åˆ†ã€‚åœ¨javaä¸­ï¼Œæ¶‰åŠåˆ°äº†è¿™å‡ ç§ç±»å‹</p>
<p><img src="/img/spring-cloud/1588732152646.png" alt="1588732152646"></p>
<p>Request URL: <a target="_blank" rel="noopener" href="http://localhost:88/api/product/attr/save%EF%BC%8C%E7%8E%B0%E5%9C%A8%E7%9A%84%E6%83%85%E5%86%B5%E6%98%AF%EF%BC%8C%E5%AE%83%E5%9C%A8%E4%BF%9D%E5%AD%98%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%8F%AA%E6%98%AF%E4%BF%9D%E5%AD%98%E4%BA%86attr%EF%BC%8C%E5%B9%B6%E6%B2%A1%E6%9C%89%E4%BF%9D%E5%AD%98attrgroup%EF%BC%8C%E4%B8%BA%E4%BA%86%E8%A7%A3%E5%86%B3%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98%EF%BC%8C%E6%88%91%E4%BB%AC%E6%96%B0%E5%BB%BA%E4%BA%86%E4%B8%80%E4%B8%AAvo/AttrVo%EF%BC%8C%E5%9C%A8%E5%8E%9FAttrEntity%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%A2%9E%E5%8A%A0%E4%BA%86attrGroupId%E5%AD%97%E6%AE%B5%EF%BC%8C%E4%BD%BF%E5%BE%97%E4%BF%9D%E5%AD%98%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E4%B9%9F%E4%BF%9D%E5%AD%98%E4%BA%86%E5%AE%83%E4%BB%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB%E3%80%82">http://localhost:88/api/product/attr/saveï¼Œç°åœ¨çš„æƒ…å†µæ˜¯ï¼Œå®ƒåœ¨ä¿å­˜çš„æ—¶å€™ï¼Œåªæ˜¯ä¿å­˜äº†attrï¼Œå¹¶æ²¡æœ‰ä¿å­˜attrgroupï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªvo/AttrVoï¼Œåœ¨åŸAttrEntityåŸºç¡€ä¸Šå¢åŠ äº†attrGroupIdå­—æ®µï¼Œä½¿å¾—ä¿å­˜æ–°å¢æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿä¿å­˜äº†å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</a></p>
<p>é€šè¿‡â€ BeanUtils.copyProperties(attr,attrEntity);â€èƒ½å¤Ÿå®ç°åœ¨ä¸¤ä¸ªBeanä¹‹é—´æ‹·è´æ•°æ®ï¼Œä½†æ˜¯ä¸¤ä¸ªBeançš„å­—æ®µè¦ç›¸åŒ</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveAttr</span><span class="token punctuation">(</span><span class="token class-name">AttrVo</span> attr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     <span class="token class-name">AttrEntity</span> attrEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AttrEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span>attrEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>attrEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é—®é¢˜ï¼šç°åœ¨æœ‰ä¸¤ä¸ªæŸ¥è¯¢ï¼Œä¸€ä¸ªæ˜¯æŸ¥è¯¢éƒ¨åˆ†ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æŸ¥è¯¢å…¨éƒ¨ï¼Œä½†æ˜¯åˆå¿…é¡»è¿™æ ·æ¥åšå—ï¼Ÿè¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œä½†æ˜¯å¯ä»¥åœ¨åå°è¿›è¡Œè®¾è®¡ï¼Œä¸¤ç§æŸ¥è¯¢æ˜¯æ ¹æ®catIdæ˜¯å¦ä¸ºé›¶è¿›è¡ŒåŒºåˆ†çš„ã€‚</p>
<h2 id="24-æŸ¥è¯¢åˆ†ç»„å…³è”å±æ€§å’Œåˆ é™¤å…³è”"><a href="#24-æŸ¥è¯¢åˆ†ç»„å…³è”å±æ€§å’Œåˆ é™¤å…³è”" class="headerlink" title="24. æŸ¥è¯¢åˆ†ç»„å…³è”å±æ€§å’Œåˆ é™¤å…³è”"></a>24. æŸ¥è¯¢åˆ†ç»„å…³è”å±æ€§å’Œåˆ é™¤å…³è”</h2><p>è·å–å±æ€§åˆ†ç»„çš„å…³è”çš„æ‰€æœ‰å±æ€§</p>
<p>APIï¼š<a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/LnjzZHPj">https://easydoc.xyz/doc/75716633/ZUqEdvA4/LnjzZHPj</a></p>
<p>å‘é€è¯·æ±‚ï¼š/product/attrgroup/{attrgroupId}/attr/relation</p>
<p>è·å–å½“å‰å±æ€§åˆ†ç»„æ‰€å…³è”çš„å±æ€§</p>
<p><img src="/img/spring-cloud/1588766303205.png" alt="1588766303205"></p>
<p>å¦‚ä½•æŸ¥æ‰¾ï¼šæ—¢ç„¶ç»™å‡ºäº†attr_group_idï¼Œé‚£ä¹ˆåˆ°ä¸­é—´è¡¨ä¸­æŸ¥è¯¢å‡ºæ¥æ‰€å…³è”çš„attr_idï¼Œç„¶åå¾—åˆ°æœ€ç»ˆçš„æ‰€æœ‰å±æ€§å³å¯ã€‚</p>
<p>å¯èƒ½å‡ºç°nullå€¼çš„é—®é¢˜</p>
<h2 id="25-æŸ¥è¯¢åˆ†ç»„æœªå…³è”çš„å±æ€§"><a href="#25-æŸ¥è¯¢åˆ†ç»„æœªå…³è”çš„å±æ€§" class="headerlink" title="25. æŸ¥è¯¢åˆ†ç»„æœªå…³è”çš„å±æ€§"></a>25. æŸ¥è¯¢åˆ†ç»„æœªå…³è”çš„å±æ€§</h2><p>/product/attrgroup/{attrgroupId}/noattr/relation</p>
<p>APIï¼š<a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/d3EezLdO">https://easydoc.xyz/doc/75716633/ZUqEdvA4/d3EezLdO</a></p>
<p>è·å–å±æ€§åˆ†ç»„é‡Œé¢è¿˜æ²¡æœ‰å…³è”çš„æœ¬åˆ†ç±»é‡Œé¢çš„å…¶ä»–åŸºæœ¬å±æ€§ï¼Œæ–¹ä¾¿æ·»åŠ æ–°çš„å…³è”</p>
<p>Request URL: <a target="_blank" rel="noopener" href="http://localhost:88/api/product/attrgroup/1/noattr/relation?t=1588780783441&amp;page=1&amp;limit=10&amp;key=">http://localhost:88/api/product/attrgroup/1/noattr/relation?t=1588780783441&amp;page=1&amp;limit=10&amp;key=</a></p>
<p><img src="/img/spring-cloud/1588780868214.png" alt="1588780868214"></p>
<p>å±æ€§åˆ†ç»„ï¼Œå¯¹åº”äºâ€œpms_attr_groupâ€è¡¨ï¼Œæ¯ä¸ªåˆ†ç»„ä¸‹ï¼Œéœ€è¦æŸ¥çœ‹åˆ°å…³è”äº†å“ªäº›å±æ€§ä¿¡æ¯ï¼Œé”€å”®å±æ€§ä¸éœ€è¦å’Œåˆ†ç»„è¿›è¡Œå…³è”ï¼Œä½†æ˜¯è§„æ ¼å‚æ•°è¦å’Œå±æ€§åˆ†ç»„è¿›è¡Œå…³è”ã€‚</p>
<p>è§„æ ¼å‚æ•°ï¼šå¯¹åº”äº<code>pms_attr</code>è¡¨ï¼Œattr_type=1ï¼Œéœ€è¦æ˜¾ç¤ºåˆ†ç»„ä¿¡æ¯</p>
<p>é”€å”®å±æ€§ï¼šå¯¹åº”äºpms_attr`è¡¨ï¼Œattr_type=0ï¼Œä¸éœ€è¦æ˜¾ç¤ºåˆ†ç»„ä¿¡æ¯</p>
<p>åˆ†ç»„IDä¸º9çš„åˆ†ç»„ï¼šRequest URL: <a target="_blank" rel="noopener" href="http://localhost:88/api/product/attrgroup/9/noattr/relation?t=1588822258669&amp;page=1&amp;limit=10&amp;key=">http://localhost:88/api/product/attrgroup/9/noattr/relation?t=1588822258669&amp;page=1&amp;limit=10&amp;key=</a></p>
<p>å¯¹åº”çš„æ•°æ®åº“å­—æ®µ</p>
<p>attr_group_id  attr_group_name    sort  descript                icon    catelog_id  </p>
<hr>
<pre><code>        9  ä¸»ä½“                    1  å‹å· å¹³å°                   wu               454
       10  æ˜¾å¡                    1  æ˜¾å­˜å®¹é‡                    wu               454
       11  è¾“å…¥è®¾å¤‡                  1  é¼ æ ‡ é”®ç›˜                   wu               454
       12  ä¸»æ¿                    1  æ˜¾å¡ç±»å‹ èŠ¯ç‰‡ç»„                wu               454
       13  è§„æ ¼                    1  å°ºå¯¸                      wu               454
</code></pre>
<p>æŸ¥è¯¢attrgroupId=9çš„å±æ€§åˆ†ç»„ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">AttrGroupEntity</span> attrGroupEntity <span class="token operator">=</span> attrGroupDao<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>attrgroupId<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è·å–åˆ°åˆ†ç±»ä¿¡æ¯ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">Long catelogId &#x3D; attrGroupEntity.getCatelogId();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>ç›®æ ‡ï¼šè·å–å±æ€§åˆ†ç»„æ²¡æœ‰å…³è”çš„å…¶ä»–å±æ€§</p>
<p>ä¹Ÿå°±æ˜¯è·å–attrgroupId=9çš„å±æ€§åˆ†ç»„ä¸­ï¼Œå…³è”çš„åˆ†ç±»catelog_id =454 ï¼ˆå°å¼æœºï¼‰ï¼Œå…¶ä»–åŸºæœ¬å±æ€§</p>
<p>åœ¨è¯¥å±æ€§åˆ†ç»„ä¸­ï¼Œç°åœ¨å·²ç»å…³è”çš„å±æ€§ï¼š</p>
<p><img src="/img/spring-cloud/1588822997675.png" alt="1588822997675"></p>
<p>æœ¬åˆ†ç±»ä¸‹ï¼Œå­˜åœ¨å“ªäº›åŸºæœ¬å±æ€§ï¼Ÿ</p>
<p>æ²¡æœ‰å…³è”çš„å…¶ä»–å±æ€§</p>
<p>å·²ç»å…³è”çš„å±æ€§ï¼Œè¿™äº›å±æ€§æ˜¯å¦‚ä½•å…³è”ä¸Šçš„ï¼Ÿ</p>
<p>ç­”ï¼šåœ¨åˆ›å»ºè§„æ ¼å‚æ•°çš„æ—¶å€™ï¼Œå·²ç»è®¾ç½®äº†éœ€è¦å…³è”å“ªäº›å±æ€§åˆ†ç»„ã€‚</p>
<p>æƒ³è¦çŸ¥é“è¿˜æ²¡æœ‰å…³è”å“ªäº›ï¼Œå…ˆæŸ¥çœ‹å…³è”äº†å“ªäº›ï¼Œå¦‚ä½•æ’é™¤æ‰è¿™äº›å°±æ˜¯æœªå…³è”çš„</p>
<p>åœ¨ä¸­é—´è¡¨ä¸­æ˜¾ç¤ºäº†å±æ€§å’Œå±æ€§åˆ†ç»„ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œåœ¨å±æ€§è¡¨ä¸­æ˜¾ç¤ºäº†æ‰€æœ‰çš„å±æ€§ï¼Œ</p>
<p>å…ˆæŸ¥è¯¢ä¸­é—´è¡¨ï¼Œå¾—åˆ°æ‰€æœ‰å·²ç»å…³è”çš„å±æ€§çš„idï¼Œç„¶åå†æ¬¡æŸ¥è¯¢å±æ€§è¡¨ï¼Œæ’é™¤æ‰å·²ç»å»ºç«‹å…³è”çš„å±æ€§IDï¼Œå°†å‰©ä¸‹çš„å±æ€§IDå’Œå±æ€§å»ºç«‹èµ·å…³è”å…³ç³»</p>
<h2 id="26-æ·»åŠ å±æ€§å’Œåˆ†ç»„çš„å…³è”å…³ç³»"><a href="#26-æ·»åŠ å±æ€§å’Œåˆ†ç»„çš„å…³è”å…³ç³»" class="headerlink" title="26. æ·»åŠ å±æ€§å’Œåˆ†ç»„çš„å…³è”å…³ç³»"></a>26. æ·»åŠ å±æ€§å’Œåˆ†ç»„çš„å…³è”å…³ç³»</h2><p>è¯·æ±‚ç±»å‹ï¼šRequest URL: <a target="_blank" rel="noopener" href="http://localhost:88/api/product/attrgroup/attr/relation">http://localhost:88/api/product/attrgroup/attr/relation</a></p>
<p>è¯·æ±‚æ–¹å¼ï¼šPOST</p>
<p>è¯·æ±‚æ•°æ®ï¼š[{â€œattrIdâ€:10,â€attrGroupIdâ€:9}]</p>
<p>APIï¼š<a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/VhgnaedC">https://easydoc.xyz/doc/75716633/ZUqEdvA4/VhgnaedC</a></p>
<p>å“åº”æ•°æ®ï¼š</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
	<span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>
	<span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>æœ¬è´¨å°±æ˜¯åœ¨ä¸­é—´è¡¨pms_attr_attrgroup_relationä¸­ï¼Œæ·»åŠ ä¸€æ¡è®°å½•çš„è¿‡ç¨‹</p>
<h2 id="27-å‘å¸ƒå•†å“"><a href="#27-å‘å¸ƒå•†å“" class="headerlink" title="27. å‘å¸ƒå•†å“"></a>27. å‘å¸ƒå•†å“</h2><p>è·å–æ‰€æœ‰ä¼šå‘˜ç­‰çº§ï¼š/member/memberlevel/list</p>
<p>APIï¼š<a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/jCFganpf">https://easydoc.xyz/doc/75716633/ZUqEdvA4/jCFganpf</a></p>
<p>åœ¨â€œgulimall-gatewayâ€ä¸­ä¿®æ”¹â€œâ€æ–‡ä»¶ï¼Œæ·»åŠ å¯¹äºmemberçš„è·¯ç”±</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> gulimall<span class="token punctuation">-</span>member
  <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//gulimall<span class="token punctuation">-</span>member
  <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> Path=/api/member/<span class="token important">**</span>
  <span class="token key atrule">filters</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> RewritePath=/api/(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">></span>/<span class="token punctuation">?</span>.<span class="token important">*)</span><span class="token punctuation">,</span>/$\<span class="token punctuation">&#123;</span>segment<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>åœ¨â€œgulimall-memberâ€ä¸­ï¼Œåˆ›å»ºâ€œbootstrap.propertiesâ€æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">spring.cloud.nacos.config.name</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-member</span>
<span class="token attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">192.168.137.14:8848</span>
<span class="token attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token attr-value">795521fa-77ef-411e-a8d8-0889fdfe6964</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].data-id</span><span class="token punctuation">=</span><span class="token attr-value">gulimall-member.yml</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].group</span><span class="token punctuation">=</span><span class="token attr-value">DEFAULT_GROUP</span>
<span class="token attr-name">spring.cloud.nacos.config.extension-configs[0].refresh</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>è·å–åˆ†ç±»å…³è”çš„å“ç‰Œï¼š/product/categorybrandrelation/brands/list</p>
<p>APIï¼š<a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/HgVjlzWV">https://easydoc.xyz/doc/75716633/ZUqEdvA4/HgVjlzWV</a></p>
<p>é‡åˆ°PubSubé—®é¢˜</p>
<ol>
<li>é¦–å…ˆå®‰è£…pubsub-js</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">&#96;npm install --save pubsub-js&#96;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="2">
<li>è®¢é˜…æ–¹ç»„ä»¶</li>
</ol>
<pre class="line-numbers language-none"><code class="language-none">&#96;import PubSub from &#39;pubsub-js&#39;&#96;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>è¯¥this.PubSubä¸ºPubSubã€‚</p>
<p>è·å–åˆ†ç±»ä¸‹æ‰€æœ‰åˆ†ç»„&amp;å…³è”å±æ€§</p>
<p>è¯·æ±‚ç±»å‹ï¼š/product/attrgroup/{catelogId}/withattr</p>
<p>è¯·æ±‚æ–¹å¼ï¼šGET</p>
<p>è¯·æ±‚URLï¼š<a target="_blank" rel="noopener" href="http://localhost:88/api/product/attrgroup/225/withattr?t=1588864569478">http://localhost:88/api/product/attrgroup/225/withattr?t=1588864569478</a></p>
<p>mysqlé»˜è®¤çš„éš”ç¦»çº§åˆ«ä¸ºè¯»å·²æäº¤ï¼Œä¸ºäº†èƒ½å¤Ÿåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œè·å–åˆ°æ•°æ®åº“ä¸­çš„æ•°æ®ä¿¡æ¯ï¼Œå¯ä»¥è°ƒæ•´éš”ç¦»çº§åˆ«ä¸ºè¯»æœªæäº¤ï¼š</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">READ</span> <span class="token keyword">UNCOMMITTED</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>ä½†æ˜¯å®ƒå¯¹äºå½“å‰çš„äº‹åŠ¡çª—å£ç”Ÿæ•ˆï¼Œå¦‚æœæƒ³è¦è®¾ç½®å…¨å±€çš„ï¼Œéœ€è¦åŠ ä¸Šglobalå­—æ®µã€‚</p>
<h2 id="28-å•†å“ç®¡ç†"><a href="#28-å•†å“ç®¡ç†" class="headerlink" title="28. å•†å“ç®¡ç†"></a>28. å•†å“ç®¡ç†</h2><p>å½“æ–°å»ºæ—¶ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">t: 1588983621569
status: 0
key: 
brandId: 0
catelogId: 0
page: 1
limit: 10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å½“ä¸Šæ¶æ—¶ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">t: 1588983754030
status: 1
key: 
brandId: 0
catelogId: 0
page: 1
limit: 10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å½“ä¸‹æ¶æ—¶ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">t: 1588983789089
status: 2
key: 
brandId: 0
catelogId: 0
page: 1
limit: 10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>åœ¨SPUä¸­ï¼Œå†™å‡ºçš„æ—¥æœŸæ•°æ®éƒ½ä¸ç¬¦åˆè§„åˆ™ï¼š<br><img src="/img/spring-cloud/image-20200509083248660.png" alt="image-20200509083248660"></p>
<p>æƒ³è¦ç¬¦åˆè§„åˆ™ï¼Œå¯ä»¥è®¾ç½®å†™å‡ºæ•°æ®çš„è§„åˆ™ï¼š</p>
<p>spring.jackson</p>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">jackson</span><span class="token punctuation">:</span>
  <span class="token key atrule">date-format</span><span class="token punctuation">:</span> yyyy<span class="token punctuation">-</span>MM<span class="token punctuation">-</span>dd HH<span class="token punctuation">:</span>mm<span class="token punctuation">:</span>ss<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>SKUæ£€ç´¢ï¼š</p>
<p>Request URL: <a target="_blank" rel="noopener" href="http://localhost:88/api/product/skuinfo/list?t=1588989437944&amp;page=1&amp;limit=10&amp;key=&amp;catelogId=0&amp;brandId=0&amp;min=0&amp;max=0">http://localhost:88/api/product/skuinfo/list?t=1588989437944&amp;page=1&amp;limit=10&amp;key=&amp;catelogId=0&amp;brandId=0&amp;min=0&amp;max=0</a></p>
<p>è¯·æ±‚ä½“ï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">t: 1588989437944
page: 1
limit: 10
key: 
catelogId: 0
brandId: 0
min: 0
max: 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>APIï¼š <a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/ucirLq1D">https://easydoc.xyz/doc/75716633/ZUqEdvA4/ucirLq1D</a> </p>
<h2 id="29-ä»“åº“ç®¡ç†"><a href="#29-ä»“åº“ç®¡ç†" class="headerlink" title="29. ä»“åº“ç®¡ç†"></a>29. ä»“åº“ç®¡ç†</h2><p> åº“å­˜ä¿¡æ¯è¡¨ï¼šwms_ware_info</p>
<p>ã€1ã€‘ä»“åº“åˆ—è¡¨åŠŸèƒ½ï¼š </p>
<p>ã€2ã€‘æŸ¥è¯¢å•†å“åº“å­˜ï¼š</p>
<p>ã€3ã€‘æŸ¥è¯¢é‡‡è´­éœ€æ±‚ï¼š</p>
<p>ã€4ã€‘ åˆå¹¶é‡‡è´­éœ€æ±‚ï¼š</p>
<p>åˆå¹¶æ•´å•é€‰ä¸­parcharseIDï¼šRequest URL: <a target="_blank" rel="noopener" href="http://localhost:88/api/ware/purchase/merge">http://localhost:88/api/ware/purchase/merge</a></p>
<p>è¯·æ±‚æ•°æ®ï¼š</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>purchaseId<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>
items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>åˆå¹¶æ•´å•æœªé€‰æ‹©parcharseID :Request URL: <a target="_blank" rel="noopener" href="http://localhost:88/api/ware/purchase/merge">http://localhost:88/api/ware/purchase/merge</a></p>
<p><img src="/img/spring-cloud/image-20200509170916557.png" alt="image-20200509170916557"></p>
<pre class="line-numbers language-none"><code class="language-none">items: [1, 2]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>æ¶‰åŠåˆ°ä¸¤å¼ è¡¨ï¼šwms_purchase_detailï¼Œwms_purchase</p>
<p>ç°åœ¨é‡‡è´­å•ä¸­å¡«å†™æ•°æ®ï¼Œç„¶åå…³è”ç”¨æˆ·ï¼Œå…³è”ç”¨æˆ·åï¼Œ</p>
<p>æ€»çš„å«ä¹‰ï¼Œå°±æ˜¯æ ¹æ®é‡‡è´­å•ä¸­çš„ä¿¡æ¯ï¼Œæ›´æ–°é‡‡è´­éœ€æ±‚ï¼Œåœ¨é‡‡è´­å•ä¸­å¡«å†™é‡‡è´­äººå‘˜ï¼Œé‡‡è´­å•å·ï¼Œé‡‡è´­çš„æ—¶å€™ï¼Œæ›´æ–°é‡‡è´­ç»†èŠ‚è¡¨ä¸­çš„é‡‡è´­äººå‘˜IDå’Œé‡‡è´­çŠ¶æ€ã€‚</p>
<p><img src="/img/spring-cloud/image-20200509191108806.png" alt="image-20200509191108806"></p>
<p>é¢†å–é‡‡è´­å•</p>
<p><a target="_blank" rel="noopener" href="http://localhost:88/api/ware/purchase/received">http://localhost:88/api/ware/purchase/received</a></p>
<p>ï¼ˆ1ï¼‰æŸä¸ªäººé¢†å–äº†é‡‡è´­å•åï¼Œå…ˆçœ‹é‡‡è´­å•æ˜¯å¦å¤„äºæœªåˆ†é…çŠ¶æ€ï¼Œåªæœ‰é‡‡è´­å•æ˜¯æ–°å»ºæˆ–ä»¥é¢†å–çŠ¶æ€æ—¶ï¼Œæ‰æ›´æ–°é‡‡è´­å•çš„çŠ¶æ€</p>
<p>ï¼ˆ2ï¼‰</p>
<p>ã€1ã€‘ä»“åº“åˆ—è¡¨åŠŸèƒ½ï¼š <a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/mZgdqOWe">https://easydoc.xyz/doc/75716633/ZUqEdvA4/mZgdqOWe</a> </p>
<p>ã€2ã€‘æŸ¥è¯¢å•†å“åº“å­˜ï¼š <a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/hwXrEXBZ">https://easydoc.xyz/doc/75716633/ZUqEdvA4/hwXrEXBZ</a> </p>
<p>ã€3ã€‘æŸ¥è¯¢é‡‡è´­éœ€æ±‚ï¼š <a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/Ss4zsV7R">https://easydoc.xyz/doc/75716633/ZUqEdvA4/Ss4zsV7R</a> </p>
<p>ã€4ã€‘ åˆå¹¶é‡‡è´­éœ€æ±‚ï¼š<a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/cUlv9QvK">https://easydoc.xyz/doc/75716633/ZUqEdvA4/cUlv9QvK</a> </p>
<p>ã€5ã€‘æŸ¥è¯¢æœªé¢†å–çš„é‡‡è´­å•ï¼š <a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/hI12DNrH">https://easydoc.xyz/doc/75716633/ZUqEdvA4/hI12DNrH</a> </p>
<p>ã€6ã€‘é¢†å–é‡‡è´­å•ï¼š <a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/vXMBBgw1">https://easydoc.xyz/doc/75716633/ZUqEdvA4/vXMBBgw1</a> </p>
<p>å®Œæˆé‡‡è´­ï¼Œåœ¨å®Œæˆé‡‡è´­è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ¶‰åŠåˆ°è®¾ç½®SKUçš„nameä¿¡æ¯åˆ°ä»“åº“ä¸­ï¼Œè¿™æ˜¯é€šè¿‡è¿œç¨‹è°ƒç”¨â€œgulimall-productâ€æ¥å®ç°æ ¹æ®sku_idæŸ¥è¯¢å¾—åˆ°sku_nameçš„ï¼Œå¦‚æœè¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿäº†å¼‚å¸¸ï¼Œäº‹åŠ¡ä¸æƒ³è¦å›æ»šï¼Œç›®å‰é‡‡ç”¨çš„æ–¹å¼æ˜¯é€šè¿‡æ•è·å¼‚å¸¸çš„æ–¹å¼ï¼Œé˜²æ­¢äº‹åŠ¡å›æ»šï¼Œæ˜¯å¦è¿˜æœ‰å…¶ä»–çš„æ–¹å¼å‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜ç•™å¾…ä»¥åè§£å†³ã€‚</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStock</span><span class="token punctuation">(</span><span class="token class-name">Long</span> skuId<span class="token punctuation">,</span> <span class="token class-name">Long</span> wareId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> skuNum<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WareSkuEntity</span><span class="token punctuation">></span></span> wareSkuEntities <span class="token operator">=</span> wareSkuDao<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WareSkuEntity</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"sku_id"</span><span class="token punctuation">,</span> skuId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"ware_id"</span><span class="token punctuation">,</span> wareId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token keyword">if</span><span class="token punctuation">(</span>wareSkuEntities <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> wareSkuEntities<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token comment">//æ–°å¢</span>
           <span class="token class-name">WareSkuEntity</span> wareSkuEntity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WareSkuEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           wareSkuEntity<span class="token punctuation">.</span><span class="token function">setSkuId</span><span class="token punctuation">(</span>skuId<span class="token punctuation">)</span><span class="token punctuation">;</span>
           wareSkuEntity<span class="token punctuation">.</span><span class="token function">setWareId</span><span class="token punctuation">(</span>wareId<span class="token punctuation">)</span><span class="token punctuation">;</span>
           wareSkuEntity<span class="token punctuation">.</span><span class="token function">setStock</span><span class="token punctuation">(</span>skuNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
           wareSkuEntity<span class="token punctuation">.</span><span class="token function">setStockLocked</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

           <span class="token comment">//è¿œç¨‹æŸ¥è¯¢SKUçš„nameï¼Œè‹¥å¤±è´¥æ— éœ€å›æ»š</span>
           <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
               <span class="token class-name">R</span> info <span class="token operator">=</span> productFeignService<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>skuId<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword">if</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                   <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> data<span class="token operator">=</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>info<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"skuInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   wareSkuEntity<span class="token punctuation">.</span><span class="token function">setSkuName</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"skuName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">&#125;</span>
           <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

           <span class="token punctuation">&#125;</span>

           wareSkuDao<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>wareSkuEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
           <span class="token comment">//æ’å…¥</span>
           wareSkuDao<span class="token punctuation">.</span><span class="token function">addStock</span><span class="token punctuation">(</span>skuId<span class="token punctuation">,</span>wareId<span class="token punctuation">,</span>skuNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">&#125;</span>

   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="30-è·å–spuè§„æ ¼"><a href="#30-è·å–spuè§„æ ¼" class="headerlink" title="30. è·å–spuè§„æ ¼"></a>30. è·å–spuè§„æ ¼</h2><p>åœ¨SPUç®¡ç†é¡µé¢ï¼Œè·å–å•†å“è§„æ ¼çš„æ—¶å€™ï¼Œå‡ºç°400å¼‚å¸¸ï¼Œæµè§ˆå™¨æ˜¾ç¤ºè·³è½¬ä¸äº†</p>
<p>é—®é¢˜ç°è±¡ï¼š</p>
<p><img src="/img/spring-cloud/image-20200510182051355.png" alt="image-20200510182051355"></p>
<p>å‡ºç°é—®é¢˜çš„ä»£ç ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">attrUpdateShow</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    path<span class="token operator">:</span> <span class="token string">"/product-attrupdate"</span><span class="token punctuation">,</span>
    query<span class="token operator">:</span> <span class="token punctuation">&#123;</span> spuId<span class="token operator">:</span> row<span class="token punctuation">.</span>id<span class="token punctuation">,</span> catalogId<span class="token operator">:</span> row<span class="token punctuation">.</span>catalogId <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>æš‚æ—¶ä¸çŸ¥é“å¦‚ä½•è§£å†³é—®é¢˜ã€‚åªèƒ½ç•™å¾…ä»¥åè§£å†³ã€‚</p>
<p>ç»è¿‡æµ‹è¯•å‘ç°ï¼Œé—®é¢˜å’Œä¸Šé¢çš„ä»£ç æ²¡æœ‰å…³ç³»ï¼Œé—®é¢˜å‡ºç°åœ¨â€œattrupdate.vueâ€ä¸Šï¼Œè¯¥vueé¡µé¢æ— æ³•é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œå½“è¾“å…¥è®¿é—®URLï¼ˆ <a target="_blank" rel="noopener" href="http://localhost:8001/#/product-attrupdate">http://localhost:8001/#/product-attrupdate</a> ï¼‰çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°404ï¼Œè€Œå…¶ä»–çš„è¯·æ±‚åˆ™ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œä¸çŸ¥ä¸ºä½•ã€‚</p>
<p>é€šè¿‡POSTMANè¿›è¡Œè¯·æ±‚çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè¯·æ±‚åˆ°æ•°æ®ã€‚</p>
<p>ç»è¿‡åˆ†æå‘ç°ï¼Œæ˜¯å› ä¸ºåœ¨æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥é¡µé¢çš„å¯¼èˆªæ‰€å¯¼è‡´çš„ï¼Œä¸ºäº†ä¿®æ­£è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨â€œsys-menuâ€è¡¨ä¸­æ·»åŠ ä¸€è¡Œï¼Œå†…å®¹ä½ï¼š</p>
<p><img src="/img/spring-cloud/image-20200510231012714.png" alt="image-20200510231012714"></p>
<p>è¿™æ ·å½“å†æ¬¡è®¿é—®çš„æ—¶å€™ï¼Œåœ¨â€œå¹³å°å±æ€§â€ä¸‹ï¼Œä¼šå‡ºç°â€œè§„æ ¼ç»´æŠ¤â€èœå•ï¼Œ</p>
<p><img src="/img/spring-cloud/image-20200510231041708.png" alt="image-20200510231041708"></p>
<p>å½“å†æ¬¡ç‚¹å‡»â€œè§„æ ¼â€çš„æ—¶å€™ï¼Œæ˜¾ç¤ºå‡ºèœå•</p>
<p><img src="/img/spring-cloud/image-20200510231200130.png" alt="image-20200510231200130"></p>
<p>ä¸è¿‡è¿™ç§èœå•å¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„éœ€è¦ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒä»¥å¼¹å‡ºæ¡†çš„å½¢å¼å‡ºç°ã€‚</p>
<h2 id="31-ä¿®æ”¹å•†å“è§„æ ¼"><a href="#31-ä¿®æ”¹å•†å“è§„æ ¼" class="headerlink" title="31. ä¿®æ”¹å•†å“è§„æ ¼"></a>31. ä¿®æ”¹å•†å“è§„æ ¼</h2><p>APIï¼š <a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/GhnJ0L85">https://easydoc.xyz/doc/75716633/ZUqEdvA4/GhnJ0L85</a> </p>
<p>URLï¼š/product/attr/update/{spuId}</p>
<h2 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h2><h3 id="1-åœ¨open-fenä¸­ä¼šå°†è°ƒç”¨çš„æ•°æ®è½¬æ¢ä¸ºJSONï¼Œæ¥æ”¶æ–¹æ¥æ”¶åï¼Œå°†JSONè½¬æ¢ä¸ºå¯¹è±¡ï¼Œæ­¤æ—¶è°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹çš„å¤„ç†JSONçš„å¯¹è±¡ä¸ä¸€å®šéƒ½æ˜¯åŒä¸€ä¸ªç±»ï¼Œåªè¦å®ƒä»¬çš„å­—æ®µç±»å‹å»åˆå³å¯ã€‚"><a href="#1-åœ¨open-fenä¸­ä¼šå°†è°ƒç”¨çš„æ•°æ®è½¬æ¢ä¸ºJSONï¼Œæ¥æ”¶æ–¹æ¥æ”¶åï¼Œå°†JSONè½¬æ¢ä¸ºå¯¹è±¡ï¼Œæ­¤æ—¶è°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹çš„å¤„ç†JSONçš„å¯¹è±¡ä¸ä¸€å®šéƒ½æ˜¯åŒä¸€ä¸ªç±»ï¼Œåªè¦å®ƒä»¬çš„å­—æ®µç±»å‹å»åˆå³å¯ã€‚" class="headerlink" title="1.  åœ¨open fenä¸­ä¼šå°†è°ƒç”¨çš„æ•°æ®è½¬æ¢ä¸ºJSONï¼Œæ¥æ”¶æ–¹æ¥æ”¶åï¼Œå°†JSONè½¬æ¢ä¸ºå¯¹è±¡ï¼Œæ­¤æ—¶è°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹çš„å¤„ç†JSONçš„å¯¹è±¡ä¸ä¸€å®šéƒ½æ˜¯åŒä¸€ä¸ªç±»ï¼Œåªè¦å®ƒä»¬çš„å­—æ®µç±»å‹å»åˆå³å¯ã€‚"></a>1.  åœ¨open fenä¸­ä¼šå°†è°ƒç”¨çš„æ•°æ®è½¬æ¢ä¸ºJSONï¼Œæ¥æ”¶æ–¹æ¥æ”¶åï¼Œå°†JSONè½¬æ¢ä¸ºå¯¹è±¡ï¼Œæ­¤æ—¶è°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹çš„å¤„ç†JSONçš„å¯¹è±¡ä¸ä¸€å®šéƒ½æ˜¯åŒä¸€ä¸ªç±»ï¼Œåªè¦å®ƒä»¬çš„å­—æ®µç±»å‹å»åˆå³å¯ã€‚</h3><p>è°ƒç”¨æ–¹ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"gulimall-coupon"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CouponFenService</span> <span class="token punctuation">&#123;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/coupon/spubounds/save"</span><span class="token punctuation">)</span>
    <span class="token class-name">R</span> <span class="token function">saveSpuBounds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">SpuBoundTo</span> spuBoundTo<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/coupon/skufullreduction/saveInfo"</span><span class="token punctuation">)</span>
    <span class="token class-name">R</span> <span class="token function">saveSkuReduction</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">SkuReductionTo</span> skuReductionTo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¢«è°ƒç”¨æ–¹ï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">  <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/save"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">SpuBoundsEntity</span> spuBounds<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
spuBoundsService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>spuBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/saveInfo"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">R</span> <span class="token function">saveInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">SkuReductionTo</span> skuReductionTo<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      skuFullReductionService<span class="token punctuation">.</span><span class="token function">saveSkuReduction</span><span class="token punctuation">(</span>skuReductionTo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token class-name">R</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>è°ƒç”¨æ–¹JSONåŒ–æ—¶çš„å¯¹è±¡SpuBoundToï¼š</p>
<pre class="line-numbers language-none"><code class="language-none">@Data
public class SpuBoundTo &#123;
    private Long spuId;
    private BigDecimal buyBounds;
    private BigDecimal growBounds;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>è¢«è°ƒç”¨æ–¹JSONæ•°æ®å¯¹è±¡åŒ–æ—¶çš„å¯¹è±¡SpuBoundsEntityï¼š</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**
 * å•†å“spuç§¯åˆ†è®¾ç½®
 * 
 * @author cosmoswong
 * @email cosmoswong@sina.com
 * @date 2020-04-23 23:38:48
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"sms_spu_bounds"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpuBoundsEntity</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * id
	 */</span>
	<span class="token annotation punctuation">@TableId</span>
	<span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Long</span> spuId<span class="token punctuation">;</span>
	<span class="token comment">/**
	 * æˆé•¿ç§¯åˆ†
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> growBounds<span class="token punctuation">;</span>
	<span class="token comment">/**
	 * è´­ç‰©ç§¯åˆ†
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">BigDecimal</span> buyBounds<span class="token punctuation">;</span>
	<span class="token comment">/**
	 * ä¼˜æƒ ç”Ÿæ•ˆæƒ…å†µ[1111ï¼ˆå››ä¸ªçŠ¶æ€ä½ï¼Œä»å³åˆ°å·¦ï¼‰;0 - æ— ä¼˜æƒ ï¼Œæˆé•¿ç§¯åˆ†æ˜¯å¦èµ é€;1 - æ— ä¼˜æƒ ï¼Œè´­ç‰©ç§¯åˆ†æ˜¯å¦èµ é€;2 - æœ‰ä¼˜æƒ ï¼Œæˆé•¿ç§¯åˆ†æ˜¯å¦èµ é€;3 - æœ‰ä¼˜æƒ ï¼Œè´­ç‰©ç§¯åˆ†æ˜¯å¦èµ é€ã€çŠ¶æ€ä½0ï¼šä¸èµ é€ï¼Œ1ï¼šèµ é€ã€‘]
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Integer</span> work<span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="2-äº‹åŠ¡ç©¶ç«Ÿè¦å¦‚ä½•åŠ ä¸Šï¼Ÿ"><a href="#2-äº‹åŠ¡ç©¶ç«Ÿè¦å¦‚ä½•åŠ ä¸Šï¼Ÿ" class="headerlink" title="2. äº‹åŠ¡ç©¶ç«Ÿè¦å¦‚ä½•åŠ ä¸Šï¼Ÿ"></a>2. äº‹åŠ¡ç©¶ç«Ÿè¦å¦‚ä½•åŠ ä¸Šï¼Ÿ</h3><p>å­˜åœ¨Batchæ“ä½œçš„æ—¶å€™ï¼Œæ‰éœ€è¦åŠ ä¸Šäº‹åŠ¡ï¼Œå•ä¸ªæ“ä½œæ— éœ€æ·»åŠ äº‹åŠ¡æ§åˆ¶ã€‚</p>
<p>SpringBootä¸­çš„æ˜¯äº‹åŠ¡</p>
<p>æ‰¹é‡æ“ä½œçš„æ—¶å€™ï¼Œæ‰éœ€è¦äº‹åŠ¡</p>
<p>ä¸€ä¸ªäº‹åŠ¡æ ‡æ³¨çš„æ–¹æ³•ä¸Šï¼Œæ–¹æ³•å†…å­˜åœ¨è¿™äº›æ“ä½œï¼š</p>
<p>ï¼ˆ1ï¼‰æ‰¹é‡æ›´æ–°ä¸€ä¸ªè¡¨ä¸­å­—æ®µ</p>
<p>ï¼ˆ2ï¼‰æ›´æ–°å¤šå¼ è¡¨ä¸­çš„æ“ä½œ</p>
<p>å®é™…ä¸Šä¸è®ºæ˜¯å“ªç§ç±»å‹ï¼Œæ–¹æ³•ä¸­æ‰€æœ‰å¯¹äºæ•°æ®åº“çš„å†™æ“ä½œï¼Œéƒ½ä¼šè¢«æ•´ä½“å½“åšä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨è¿™ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªæ“ä½œå‡ºç°äº†å¼‚å¸¸ï¼Œåˆ™æ•´ä½“éƒ½ä¸ä¼šè¢«æäº¤ã€‚è¿™å°±æ˜¯å¯¹äºSpringBootä¸­çš„@Transactionalçš„ç†è§£ã€‚</p>
<p>@EnableTransactionManagementå’Œ@Transactionalçš„åŒºåˆ«ï¼Ÿ</p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/abysscarry/article/details/80189232">https://blog.csdn.net/abysscarry/article/details/80189232</a><br> <a target="_blank" rel="noopener" href="https://blog.csdn.net/Driver_tu/article/details/99679145">https://blog.csdn.net/Driver_tu/article/details/99679145</a> </p>
<p> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/leaveast/p/11765503.html">https://www.cnblogs.com/leaveast/p/11765503.html</a> </p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="1-æ–‡æ¡£å‚è€ƒåœ°å€"><a href="#1-æ–‡æ¡£å‚è€ƒåœ°å€" class="headerlink" title="1. æ–‡æ¡£å‚è€ƒåœ°å€"></a>1. æ–‡æ¡£å‚è€ƒåœ°å€</h3><p> <a target="_blank" rel="noopener" href="http://www.jayh.club/#/02.PassJava%E6%9E%B6%E6%9E%84%E7%AF%87/01.%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%92%8C%E6%B7%BB%E5%8A%A0%E6%A8%A1%E5%9D%97">http://www.jayh.club/#/02.PassJava%E6%9E%B6%E6%9E%84%E7%AF%87/01.%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%92%8C%E6%B7%BB%E5%8A%A0%E6%A8%A1%E5%9D%97</a> </p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/ok_wolf/article/details/105400748">https://blog.csdn.net/ok_wolf/article/details/105400748</a> </p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/javalbb/p/12690862.html">https://www.cnblogs.com/javalbb/p/12690862.html</a></p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/ok_wolf/article/details/105456170">https://blog.csdn.net/ok_wolf/article/details/105456170</a> </p>
<p> <a target="_blank" rel="noopener" href="https://easydoc.xyz/doc/75716633/ZUqEdvA4/jCFganpf">https://easydoc.xyz/doc/75716633/ZUqEdvA4/jCFganpf</a> </p>
<h3 id="2-å¼€æœºå¯åŠ¨docker"><a href="#2-å¼€æœºå¯åŠ¨docker" class="headerlink" title="2. å¼€æœºå¯åŠ¨docker"></a>2. å¼€æœºå¯åŠ¨docker</h3><p><img src="/img/spring-cloud/image-20200422221237751.png" alt="image-20200422221237751"></p>
<p>åœ¨Dockerä¸­è®¾ç½®å¼€æœºå¯åŠ¨å®¹å™¨</p>
<p><img src="/img/spring-cloud/image-20200423005200485.png" alt="image-20200423005200485"></p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment">#æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</span>
<span class="token punctuation">[</span>root@hadoop-104 module<span class="token punctuation">]</span><span class="token comment"># systemctl status firewalld</span>
  firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/firewalld.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Wed <span class="token number">2020</span>-04-22 <span class="token number">21</span>:26:23 EDT<span class="token punctuation">;</span> 10min ago
     Docs: man:firewalld<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
 Main PID: <span class="token number">5947</span> <span class="token punctuation">(</span>firewalld<span class="token punctuation">)</span>
   CGroup: /system.slice/firewalld.service
           â””â”€5947 /usr/bin/python -Es /usr/sbin/firewalld --nofork --nopid

Apr <span class="token number">22</span> <span class="token number">21</span>:26:20 hadoop-104 systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Starting firewalld - dynamic firewall daemon<span class="token punctuation">..</span>.
Apr <span class="token number">22</span> <span class="token number">21</span>:26:23 hadoop-104 systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started firewalld - dynamic firewall daemon.
<span class="token comment">#æŸ¥çœ‹é˜²ç«å¢™æ˜¯å¦æ˜¯å¼€æœºå¯åŠ¨</span>
<span class="token punctuation">[</span>root@hadoop-104 module<span class="token punctuation">]</span><span class="token comment"># systemctl list-unit-files|grep firewalld</span>
firewalld.service                             enabled 
<span class="token comment">#å…³é—­å¼€æœºå¯åŠ¨é˜²ç«å¢™</span>
<span class="token punctuation">[</span>root@hadoop-104 module<span class="token punctuation">]</span><span class="token comment"># systemctl disable firewalld             </span>
Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
<span class="token comment">#åœæ­¢é˜²ç«å¢™</span>
<span class="token punctuation">[</span>root@hadoop-104 module<span class="token punctuation">]</span><span class="token comment"># systemctl stop firewalld         </span>
<span class="token comment">#å†æ¬¡æŸ¥çœ‹é˜²ç«å¢™</span>
<span class="token punctuation">[</span>root@hadoop-104 module<span class="token punctuation">]</span><span class="token comment"># systemctl list-unit-files|grep firewalld</span>
firewalld.service                             disabled
<span class="token punctuation">[</span>root@hadoop-104 module<span class="token punctuation">]</span><span class="token comment"># </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="3-æŸ¥çœ‹å‘½ä»¤çš„å®‰è£…ä½ç½®"><a href="#3-æŸ¥çœ‹å‘½ä»¤çš„å®‰è£…ä½ç½®" class="headerlink" title="3. æŸ¥çœ‹å‘½ä»¤çš„å®‰è£…ä½ç½®"></a>3. æŸ¥çœ‹å‘½ä»¤çš„å®‰è£…ä½ç½®</h3><p>whereis mysqlï¼šæŸ¥çœ‹mysqlçš„å®‰è£…ä½ç½®</p>
<h3 id="4-vscodeä¸­ç”Ÿæˆä»£ç ç‰‡æ®µ"><a href="#4-vscodeä¸­ç”Ÿæˆä»£ç ç‰‡æ®µ" class="headerlink" title="4. vscodeä¸­ç”Ÿæˆä»£ç ç‰‡æ®µ"></a>4. vscodeä¸­ç”Ÿæˆä»£ç ç‰‡æ®µ</h3><p><img src="/img/spring-cloud/image-20200425165814903.png" alt="image-20200425165814903"></p>
<p>æ–°å»ºä¸€ä¸ªå…¨å±€çš„ä»£ç ç‰‡æ®µï¼Œåå­—ä¸ºvueï¼Œç„¶åå›è½¦ï¼š</p>
<p><img src="/img/spring-cloud/image-20200425165929332.png" alt="image-20200425165929332"></p>
<p>å°†ä¸‹é¢çš„ä»£ç ç‰‡æ®µç²˜è´´åˆ°â€œvue.code-snippetsâ€</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token comment">// Place your å…¨å±€ snippets here. Each snippet is defined under a snippet name and has a scope, prefix, body and </span>
    <span class="token comment">// description. Add comma separated ids of the languages where the snippet is applicable in the scope field. If scope </span>
    <span class="token comment">// is left empty or omitted, the snippet gets applied to all languages. The prefix is what is </span>
    <span class="token comment">// used to trigger the snippet and the body will be expanded and inserted. Possible variables are: </span>
    <span class="token comment">// $1, $2 for tab stops, $0 for the final cursor position, and $&#123;1:label&#125;, $&#123;2:another&#125; for placeholders. </span>
    <span class="token comment">// Placeholders with the same ids are connected.</span>
    <span class="token comment">// Example:</span>
    <span class="token comment">// "Print to console": &#123;</span>
    <span class="token comment">// 	"scope": "javascript,typescript",</span>
    <span class="token comment">// 	"prefix": "log",</span>
    <span class="token comment">// 	"body": [</span>
    <span class="token comment">// 		"console.log('$1');",</span>
    <span class="token comment">// 		"$2"</span>
    <span class="token comment">// 	],</span>
    <span class="token comment">// 	"description": "Log output to console"</span>
    <span class="token comment">// &#125;</span>
    <span class="token property">"ç”Ÿæˆvueæ¨¡æ¿"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"prefix"</span><span class="token operator">:</span> <span class="token string">"vue"</span><span class="token punctuation">,</span>
        <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"&lt;!-- $1 -->"</span><span class="token punctuation">,</span>
            <span class="token string">"&lt;template>"</span><span class="token punctuation">,</span>
            <span class="token string">"&lt;div class='$2'>$5&lt;/div>"</span><span class="token punctuation">,</span>
            <span class="token string">"&lt;/template>"</span><span class="token punctuation">,</span>
            <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token string">"&lt;script>"</span><span class="token punctuation">,</span>
            <span class="token string">"//è¿™é‡Œå¯ä»¥å¯¼å…¥å…¶ä»–æ–‡ä»¶ï¼ˆæ¯”å¦‚ï¼šç»„ä»¶ï¼Œå·¥å…·jsï¼Œç¬¬ä¸‰æ–¹æ’ä»¶jsï¼Œjsonæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡ä»¶ç­‰ç­‰ï¼‰"</span><span class="token punctuation">,</span>
            <span class="token string">"//ä¾‹å¦‚ï¼šimport ã€Šç»„ä»¶åç§°ã€‹ from 'ã€Šç»„ä»¶è·¯å¾„ã€‹';"</span><span class="token punctuation">,</span>
            <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token string">"export default &#123;"</span><span class="token punctuation">,</span>
            <span class="token string">"//importå¼•å…¥çš„ç»„ä»¶éœ€è¦æ³¨å…¥åˆ°å¯¹è±¡ä¸­æ‰èƒ½ä½¿ç”¨"</span><span class="token punctuation">,</span>
            <span class="token string">"components: &#123;&#125;,"</span><span class="token punctuation">,</span>
            <span class="token string">"data() &#123;"</span><span class="token punctuation">,</span>
            <span class="token string">"//è¿™é‡Œå­˜æ”¾æ•°æ®"</span><span class="token punctuation">,</span>
            <span class="token string">"return &#123;"</span><span class="token punctuation">,</span>
            <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;;"</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;,"</span><span class="token punctuation">,</span>
            <span class="token string">"//ç›‘å¬å±æ€§ ç±»ä¼¼äºdataæ¦‚å¿µ"</span><span class="token punctuation">,</span>
            <span class="token string">"computed: &#123;&#125;,"</span><span class="token punctuation">,</span>
            <span class="token string">"//ç›‘æ§dataä¸­çš„æ•°æ®å˜åŒ–"</span><span class="token punctuation">,</span>
            <span class="token string">"watch: &#123;&#125;,"</span><span class="token punctuation">,</span>
            <span class="token string">"//æ–¹æ³•é›†åˆ"</span><span class="token punctuation">,</span>
            <span class="token string">"methods: &#123;"</span><span class="token punctuation">,</span>
            <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;,"</span><span class="token punctuation">,</span>
            <span class="token string">"//ç”Ÿå‘½å‘¨æœŸ - åˆ›å»ºå®Œæˆï¼ˆå¯ä»¥è®¿é—®å½“å‰thiså®ä¾‹ï¼‰"</span><span class="token punctuation">,</span>
            <span class="token string">"created() &#123;"</span><span class="token punctuation">,</span>
            <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;,"</span><span class="token punctuation">,</span>
            <span class="token string">"//ç”Ÿå‘½å‘¨æœŸ - æŒ‚è½½å®Œæˆï¼ˆå¯ä»¥è®¿é—®DOMå…ƒç´ ï¼‰"</span><span class="token punctuation">,</span>
            <span class="token string">"mounted() &#123;"</span><span class="token punctuation">,</span>
            <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;,"</span><span class="token punctuation">,</span>
            <span class="token string">"beforeCreate() &#123;&#125;, //ç”Ÿå‘½å‘¨æœŸ - åˆ›å»ºä¹‹å‰"</span><span class="token punctuation">,</span>
            <span class="token string">"beforeMount() &#123;&#125;, //ç”Ÿå‘½å‘¨æœŸ - æŒ‚è½½ä¹‹å‰"</span><span class="token punctuation">,</span>
            <span class="token string">"beforeUpdate() &#123;&#125;, //ç”Ÿå‘½å‘¨æœŸ - æ›´æ–°ä¹‹å‰"</span><span class="token punctuation">,</span>
            <span class="token string">"updated() &#123;&#125;, //ç”Ÿå‘½å‘¨æœŸ - æ›´æ–°ä¹‹å"</span><span class="token punctuation">,</span>
            <span class="token string">"beforeDestroy() &#123;&#125;, //ç”Ÿå‘½å‘¨æœŸ - é”€æ¯ä¹‹å‰"</span><span class="token punctuation">,</span>
            <span class="token string">"destroyed() &#123;&#125;, //ç”Ÿå‘½å‘¨æœŸ - é”€æ¯å®Œæˆ"</span><span class="token punctuation">,</span>
            <span class="token string">"activated() &#123;&#125;, //å¦‚æœé¡µé¢æœ‰keep-aliveç¼“å­˜åŠŸèƒ½ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè§¦å‘"</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;"</span><span class="token punctuation">,</span>
            <span class="token string">"&lt;/script>"</span><span class="token punctuation">,</span>
            <span class="token string">"&lt;style lang='scss' scoped>"</span><span class="token punctuation">,</span>
            <span class="token string">"//@import url($3); å¼•å…¥å…¬å…±cssç±»"</span><span class="token punctuation">,</span>
            <span class="token string">"$4"</span><span class="token punctuation">,</span>
            <span class="token string">"&lt;/style>"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"ç”ŸæˆVUEæ¨¡æ¿"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"http-getè¯·æ±‚"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"prefix"</span><span class="token operator">:</span> <span class="token string">"httpget"</span><span class="token punctuation">,</span>
        <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"this.\\$http(&#123;"</span><span class="token punctuation">,</span>
            <span class="token string">"url: this.\\$http.adornUrl(''),"</span><span class="token punctuation">,</span>
            <span class="token string">"method: 'get',"</span><span class="token punctuation">,</span>
            <span class="token string">"params: this.\\$http.adornParams(&#123;&#125;)"</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;).then((&#123; data &#125;) => &#123;"</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;)"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"httpGETè¯·æ±‚"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"http-postè¯·æ±‚"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"prefix"</span><span class="token operator">:</span> <span class="token string">"httppost"</span><span class="token punctuation">,</span>
        <span class="token property">"body"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">"this.\\$http(&#123;"</span><span class="token punctuation">,</span>
            <span class="token string">"url: this.\\$http.adornUrl(''),"</span><span class="token punctuation">,</span>
            <span class="token string">"method: 'post',"</span><span class="token punctuation">,</span>
            <span class="token string">"data: this.\\$http.adornData(data, false)"</span><span class="token punctuation">,</span>
            <span class="token string">"&#125;).then((&#123; data &#125;) => &#123; &#125;);"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"httpPOSTè¯·æ±‚"</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ›´å¤šè¯¦ç»†è¯´æ˜è§ï¼š <a target="_blank" rel="noopener" href="https://blog.csdn.net/z772330927/article/details/105730430/">https://blog.csdn.net/z772330927/article/details/105730430/</a> </p>
<h3 id="5-vscodeå¿«æ·é”®"><a href="#5-vscodeå¿«æ·é”®" class="headerlink" title="5. vscodeå¿«æ·é”®"></a>5. vscodeå¿«æ·é”®</h3><p>ctrl+shift+f å…¨å±€æœç´¢</p>
<p>alt+shift+f æ ¼å¼åŒ–ä»£ç </p>
<h3 id="6-å…³é—­eslintçš„è¯­æ³•æ£€æŸ¥"><a href="#6-å…³é—­eslintçš„è¯­æ³•æ£€æŸ¥" class="headerlink" title="6.  å…³é—­eslintçš„è¯­æ³•æ£€æŸ¥"></a>6.  å…³é—­eslintçš„è¯­æ³•æ£€æŸ¥</h3><p><img src="/img/spring-cloud/image-20200428171043110.png" alt="image-20200428171043110"></p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="7-å®‰è£…mybatisxæ’ä»¶"><a href="#7-å®‰è£…mybatisxæ’ä»¶" class="headerlink" title="7. å®‰è£…mybatisxæ’ä»¶"></a>7. å®‰è£…mybatisxæ’ä»¶</h3><p>åœ¨Marketplaceä¸­æœç´¢â€œmybatisxâ€ï¼Œå®‰è£…åé‡å¯IDEAï¼Œä½¿ç”¨æ—¶ä¼šè‡ªåŠ¨åœ¨@Mapperæ ‡æ³¨çš„æ¥å£ä¸Šï¼Œäº§ç”Ÿå°å›¾æ ‡ï¼Œç„¶åalt+enterï¼Œgenerate statementï¼Œå°±ä¼šè‡ªåŠ¨çš„åœ¨xmlæ–‡ä»¶ä¸­ç”ŸæˆSQLã€‚</p>
<p><img src="/img/spring-cloud/1588730028929.png" alt="1588730028929"></p>
<h3 id="8-mysqlçš„æ‰¹é‡åˆ é™¤"><a href="#8-mysqlçš„æ‰¹é‡åˆ é™¤" class="headerlink" title="8. mysqlçš„æ‰¹é‡åˆ é™¤"></a>8. mysqlçš„æ‰¹é‡åˆ é™¤</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span>  <span class="token punctuation">`</span>pms_attr_attrgroup_relation<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token punctuation">(</span>attr_id<span class="token operator">=</span> ? <span class="token operator">AND</span> attr_group_id <span class="token punctuation">)</span> <span class="token operator">OR</span> <span class="token punctuation">(</span>attr_id<span class="token operator">=</span> ? <span class="token operator">AND</span> attr_group_id <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="9-String-join"><a href="#9-String-join" class="headerlink" title="9. String.join"></a>9. String.join</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span> <span class="token annotation punctuation">@NotNull</span> 
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotNull</span> <span class="token class-name">CharSequence</span> delimiter<span class="token punctuation">,</span>
                          <span class="token annotation punctuation">@NotNull</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">CharSequence</span><span class="token punctuation">></span></span> elements<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>Returns a new String composed of copies of the CharSequence elements joined together with a copy of the specified delimiter.</p>
<p> è¿”å›ä¸€ä¸ªç”±CharSequenceå…ƒç´ çš„å‰¯æœ¬å’ŒæŒ‡å®šåˆ†éš”ç¬¦çš„å‰¯æœ¬ç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚ </p>
<p>For example,</p>
<pre><code> List&lt;String&gt; strings = new LinkedList&lt;&gt;();
 strings.add(&quot;Java&quot;);strings.add(&quot;is&quot;);
 strings.add(&quot;cool&quot;);
 String message = String.join(&quot; &quot;, strings);
 //message returned is: &quot;Java is cool&quot;

 Set&lt;String&gt; strings = new LinkedHashSet&lt;&gt;();
 strings.add(&quot;Java&quot;); strings.add(&quot;is&quot;);
 strings.add(&quot;very&quot;); strings.add(&quot;cool&quot;);
 String message = String.join(&quot;-&quot;, strings);
 //message returned is: &quot;Java-is-very-cool&quot;
</code></pre>
<p>Note that if an individual element is null, then â€œnullâ€ is added.</p>
<p> æ³¨æ„ï¼Œå¦‚æœå•ä¸ªå…ƒç´ ä¸ºnullï¼Œåˆ™æ·»åŠ â€œnullâ€ã€‚ </p>
<p>Params:<br>delimiter â€“ a sequence of characters that is used to separate each of the elements in the resulting String<br>               ç”¨äºåˆ†éš”ç»“æœå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå…ƒç´ çš„å­—ç¬¦åºåˆ— </p>
<p>elements â€“ an Iterable that will have its elements joined together.<br>                  å°†å…¶å…ƒç´ è¿æ¥åœ¨ä¸€èµ·çš„å¯è¿­ä»£çš„ã€‚ </p>
<p>Returns:<br>a new String that is composed from the elements argument<br> ç”±elementså‚æ•°ç»„æˆçš„æ–°å­—ç¬¦ä¸² </p>
<p>Throws:<br>NullPointerException â€“ If delimiter or elements is null</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> delimiter<span class="token punctuation">,</span>
        <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">CharSequence</span><span class="token punctuation">></span></span> elements<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>delimiter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">StringJoiner</span> joiner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringJoiner</span><span class="token punctuation">(</span>delimiter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CharSequence</span> cs<span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        joiner<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> joiner<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>èƒ½å¤Ÿçœ‹åˆ°å®é™…ä¸Šå®ƒå°±æ˜¯é€šè¿‡åˆ›å»ºStringJoinerï¼Œç„¶åéå†elementsï¼ŒåŠ å…¥æ¯ä¸ªå…ƒç´ æ¥å®Œæˆçš„ã€‚</p>
<p>StringJoiner</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java">java<span class="token punctuation">.</span>util <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">StringJoiner</span>
<span class="token keyword">extends</span> <span class="token class-name">Object</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>StringJoiner is used to construct a sequence of characters separated by a delimiter and optionally starting with a supplied prefix and ending with a supplied suffix.<br> tringJoinerç”¨äºæ„é€ ç”±åˆ†éš”ç¬¦åˆ†éš”çš„å­—ç¬¦åºåˆ—ï¼Œå¯ä»¥é€‰æ‹©ä»¥æä¾›çš„å‰ç¼€å¼€å§‹ï¼Œä»¥æä¾›çš„åç¼€ç»“æŸã€‚ </p>
<p>Prior to adding something to the StringJoiner, its sj.toString() method will, by default, return prefix + suffix. However, if the setEmptyValue method is called, the emptyValue supplied will be returned instead. This can be used, for example, when creating a string using set notation to indicate an empty set, i.e. â€œ{}â€, where the prefix is â€œ{â€œ, the suffix is â€œ}â€ and nothing has been added to the StringJoiner.<br> åœ¨å‘StringJoineræ·»åŠ å†…å®¹ä¹‹å‰ï¼Œå®ƒçš„sj.toString()æ–¹æ³•åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šè¿”å›å‰ç¼€+åç¼€ã€‚ä½†æ˜¯ï¼Œå¦‚æœè°ƒç”¨setEmptyValueæ–¹æ³•ï¼Œåˆ™è¿”å›æ‰€æä¾›çš„emptyValueã€‚ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨setç¬¦å·åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²æ¥è¡¨ç¤ºä¸€ä¸ªç©ºé›†æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚â€œ{}â€ï¼Œå…¶ä¸­å‰ç¼€æ˜¯â€œ{â€ï¼Œåç¼€æ˜¯â€œ}â€ï¼Œæ²¡æœ‰å‘StringJoineræ·»åŠ ä»»ä½•å†…å®¹ã€‚ </p>
<p>apiNote:<br>The String â€œ[George:Sally:Fred]â€ may be constructed as follows:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">StringJoiner</span> sj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringJoiner</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">,</span> <span class="token string">"["</span><span class="token punctuation">,</span> <span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sj<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"George"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Sally"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Fred"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> desiredString <span class="token operator">=</span> sj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>A StringJoiner may be employed to create formatted output from a java.util.stream.Stream using java.util.stream.Collectors.joining(CharSequence). For example:<br> ä½¿ç”¨StringJoinerä»java.util.streamåˆ›å»ºæ ¼å¼åŒ–è¾“å‡ºæµï¼Œä½¿ç”¨java.util.stream.Collectors.joining (CharSequenceè¿›è¡Œ)ã€‚ä¾‹å¦‚: </p>
<pre class="line-numbers language-none"><code class="language-none">List&lt;Integer&gt; numbers &#x3D; Arrays.asList(1, 2, 3, 4);
String commaSeparatedNumbers &#x3D; numbers.stream()
    .map(i -&gt; i.toString())
    .collect(Collectors.joining(&quot;, &quot;));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>é€šè¿‡åˆ†ææºç å‘ç°ï¼Œåœ¨â€œâ€å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªStringBuilderï¼Œæ‰€æœ‰åŠ å…¥åˆ°å®ƒå†…éƒ¨çš„å…ƒç´ éƒ½ä¼šå…ˆæ‹¼æ¥ä¸Šåˆ†å‰²ç¬¦ï¼Œç„¶åå†æ‹¼æ¥ä¸ŠåŠ å…¥çš„å…ƒç´ </p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">StringJoiner</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">CharSequence</span> newElement<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       <span class="token function">prepareBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">StringBuilder</span> <span class="token function">prepareBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
         value<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>delimiter<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
         value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>prefix<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span>
     <span class="token keyword">return</span> value<span class="token punctuation">;</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="10-åœ¨Serviceä¸­å¾®æœåŠ¡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯ä»¥é…ç½®å°†ä¸€äº›å¾®æœåŠ¡æ”¾ç½®åˆ°compoundä¸­ï¼Œç»„æˆä¸€ä¸ªå°ç»„"><a href="#10-åœ¨Serviceä¸­å¾®æœåŠ¡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯ä»¥é…ç½®å°†ä¸€äº›å¾®æœåŠ¡æ”¾ç½®åˆ°compoundä¸­ï¼Œç»„æˆä¸€ä¸ªå°ç»„" class="headerlink" title="10. åœ¨Serviceä¸­å¾®æœåŠ¡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯ä»¥é…ç½®å°†ä¸€äº›å¾®æœåŠ¡æ”¾ç½®åˆ°compoundä¸­ï¼Œç»„æˆä¸€ä¸ªå°ç»„"></a>10. åœ¨Serviceä¸­å¾®æœåŠ¡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯ä»¥é…ç½®å°†ä¸€äº›å¾®æœåŠ¡æ”¾ç½®åˆ°compoundä¸­ï¼Œç»„æˆä¸€ä¸ªå°ç»„</h3><p><img src="/img/spring-cloud/image-20200508222508833.png" alt="image-20200508222508833"></p>
<p>ä»¥åå†è¿è¡Œæ—¶ï¼Œç›´æ¥é€‰æ‹©è¿™ä¸ªcompoundå³å¯å¾ˆæ–¹ä¾¿çš„è¿è¡Œæˆ–åœæ­¢ä¸€ç»„å¾®æœåŠ¡ï¼š</p>
<p><img src="/img/spring-cloud/image-20200508223524543.png" alt="image-20200508223524543"></p>
<p>å¦å¤–å¯ä»¥å•ç‹¬ä¸ºæ¯ä¸ªå¾®æœåŠ¡ï¼Œè®¾ç½®éœ€è¦çš„è¿è¡Œæ—¶æœ€å¤§å †å†…å­˜å¤§å°ï¼š</p>
<p><img src="/img/spring-cloud/image-20200508222812353.png" alt="image-20200508222812353"></p>
<h3 id="11-mysqlçš„dateTimeå’Œtimestampçš„åŒºåˆ«ï¼Ÿ"><a href="#11-mysqlçš„dateTimeå’Œtimestampçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="11. mysqlçš„dateTimeå’Œtimestampçš„åŒºåˆ«ï¼Ÿ"></a>11. mysqlçš„dateTimeå’Œtimestampçš„åŒºåˆ«ï¼Ÿ</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/mxwz/p/7520309.html">MySQLä¸­datetimeå’Œtimestampçš„åŒºåˆ«åŠä½¿ç”¨</a></p>
<p><strong>TIMESTAMPå’ŒDATETIMEçš„ç›¸åŒç‚¹ï¼š</strong></p>
<p>1&gt; ä¸¤è€…éƒ½å¯ç”¨æ¥è¡¨ç¤ºYYYY-MM-DD HH:MM:SS[.fraction]ç±»å‹çš„æ—¥æœŸã€‚</p>
<p><strong>TIMESTAMPå’ŒDATETIMEçš„ä¸åŒç‚¹ï¼š</strong></p>
<p>1&gt; ä¸¤è€…çš„å­˜å‚¨æ–¹å¼ä¸ä¸€æ ·</p>
<p>å¯¹äºTIMESTAMPï¼Œå®ƒæŠŠå®¢æˆ·ç«¯æ’å…¥çš„æ—¶é—´ä»å½“å‰æ—¶åŒºè½¬åŒ–ä¸ºUTCï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰è¿›è¡Œå­˜å‚¨ã€‚æŸ¥è¯¢æ—¶ï¼Œå°†å…¶åˆè½¬åŒ–ä¸ºå®¢æˆ·ç«¯å½“å‰æ—¶åŒºè¿›è¡Œè¿”å›ã€‚</p>
<p>è€Œå¯¹äºDATETIMEï¼Œä¸åšä»»ä½•æ”¹å˜ï¼ŒåŸºæœ¬ä¸Šæ˜¯åŸæ ·è¾“å…¥å’Œè¾“å‡ºã€‚</p>
<p>2&gt; ä¸¤è€…æ‰€èƒ½å­˜å‚¨çš„æ—¶é—´èŒƒå›´ä¸ä¸€æ ·</p>
<p>timestampæ‰€èƒ½å­˜å‚¨çš„æ—¶é—´èŒƒå›´ä¸ºï¼šâ€™1970-01-01 00:00:01.000000â€™ åˆ° â€˜2038-01-19 03:14:07.999999â€™ã€‚</p>
<p>datetimeæ‰€èƒ½å­˜å‚¨çš„æ—¶é—´èŒƒå›´ä¸ºï¼šâ€™1000-01-01 00:00:00.000000â€™ åˆ° â€˜9999-12-31 23:59:59.999999â€™ã€‚</p>
<p>æ€»ç»“ï¼šTIMESTAMPå’ŒDATETIMEé™¤äº†å­˜å‚¨èŒƒå›´å’Œå­˜å‚¨æ–¹å¼ä¸ä¸€æ ·ï¼Œæ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚å½“ç„¶ï¼Œå¯¹äºè·¨æ—¶åŒºçš„ä¸šåŠ¡ï¼ŒTIMESTAMPæ›´ä¸ºåˆé€‚ã€‚</p>
<p> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/Jashinck/p/10472398.html">https://www.cnblogs.com/Jashinck/p/10472398.html</a> </p>
<h3 id="12-SpringBootä¸­çš„äº‹åŠ¡"><a href="#12-SpringBootä¸­çš„äº‹åŠ¡" class="headerlink" title="12. SpringBootä¸­çš„äº‹åŠ¡"></a>12. SpringBootä¸­çš„äº‹åŠ¡</h3><p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/Z__Sheng/article/details/89489053">https://blog.csdn.net/Z__Sheng/article/details/89489053</a> </p>
<h3 id="13-IDEA-RESTFUll-clinet"><a href="#13-IDEA-RESTFUll-clinet" class="headerlink" title="13. IDEA RESTFUll clinet"></a>13. IDEA RESTFUll clinet</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37502106/article/details/103183492">IntelliJ IDEA ä½¿ç”¨ rest client</a></p>
<h3 id="-1"><a href="#-1" class="headerlink" title=""></a></h3><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="1-TypeError-vm-previewHandle-is-not-a-function"><a href="#1-TypeError-vm-previewHandle-is-not-a-function" class="headerlink" title="1. TypeError: _vm.previewHandle is not a function"></a>1. TypeError: _vm.previewHandle is not a function</h3>
                
                
                    <br />
                    <!-- post-content-ad -->
                    <ins class="adsbygoogle"
                            style="display:block"
                            data-ad-client="ca-pub-3409699730406381"
                            data-ad-slot="9289016056"
                            data-ad-format="auto"
                            data-full-width-responsive="true"></ins>
                    <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                

                <br>
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/Java/spring-cloud/mall-distributed-advanced/" data-toggle="tooltip" data-placement="top" title="ã€Spring-cloudã€‘guliå•†åŸ-åˆ†å¸ƒå¼è¿›é˜¶">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/Vue/vue3-admin/10-fetch/" data-toggle="tooltip" data-placement="top" title="ã€Vue3-Adminã€‘æ•°æ®è¯·æ±‚ä¸å°è£…">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!--æ‰“èµ-->
                
                    <div class="reward">
                        <div class="reward-button">èµ <span class="reward-code"> 
                            <span class="alipay-code"> <img class="alipay-img" src="/img/reward/alipay.jpg"><b>æ”¯ä»˜å®æ‰“èµ</b></span> 
                            <span class="wechat-code"> <img class="wechat-img" src="/img/reward/wechat_pay.jpg"><b>å¾®ä¿¡æ‰“èµ</b> </span>
                            </span></div>
                        <p class="reward-notice">èµèµä¸€ä¸‹</p>
                    </div>
                
                <!--æ‰“èµ-->

                <br>
                <!--åˆ†äº«-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--åˆ†äº«-->
                <br>                       
                
                <!-- require APlayer -->
                
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
                <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>

                <div class="aplayer"
                    data-id="2297428102"
                    data-server="netease"
                    data-type="playlist"
                    data-fixed="true" >
                </div>
                

                
        
                    
                        <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  --> 
                        <div id="lv-container" data-id="city" data-uid="MTAyMC80Mzg3OC8yMDQxMw==">
                            <script type="text/javascript">
                                (function (d, s) {
                                    var j, e = d.getElementsByTagName(s)[0];
        
                                    if (typeof LivereTower === 'function') { return; }
        
                                    j = d.createElement(s);
                                    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                                    j.async = true;
        
                                    e.parentNode.insertBefore(j, e);
                                })(document, 'script');
                            </script>
                            <noscript> ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
                        </div>
                        <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
                    
            </div>
            
            <!-- Table of Contents -->
            
  
    <style>
      span.toc-nav-number{
        display: none
      }
    </style>
  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        <!-- toc -->
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-%E6%95%B4%E4%BD%93%E4%BB%8B%E7%BB%8D"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">1. æ•´ä½“ä»‹ç»</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1%EF%BC%89%E5%AE%89%E8%A3%85vagrant"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">1ï¼‰å®‰è£…vagrant</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2%EF%BC%89%E5%AE%89%E8%A3%85Centos7"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">2ï¼‰å®‰è£…Centos7</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-docker%E4%B8%AD%E5%AE%89%E8%A3%85mysql"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">2. dockerä¸­å®‰è£…mysql</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-docker%E4%B8%AD%E5%AE%89%E8%A3%85redis"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">3. dockerä¸­å®‰è£…redis</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#4-%E5%88%9B%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">4. åˆ›å»ºmavenå·¥ç¨‹</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#5-%E6%89%A7%E8%A1%8Csql%E8%84%9A%E6%9C%AC"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">5. æ‰§è¡Œsqlè„šæœ¬</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#6-clone-%E4%BA%BA%E4%BA%BA%E5%BC%80%E6%BA%90"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">6. clone äººäººå¼€æº</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#7-clone-renren-generator"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">7. clone renren-generator</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#clone"><span class="toc-nav-number">7.1.</span> <span class="toc-nav-text">clone</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE"><span class="toc-nav-number">7.2.</span> <span class="toc-nav-text">ä¿®æ”¹é…ç½®</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%BF%90%E8%A1%8C%E2%80%9Crenren-generator%E2%80%9D"><span class="toc-nav-number">7.3.</span> <span class="toc-nav-text">è¿è¡Œâ€œrenren-generatorâ€</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#8-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">8. å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#9-%E4%BD%BF%E7%94%A8openfen"><span class="toc-nav-number">9.</span> <span class="toc-nav-text">9. ä½¿ç”¨openfen</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#10-%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83"><span class="toc-nav-number">10.</span> <span class="toc-nav-text">10. é…ç½®ä¸­å¿ƒ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1%EF%BC%89%E4%BF%AE%E6%94%B9%E2%80%9Cgulimall-coupon%E2%80%9D%E6%A8%A1%E5%9D%97"><span class="toc-nav-number">10.1.</span> <span class="toc-nav-text">1ï¼‰ä¿®æ”¹â€œgulimall-couponâ€æ¨¡å—</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2%EF%BC%89%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F"><span class="toc-nav-number">10.2.</span> <span class="toc-nav-text">2ï¼‰ä¼ ç»Ÿæ–¹å¼</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3%EF%BC%89nacos-config"><span class="toc-nav-number">10.3.</span> <span class="toc-nav-text">3ï¼‰nacos config</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4%EF%BC%89Nacos%E6%94%AF%E6%8C%81%E4%B8%89%E7%A7%8D%E9%85%8D%E7%BD%AE%E5%8A%A0%E8%BD%BD%E6%96%B9%E6%96%B9%E6%A1%88"><span class="toc-nav-number">10.4.</span> <span class="toc-nav-text">4ï¼‰Nacosæ”¯æŒä¸‰ç§é…ç½®åŠ è½½æ–¹æ–¹æ¡ˆ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Namespace%E6%96%B9%E6%A1%88"><span class="toc-nav-number">10.4.0.1.</span> <span class="toc-nav-text">Namespaceæ–¹æ¡ˆ</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#DataID%E6%96%B9%E6%A1%88"><span class="toc-nav-number">10.4.0.2.</span> <span class="toc-nav-text">DataIDæ–¹æ¡ˆ</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#Group%E6%96%B9%E6%A1%88"><span class="toc-nav-number">10.4.0.3.</span> <span class="toc-nav-text">Groupæ–¹æ¡ˆ</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5%EF%BC%89%E5%90%8C%E6%97%B6%E5%8A%A0%E8%BD%BD%E5%A4%9A%E4%B8%AA%E9%85%8D%E7%BD%AE%E9%9B%86"><span class="toc-nav-number">10.5.</span> <span class="toc-nav-text">5ï¼‰åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®é›†</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#11-%E7%BD%91%E5%85%B3"><span class="toc-nav-number">11.</span> <span class="toc-nav-text">11. ç½‘å…³</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1%E3%80%81%E6%B3%A8%E5%86%8C%E2%80%9Cgulimall-gateway%E2%80%9D%E5%88%B0Nacos"><span class="toc-nav-number">11.1.</span> <span class="toc-nav-text">1ã€æ³¨å†Œâ€œgulimall-gatewayâ€åˆ°Nacos</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1%EF%BC%89%E5%88%9B%E5%BB%BA%E2%80%9Cgulimall-gateway%E2%80%9D"><span class="toc-nav-number">11.1.1.</span> <span class="toc-nav-text">1ï¼‰åˆ›å»ºâ€œgulimall-gatewayâ€</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2%EF%BC%89%E6%B7%BB%E5%8A%A0%E2%80%9Cgulimall-common%E2%80%9D%E4%BE%9D%E8%B5%96%E5%92%8C%E2%80%9Cspring-cloud-starter-gateway%E2%80%9D%E4%BE%9D%E8%B5%96"><span class="toc-nav-number">11.1.2.</span> <span class="toc-nav-text">2ï¼‰æ·»åŠ â€œgulimall-commonâ€ä¾èµ–å’Œâ€œspring-cloud-starter-gatewayâ€ä¾èµ–</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3%EF%BC%89%E2%80%9Ccom-bigdata-gulimall-gulimallgateway-GulimallGatewayApplication%E2%80%9D%E7%B1%BB%E4%B8%8A%E5%8A%A0%E4%B8%8A%E2%80%9C-EnableDiscoveryClient%E2%80%9D%E6%B3%A8%E8%A7%A3"><span class="toc-nav-number">11.1.3.</span> <span class="toc-nav-text">3ï¼‰â€œcom.bigdata.gulimall.gulimallgateway.GulimallGatewayApplicationâ€ç±»ä¸ŠåŠ ä¸Šâ€œ@EnableDiscoveryClientâ€æ³¨è§£</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#4%EF%BC%89%E5%9C%A8Nacos%E4%B8%AD%E5%88%9B%E5%BB%BA%E2%80%9Cgateway%E2%80%9D%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%90%8C%E6%97%B6%E5%9C%A8%E8%AF%A5%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%B8%AD%E5%88%9B%E5%BB%BA%E2%80%9Cgulimall-gateway-yml%E2%80%9D"><span class="toc-nav-number">11.1.4.</span> <span class="toc-nav-text">4ï¼‰åœ¨Nacosä¸­åˆ›å»ºâ€œgatewayâ€å‘½åç©ºé—´ï¼ŒåŒæ—¶åœ¨è¯¥å‘½åç©ºé—´ä¸­åˆ›å»ºâ€œgulimall-gateway.ymlâ€</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#5%EF%BC%89%E5%88%9B%E5%BB%BA%E2%80%9Cbootstrap-properties%E2%80%9D%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E9%85%8D%E7%BD%AE%EF%BC%8C%E6%8C%87%E6%98%8E%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E5%9C%B0%E5%9D%80%E5%92%8C%E6%89%80%E5%B1%9E%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-nav-number">11.1.5.</span> <span class="toc-nav-text">5ï¼‰åˆ›å»ºâ€œbootstrap.propertiesâ€æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼ŒæŒ‡æ˜é…ç½®ä¸­å¿ƒåœ°å€å’Œæ‰€å±å‘½åç©ºé—´</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#6%EF%BC%89%E5%88%9B%E5%BB%BA%E2%80%9Capplication-properties%E2%80%9D%E6%96%87%E4%BB%B6%EF%BC%8C%E6%8C%87%E5%AE%9A%E6%9C%8D%E5%8A%A1%E5%90%8D%E5%92%8C%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%9C%B0%E5%9D%80"><span class="toc-nav-number">11.1.6.</span> <span class="toc-nav-text">6ï¼‰åˆ›å»ºâ€œapplication.propertiesâ€æ–‡ä»¶ï¼ŒæŒ‡å®šæœåŠ¡åå’Œæ³¨å†Œä¸­å¿ƒåœ°å€</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#7%EF%BC%89%E5%90%AF%E5%8A%A8%E2%80%9Cgulimall-gateway%E2%80%9D"><span class="toc-nav-number">11.1.7.</span> <span class="toc-nav-text">7ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2%E3%80%81%E6%A1%88%E4%BE%8B"><span class="toc-nav-number">11.2.</span> <span class="toc-nav-text">2ã€æ¡ˆä¾‹</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1%EF%BC%89%E5%88%9B%E5%BB%BA%E2%80%9Capplication-yml%E2%80%9D"><span class="toc-nav-number">11.2.1.</span> <span class="toc-nav-text">1ï¼‰åˆ›å»ºâ€œapplication.ymlâ€</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2%EF%BC%89%E5%90%AF%E5%8A%A8%E2%80%9Cgulimall-gateway%E2%80%9D"><span class="toc-nav-number">11.2.2.</span> <span class="toc-nav-text">2ï¼‰å¯åŠ¨â€œgulimall-gatewayâ€</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3%EF%BC%89%E6%B5%8B%E8%AF%95"><span class="toc-nav-number">11.2.3.</span> <span class="toc-nav-text">3ï¼‰æµ‹è¯•</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#12-Vue"><span class="toc-nav-number">12.</span> <span class="toc-nav-text">12. Vue</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1%E3%80%81vue%E5%A3%B0%E6%98%8E%E5%BC%8F%E6%B8%B2%E6%9F%93"><span class="toc-nav-number">12.1.</span> <span class="toc-nav-text">1ã€vueå£°æ˜å¼æ¸²æŸ“</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2%E3%80%81%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A-%E6%A8%A1%E5%9E%8B%E5%8F%98%E5%8C%96%EF%BC%8C%E8%A7%86%E5%9B%BE%E5%8F%98%E5%8C%96%E3%80%82%E5%8F%8D%E4%B9%8B%E4%BA%A6%E7%84%B6"><span class="toc-nav-number">12.2.</span> <span class="toc-nav-text">2ã€åŒå‘ç»‘å®š,æ¨¡å‹å˜åŒ–ï¼Œè§†å›¾å˜åŒ–ã€‚åä¹‹äº¦ç„¶</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3%E3%80%81%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-nav-number">12.3.</span> <span class="toc-nav-text">3ã€äº‹ä»¶å¤„ç†</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4%E3%80%81v-bind-%E5%8D%95%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-nav-number">12.4.</span> <span class="toc-nav-text">4ã€v-bind :å•å‘ç»‘å®š</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5%E3%80%81v-model%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-nav-number">12.5.</span> <span class="toc-nav-text">5ã€v-modelåŒå‘ç»‘å®š</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6%E3%80%81v-on%E4%B8%BA%E6%8C%89%E9%92%AE%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6"><span class="toc-nav-number">12.6.</span> <span class="toc-nav-text">6ã€v-onä¸ºæŒ‰é’®ç»‘å®šäº‹ä»¶</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7%E3%80%81v-for%E9%81%8D%E5%8E%86%E5%BE%AA%E7%8E%AF"><span class="toc-nav-number">12.7.</span> <span class="toc-nav-text">7ã€v-foréå†å¾ªç¯</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-nav-number">12.8.</span> <span class="toc-nav-text">è¿‡æ»¤å™¨</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="toc-nav-number">12.9.</span> <span class="toc-nav-text">ç»„ä»¶åŒ–</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0"><span class="toc-nav-number">12.10.</span> <span class="toc-nav-text">ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#13-element-ui"><span class="toc-nav-number">13.</span> <span class="toc-nav-text">13. element ui</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link"><span class="toc-nav-number">13.1.</span> <span class="toc-nav-text"></span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#14-%E9%80%92%E5%BD%92%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-nav-number">14.</span> <span class="toc-nav-text">14. é€’å½’æ ‘å½¢ç»“æ„è·å–æ•°æ®</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#15-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-nav-number">15.</span> <span class="toc-nav-text">15. åˆ é™¤æ•°æ®</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#16-%E8%8F%9C%E5%8D%95%E6%8B%96%E5%8A%A8"><span class="toc-nav-number">16.</span> <span class="toc-nav-text">16. èœå•æ‹–åŠ¨</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%8B%96%E5%8A%A8%E8%8F%9C%E5%8D%95%E6%97%B6%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%E9%A1%BA%E5%BA%8F%E5%92%8C%E7%BA%A7%E5%88%AB"><span class="toc-nav-number">16.1.</span> <span class="toc-nav-text">æ‹–åŠ¨èœå•æ—¶éœ€è¦ä¿®æ”¹é¡ºåºå’Œçº§åˆ«</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%AE%BE%E7%BD%AE%E8%8F%9C%E5%8D%95%E6%8B%96%E5%8A%A8%E5%BC%80%E5%85%B3"><span class="toc-nav-number">16.2.</span> <span class="toc-nav-text">è®¾ç½®èœå•æ‹–åŠ¨å¼€å…³</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-nav-number">16.3.</span> <span class="toc-nav-text">æ‰¹é‡åˆ é™¤</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#17-%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E8%8F%9C%E5%8D%95"><span class="toc-nav-number">17.</span> <span class="toc-nav-text">17. å“ç‰Œç®¡ç†èœå•</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%B7%BB%E5%8A%A0%E2%80%9C%E6%98%BE%E7%A4%BA%E7%8A%B6%E6%80%81%E6%8C%89%E9%92%AE%E2%80%9D"><span class="toc-nav-number">17.1.</span> <span class="toc-nav-text">æ·»åŠ â€œæ˜¾ç¤ºçŠ¶æ€æŒ‰é’®â€</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%8A%E4%BC%A0"><span class="toc-nav-number">17.2.</span> <span class="toc-nav-text">æ·»åŠ ä¸Šä¼ </span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1%EF%BC%89%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="toc-nav-number">17.2.1.</span> <span class="toc-nav-text">1ï¼‰æ·»åŠ ä¾èµ–åŒ…</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2%EF%BC%89%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E6%B5%81"><span class="toc-nav-number">17.2.2.</span> <span class="toc-nav-text">2ï¼‰ä¸Šä¼ æ–‡ä»¶æµ</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%85%B6%E4%BB%96%E6%96%B9%E5%BC%8F"><span class="toc-nav-number">17.3.</span> <span class="toc-nav-text">å…¶ä»–æ–¹å¼</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1%EF%BC%89%E6%96%B0%E5%BB%BAgulimall-third-party"><span class="toc-nav-number">17.3.1.</span> <span class="toc-nav-text">1ï¼‰æ–°å»ºgulimall-third-party</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2%EF%BC%89%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%EF%BC%8C%E5%B0%86%E5%8E%9F%E6%9D%A5gulimall-common%E4%B8%AD%E7%9A%84%E2%80%9Cspring-cloud-starter-alicloud-oss%E2%80%9D%E4%BE%9D%E8%B5%96%E7%A7%BB%E5%8A%A8%E5%88%B0%E8%AF%A5%E9%A1%B9%E7%9B%AE%E4%B8%AD"><span class="toc-nav-number">17.3.2.</span> <span class="toc-nav-text">2ï¼‰æ·»åŠ ä¾èµ–ï¼Œå°†åŸæ¥gulimall-commonä¸­çš„â€œspring-cloud-starter-alicloud-ossâ€ä¾èµ–ç§»åŠ¨åˆ°è¯¥é¡¹ç›®ä¸­</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3%EF%BC%89%E5%9C%A8%E4%B8%BB%E5%90%AF%E5%8A%A8%E7%B1%BB%E4%B8%AD%E5%BC%80%E5%90%AF%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%B3%A8%E5%86%8C%E5%92%8C%E5%8F%91%E7%8E%B0"><span class="toc-nav-number">17.3.3.</span> <span class="toc-nav-text">3ï¼‰åœ¨ä¸»å¯åŠ¨ç±»ä¸­å¼€å¯æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#4%EF%BC%89%E5%9C%A8nacos%E4%B8%AD%E6%B3%A8%E5%86%8C"><span class="toc-nav-number">17.3.4.</span> <span class="toc-nav-text">4ï¼‰åœ¨nacosä¸­æ³¨å†Œ</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#5%EF%BC%89%E7%BC%96%E5%86%99%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-nav-number">17.3.5.</span> <span class="toc-nav-text">5ï¼‰ç¼–å†™é…ç½®æ–‡ä»¶</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#6%EF%BC%89-%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-nav-number">17.3.6.</span> <span class="toc-nav-text">6ï¼‰ ç¼–å†™æµ‹è¯•ç±»</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6"><span class="toc-nav-number">17.4.</span> <span class="toc-nav-text">ä¸Šä¼ ç»„ä»¶</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#18-JSR303%E6%A0%A1%E9%AA%8C"><span class="toc-nav-number">18.</span> <span class="toc-nav-text">18. JSR303æ ¡éªŒ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%AD%A5%E9%AA%A41%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3"><span class="toc-nav-number">18.1.</span> <span class="toc-nav-text">æ­¥éª¤1ï¼šä½¿ç”¨æ ¡éªŒæ³¨è§£</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%AD%A5%E9%AA%A42%EF%BC%9A%E5%9C%A8%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E7%A7%8D%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3-Valid%EF%BC%8C%E5%BC%80%E5%90%AF%E6%A0%A1%E9%AA%8C%EF%BC%8C"><span class="toc-nav-number">18.2.</span> <span class="toc-nav-text">æ­¥éª¤2ï¼šåœ¨è¯·æ±‚æ–¹æ³•ç§ï¼Œä½¿ç”¨æ ¡éªŒæ³¨è§£@Validï¼Œå¼€å¯æ ¡éªŒï¼Œ</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%AD%A5%E9%AA%A43%EF%BC%9A%E7%BB%99%E6%A0%A1%E9%AA%8C%E7%9A%84Bean%E5%90%8E%EF%BC%8C%E7%B4%A7%E8%B7%9F%E4%B8%80%E4%B8%AABindResult%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E5%88%B0%E6%A0%A1%E9%AA%8C%E7%9A%84%E7%BB%93%E6%9E%9C%E3%80%82%E6%8B%BF%E5%88%B0%E6%A0%A1%E9%AA%8C%E7%9A%84%E7%BB%93%E6%9E%9C%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E5%B0%81%E8%A3%85%E3%80%82"><span class="toc-nav-number">18.3.</span> <span class="toc-nav-text">æ­¥éª¤3ï¼šç»™æ ¡éªŒçš„Beanåï¼Œç´§è·Ÿä¸€ä¸ªBindResultï¼Œå°±å¯ä»¥è·å–åˆ°æ ¡éªŒçš„ç»“æœã€‚æ‹¿åˆ°æ ¡éªŒçš„ç»“æœï¼Œå°±å¯ä»¥è‡ªå®šä¹‰çš„å°è£…ã€‚</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%AD%A5%E9%AA%A44%EF%BC%9A%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-nav-number">18.4.</span> <span class="toc-nav-text">æ­¥éª¤4ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#19-%E5%88%86%E7%BB%84%E6%A0%A1%E9%AA%8C%E5%8A%9F%E8%83%BD%EF%BC%88%E5%AE%8C%E6%88%90%E5%A4%9A%E5%9C%BA%E6%99%AF%E7%9A%84%E5%A4%8D%E6%9D%82%E6%A0%A1%E9%AA%8C%EF%BC%89"><span class="toc-nav-number">19.</span> <span class="toc-nav-text">19. åˆ†ç»„æ ¡éªŒåŠŸèƒ½ï¼ˆå®Œæˆå¤šåœºæ™¯çš„å¤æ‚æ ¡éªŒï¼‰</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1%E3%80%81%E7%BB%99%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3%EF%BC%8C%E6%A0%87%E6%B3%A8%E4%B8%8Agroups%EF%BC%8C%E6%8C%87%E5%AE%9A%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E6%89%8D%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8C%E6%A0%A1%E9%AA%8C"><span class="toc-nav-number">19.1.</span> <span class="toc-nav-text">1ã€ç»™æ ¡éªŒæ³¨è§£ï¼Œæ ‡æ³¨ä¸Šgroupsï¼ŒæŒ‡å®šä»€ä¹ˆæƒ…å†µä¸‹æ‰éœ€è¦è¿›è¡Œæ ¡éªŒ</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2%E3%80%81%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E4%B8%8A%E4%BD%BF%E7%94%A8-Validated%E6%B3%A8%E8%A7%A3"><span class="toc-nav-number">19.2.</span> <span class="toc-nav-text">2ã€ä¸šåŠ¡æ–¹æ³•å‚æ•°ä¸Šä½¿ç”¨@Validatedæ³¨è§£</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3%E3%80%81%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E5%9C%A8%E5%88%86%E7%BB%84%E6%A0%A1%E9%AA%8C%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%8C%87%E5%AE%9A%E6%8C%87%E5%AE%9A%E5%88%86%E7%BB%84%E7%9A%84%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3%EF%BC%8C%E5%B0%86%E4%B8%8D%E4%BC%9A%E7%94%9F%E6%95%88%EF%BC%8C%E5%AE%83%E5%8F%AA%E4%BC%9A%E5%9C%A8%E4%B8%8D%E5%88%86%E7%BB%84%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%E7%94%9F%E6%95%88%E3%80%82"><span class="toc-nav-number">19.3.</span> <span class="toc-nav-text">3ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åˆ†ç»„æ ¡éªŒæƒ…å†µä¸‹ï¼Œæ²¡æœ‰æŒ‡å®šæŒ‡å®šåˆ†ç»„çš„æ ¡éªŒæ³¨è§£ï¼Œå°†ä¸ä¼šç”Ÿæ•ˆï¼Œå®ƒåªä¼šåœ¨ä¸åˆ†ç»„çš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#20-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E5%8A%9F%E8%83%BD"><span class="toc-nav-number">20.</span> <span class="toc-nav-text">20. è‡ªå®šä¹‰æ ¡éªŒåŠŸèƒ½</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1%E3%80%81%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3"><span class="toc-nav-number">20.1.</span> <span class="toc-nav-text">1ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2%E3%80%81%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E6%A0%A1%E9%AA%8C%E5%99%A8"><span class="toc-nav-number">20.2.</span> <span class="toc-nav-text">2ã€ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„æ ¡éªŒå™¨</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3%E3%80%81%E5%85%B3%E8%81%94%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E6%A0%A1%E9%AA%8C%E5%99%A8%E5%92%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E6%A0%A1%E9%AA%8C%E6%B3%A8%E8%A7%A3"><span class="toc-nav-number">20.3.</span> <span class="toc-nav-text">3ã€å…³è”è‡ªå®šä¹‰çš„æ ¡éªŒå™¨å’Œè‡ªå®šä¹‰çš„æ ¡éªŒæ³¨è§£</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4%E3%80%81%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="toc-nav-number">20.4.</span> <span class="toc-nav-text">4ã€ä½¿ç”¨å®ä¾‹</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#21-%E5%95%86%E5%93%81SPU%E5%92%8CSKU%E7%AE%A1%E7%90%86"><span class="toc-nav-number">21.</span> <span class="toc-nav-text">21. å•†å“SPUå’ŒSKUç®¡ç†</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#22-%E7%82%B9%E5%87%BB%E5%AD%90%E7%BB%84%E4%BB%B6%EF%BC%8C%E7%88%B6%E7%BB%84%E4%BB%B6%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6"><span class="toc-nav-number">22.</span> <span class="toc-nav-text">22. ç‚¹å‡»å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#23-%E8%A7%84%E6%A0%BC%E5%8F%82%E6%95%B0%E6%96%B0%E5%A2%9E%E4%B8%8EVO"><span class="toc-nav-number">23.</span> <span class="toc-nav-text">23. è§„æ ¼å‚æ•°æ–°å¢ä¸VO</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#24-%E6%9F%A5%E8%AF%A2%E5%88%86%E7%BB%84%E5%85%B3%E8%81%94%E5%B1%9E%E6%80%A7%E5%92%8C%E5%88%A0%E9%99%A4%E5%85%B3%E8%81%94"><span class="toc-nav-number">24.</span> <span class="toc-nav-text">24. æŸ¥è¯¢åˆ†ç»„å…³è”å±æ€§å’Œåˆ é™¤å…³è”</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#25-%E6%9F%A5%E8%AF%A2%E5%88%86%E7%BB%84%E6%9C%AA%E5%85%B3%E8%81%94%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-nav-number">25.</span> <span class="toc-nav-text">25. æŸ¥è¯¢åˆ†ç»„æœªå…³è”çš„å±æ€§</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#26-%E6%B7%BB%E5%8A%A0%E5%B1%9E%E6%80%A7%E5%92%8C%E5%88%86%E7%BB%84%E7%9A%84%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="toc-nav-number">26.</span> <span class="toc-nav-text">26. æ·»åŠ å±æ€§å’Œåˆ†ç»„çš„å…³è”å…³ç³»</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#27-%E5%8F%91%E5%B8%83%E5%95%86%E5%93%81"><span class="toc-nav-number">27.</span> <span class="toc-nav-text">27. å‘å¸ƒå•†å“</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#28-%E5%95%86%E5%93%81%E7%AE%A1%E7%90%86"><span class="toc-nav-number">28.</span> <span class="toc-nav-text">28. å•†å“ç®¡ç†</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#29-%E4%BB%93%E5%BA%93%E7%AE%A1%E7%90%86"><span class="toc-nav-number">29.</span> <span class="toc-nav-text">29. ä»“åº“ç®¡ç†</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#30-%E8%8E%B7%E5%8F%96spu%E8%A7%84%E6%A0%BC"><span class="toc-nav-number">30.</span> <span class="toc-nav-text">30. è·å–spuè§„æ ¼</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#31-%E4%BF%AE%E6%94%B9%E5%95%86%E5%93%81%E8%A7%84%E6%A0%BC"><span class="toc-nav-number">31.</span> <span class="toc-nav-text">31. ä¿®æ”¹å•†å“è§„æ ¼</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%B0%8F%E7%BB%93%EF%BC%9A"><span class="toc-nav-number">32.</span> <span class="toc-nav-text">å°ç»“ï¼š</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-%E5%9C%A8open-fen%E4%B8%AD%E4%BC%9A%E5%B0%86%E8%B0%83%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2%E4%B8%BAJSON%EF%BC%8C%E6%8E%A5%E6%94%B6%E6%96%B9%E6%8E%A5%E6%94%B6%E5%90%8E%EF%BC%8C%E5%B0%86JSON%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E6%AD%A4%E6%97%B6%E8%B0%83%E7%94%A8%E6%96%B9%E5%92%8C%E8%A2%AB%E8%B0%83%E7%94%A8%E6%96%B9%E7%9A%84%E5%A4%84%E7%90%86JSON%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8D%E4%B8%80%E5%AE%9A%E9%83%BD%E6%98%AF%E5%90%8C%E4%B8%80%E4%B8%AA%E7%B1%BB%EF%BC%8C%E5%8F%AA%E8%A6%81%E5%AE%83%E4%BB%AC%E7%9A%84%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B%E5%90%BB%E5%90%88%E5%8D%B3%E5%8F%AF%E3%80%82"><span class="toc-nav-number">32.1.</span> <span class="toc-nav-text">1.  åœ¨open fenä¸­ä¼šå°†è°ƒç”¨çš„æ•°æ®è½¬æ¢ä¸ºJSONï¼Œæ¥æ”¶æ–¹æ¥æ”¶åï¼Œå°†JSONè½¬æ¢ä¸ºå¯¹è±¡ï¼Œæ­¤æ—¶è°ƒç”¨æ–¹å’Œè¢«è°ƒç”¨æ–¹çš„å¤„ç†JSONçš„å¯¹è±¡ä¸ä¸€å®šéƒ½æ˜¯åŒä¸€ä¸ªç±»ï¼Œåªè¦å®ƒä»¬çš„å­—æ®µç±»å‹å»åˆå³å¯ã€‚</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-%E4%BA%8B%E5%8A%A1%E7%A9%B6%E7%AB%9F%E8%A6%81%E5%A6%82%E4%BD%95%E5%8A%A0%E4%B8%8A%EF%BC%9F"><span class="toc-nav-number">32.2.</span> <span class="toc-nav-text">2. äº‹åŠ¡ç©¶ç«Ÿè¦å¦‚ä½•åŠ ä¸Šï¼Ÿ</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-nav-number">33.</span> <span class="toc-nav-text">å…¶ä»–</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-%E6%96%87%E6%A1%A3%E5%8F%82%E8%80%83%E5%9C%B0%E5%9D%80"><span class="toc-nav-number">33.1.</span> <span class="toc-nav-text">1. æ–‡æ¡£å‚è€ƒåœ°å€</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8docker"><span class="toc-nav-number">33.2.</span> <span class="toc-nav-text">2. å¼€æœºå¯åŠ¨docker</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-%E6%9F%A5%E7%9C%8B%E5%91%BD%E4%BB%A4%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE"><span class="toc-nav-number">33.3.</span> <span class="toc-nav-text">3. æŸ¥çœ‹å‘½ä»¤çš„å®‰è£…ä½ç½®</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-vscode%E4%B8%AD%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5"><span class="toc-nav-number">33.4.</span> <span class="toc-nav-text">4. vscodeä¸­ç”Ÿæˆä»£ç ç‰‡æ®µ</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-vscode%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-nav-number">33.5.</span> <span class="toc-nav-text">5. vscodeå¿«æ·é”®</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-%E5%85%B3%E9%97%ADeslint%E7%9A%84%E8%AF%AD%E6%B3%95%E6%A3%80%E6%9F%A5"><span class="toc-nav-number">33.6.</span> <span class="toc-nav-text">6.  å…³é—­eslintçš„è¯­æ³•æ£€æŸ¥</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-%E5%AE%89%E8%A3%85mybatisx%E6%8F%92%E4%BB%B6"><span class="toc-nav-number">33.7.</span> <span class="toc-nav-text">7. å®‰è£…mybatisxæ’ä»¶</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-mysql%E7%9A%84%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-nav-number">33.8.</span> <span class="toc-nav-text">8. mysqlçš„æ‰¹é‡åˆ é™¤</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#9-String-join"><span class="toc-nav-number">33.9.</span> <span class="toc-nav-text">9. String.join</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#10-%E5%9C%A8Service%E4%B8%AD%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%AF%94%E8%BE%83%E5%A4%9A%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%85%8D%E7%BD%AE%E5%B0%86%E4%B8%80%E4%BA%9B%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%94%BE%E7%BD%AE%E5%88%B0compound%E4%B8%AD%EF%BC%8C%E7%BB%84%E6%88%90%E4%B8%80%E4%B8%AA%E5%B0%8F%E7%BB%84"><span class="toc-nav-number">33.10.</span> <span class="toc-nav-text">10. åœ¨Serviceä¸­å¾®æœåŠ¡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯ä»¥é…ç½®å°†ä¸€äº›å¾®æœåŠ¡æ”¾ç½®åˆ°compoundä¸­ï¼Œç»„æˆä¸€ä¸ªå°ç»„</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#11-mysql%E7%9A%84dateTime%E5%92%8Ctimestamp%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-nav-number">33.11.</span> <span class="toc-nav-text">11. mysqlçš„dateTimeå’Œtimestampçš„åŒºåˆ«ï¼Ÿ</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#12-SpringBoot%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1"><span class="toc-nav-number">33.12.</span> <span class="toc-nav-text">12. SpringBootä¸­çš„äº‹åŠ¡</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#13-IDEA-RESTFUll-clinet"><span class="toc-nav-number">33.13.</span> <span class="toc-nav-text">13. IDEA RESTFUll clinet</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#-1"><span class="toc-nav-number">33.14.</span> <span class="toc-nav-text"></span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#FAQ"><span class="toc-nav-number">34.</span> <span class="toc-nav-text">FAQ</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-TypeError-vm-previewHandle-is-not-a-function"><span class="toc-nav-number">34.1.</span> <span class="toc-nav-text">1. TypeError: _vm.previewHandle is not a function</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Recommended Posts  -->
                
                    <hr>
                    <h5>æ¨èæ–‡ç« </h5>
                    

    <div class="recommended_posts">
        <ul>
            
                <li><a href="https://fangzhioo.github.io/Java/spring-cloud/mall-high-availability-cluster/">ã€Spring-cloudã€‘guliå•†åŸ-é«˜å¯ç”¨é›†ç¾¤</a></li>
            
                <li><a href="https://fangzhioo.github.io/Java/spring-cloud/mall-distributed-advanced/">ã€Spring-cloudã€‘guliå•†åŸ-åˆ†å¸ƒå¼è¿›é˜¶</a></li>
            
        </ul>
    </div>
 
                

                <!-- Featured Tags -->
                
                <section>
                    <div class="tags">
                        
                            <a class="tag" href="/tags/#SpringCloud" title="SpringCloud">SpringCloud</a>
                        
                    </div>
                </section>
                
            </div>
        </div>
    </div>
</article>

<!-- å¤åˆ¶æ·»åŠ ç‰ˆæƒç”³æ˜-->
<script>
    /**/
    function setClipboardText(event){
        event.preventDefault();//é˜»æ­¢å…ƒç´ å‘ç”Ÿé»˜è®¤çš„è¡Œä¸ºï¼ˆä¾‹å¦‚ï¼Œå½“ç‚¹å‡»æäº¤æŒ‰é’®æ—¶é˜»æ­¢å¯¹è¡¨å•çš„æäº¤ï¼‰ã€‚
        var node = document.createElement('div');
        //å¯¹documentfragmentä¸ç†Ÿï¼Œä¸çŸ¥é“æ€ä¹ˆè·å–é‡Œé¢çš„å†…å®¹ï¼Œç”¨äº†ä¸€ä¸ªæ¯”è¾ƒç¬¨çš„æ–¹å¼
        node.appendChild(window.getSelection().getRangeAt(0).cloneContents());
        //getRangeAt(0)è¿”å›å¯¹åŸºäºé›¶çš„æ•°å­—ç´¢å¼•ä¸ä¼ é€’å‚æ•°åŒ¹é…çš„é€‰æ‹©å¯¹è±¡ä¸­çš„èŒƒå›´çš„å¼•ç”¨ã€‚å¯¹äºè¿ç»­é€‰æ‹©ï¼Œå‚æ•°åº”ä¸ºé›¶ã€‚
        var htmlData = '<div>'
            + node.innerHTML
            + '<br /><br />è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚<br />'
            + 'å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚<br />'
            + 'ä½œè€…ï¼šfangzhioo <br />é“¾æ¥ï¼š'
            + location.href
            + '<br />æ¥æºï¼šfangzhioo.github.io<br /><br />'
            + '</div>';
        var textData = window.getSelection().getRangeAt(0)
            + '\n\nè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚\n'
            + 'å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n'
            + 'ä½œè€…ï¼šfangzhioo\n'
            + 'é“¾æ¥ï¼š'
            + location.href
            + 'æ¥æºï¼šfangzhioo.github.io\n\n';
        if(event.clipboardData){
            event.clipboardData.setData("text/html", htmlData);
            //setData(å‰ªè´´æ¿æ ¼å¼, æ•°æ®) ç»™å‰ªè´´æ¿èµ‹äºˆæŒ‡å®šæ ¼å¼çš„æ•°æ®ã€‚è¿”å› true è¡¨ç¤ºæ“ä½œæˆåŠŸã€‚
            event.clipboardData.setData("text/plain",textData);
        }
        else if(window.clipboardData){ //window.clipboardDataçš„ä½œç”¨æ˜¯åœ¨é¡µé¢ä¸Šå°†éœ€è¦çš„ä¸œè¥¿å¤åˆ¶åˆ°å‰ªè´´æ¿ä¸Šï¼Œæä¾›äº†å¯¹äºé¢„å®šä¹‰çš„å‰ªè´´æ¿æ ¼å¼çš„è®¿é—®ï¼Œä»¥ä¾¿åœ¨ç¼–è¾‘æ“ä½œä¸­ä½¿ç”¨ã€‚
            return window.clipboardData.setData("text", textData);
        }
    };
 
    document.addEventListener('copy',function(e){
        setClipboardText(e);
    });
</script>

<!-- smooth scroll behavior polyfill  -->
<!-- <script type="text/javascript" src="/js/smoothscroll.js"></script> -->



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/fang-zhi-4-73">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">çŸ¥</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/fangzhioooo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/fangzhioo">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; æ–¹å¿— 2021 
                    <br>
                    Theme by <a target="_blank" rel="noopener" href="https://huangxuan.me/">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="https://fangzhioo.github.io">Fz</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=fangzhioo&repo=fangzhioo.github.io&type=star&count=true" >
                    </iframe>
                    <br />
                    <!--æ€»è®¿é—®é‡ç»Ÿè®¡-->
                    
                        <span id="busuanzi_container_site_pv" style="margin-left: 3px;">
                            æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
                        </span>
                    
                    <!--æ€»è®¿é—®é‡ç»Ÿè®¡-->

                </p>
            </div>
        </div>
    </div>
</footer>

<!-- Custom Theme JavaScript -->

<script src="/js/my-blog.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://fangzhioo.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-138588101-1';
    var _gaDomain = 'fangzhioo.github.io';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = 'dce5d892b228cc0a253520da429e7f11';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://fangzhioo.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

<!-- live2d -->
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":true,"debug":false,"model":{"position":"right","width":200,"height":400,"jsonPath":"/live2dw/assets/sagiri.model.json"},"mobile":{"show":true},"react":{"opacity":0.6},"log":false});</script>

</body>

</html>
